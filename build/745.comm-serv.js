/*! For license information please see 745.comm-serv.js.LICENSE.txt */
"use strict";exports.id=745,exports.ids=[745],exports.modules={745:(t,e,r)=>{r.d(e,{HTTPError:()=>s,TimeoutError:()=>o,default:()=>x});class s extends Error{constructor(t,e,r){const s=`${t.status||0===t.status?t.status:""} ${t.statusText||""}`.trim();super("Request failed with "+(s?`status code ${s}`:"an unknown error")),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=t,this.request=e,this.options=r}}class o extends Error{constructor(t){super("Request timed out"),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=t}}const n=t=>null!==t&&"object"==typeof t,i=(...t)=>{for(const e of t)if((!n(e)||Array.isArray(e))&&void 0!==e)throw new TypeError("The `options` argument must be an object");return u({},...t)},a=(t={},e={})=>{const r=new globalThis.Headers(t),s=e instanceof globalThis.Headers,o=new globalThis.Headers(e);for(const[t,e]of o.entries())s&&"undefined"===e||void 0===e?r.delete(t):r.set(t,e);return r},u=(...t)=>{let e={},r={};for(const s of t)if(Array.isArray(s))Array.isArray(e)||(e=[]),e=[...e,...s];else if(n(s)){for(let[t,r]of Object.entries(s))n(r)&&t in e&&(r=u(e[t],r)),e={...e,[t]:r};n(s.headers)&&(r=a(r,s.headers),e.headers=r)}return e},h=(()=>{let t=!1,e=!1;const r="function"==typeof globalThis.ReadableStream,s="function"==typeof globalThis.Request;return r&&s&&(e=new globalThis.Request("https://a.com",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type")),t&&!e})(),l="function"==typeof globalThis.AbortController,p="function"==typeof globalThis.ReadableStream,c="function"==typeof globalThis.FormData,f=["get","post","put","patch","head","delete"],d={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},b=2147483647,y=Symbol("stop"),m=t=>f.includes(t)?t.toUpperCase():t,_=[413,429,503],w={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:_,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY},g=(t={})=>{if("number"==typeof t)return{...w,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...w,...t,afterStatusCodes:_}},T=Boolean(globalThis.DOMException);function R(t){if(T)return new DOMException(t?.reason??"The operation was aborted.","AbortError");const e=new Error(t?.reason??"The operation was aborted.");return e.name="AbortError",e}class q{static create(t,e){const r=new q(t,e),o=async()=>{if(r._options.timeout>b)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();let t=await r._fetch();for(const e of r._options.hooks.afterResponse){const s=await e(r.request,r._options,r._decorateResponse(t.clone()));s instanceof globalThis.Response&&(t=s)}if(r._decorateResponse(t),!t.ok&&r._options.throwHttpErrors){let e=new s(t,r.request,r._options);for(const t of r._options.hooks.beforeError)e=await t(e);throw e}if(r._options.onDownloadProgress){if("function"!=typeof r._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!p)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return r._stream(t.clone(),r._options.onDownloadProgress)}return t},n=r._options.retry.methods.includes(r.request.method.toLowerCase())?r._retry(o):o();for(const[t,s]of Object.entries(d))n[t]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||s);const o=(await n).clone();if("json"===t){if(204===o.status)return"";if(0===(await o.clone().arrayBuffer()).byteLength)return"";if(e.parseJson)return e.parseJson(await o.text())}return o[t]()};return n}constructor(t,e={}){if(Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=t,this._options={credentials:this._input.credentials||"same-origin",...e,headers:a(this._input.headers,e.headers),hooks:u({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},e.hooks),method:m(e.method??this._input.method),prefixUrl:String(e.prefixUrl||""),retry:g(e.retry),throwHttpErrors:!1!==e.throwHttpErrors,timeout:void 0===e.timeout?1e4:e.timeout,fetch:e.fetch??globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(l){if(this.abortController=new globalThis.AbortController,this._options.signal){const t=this._options.signal;this._options.signal.addEventListener("abort",(()=>{this.abortController.abort(t.reason)}))}this._options.signal=this.abortController.signal}if(h&&(this._options.duplex="half"),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const t="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),e=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,t);!(c&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(e,{...this.request}),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",this._options.headers.get("content-type")??"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(t instanceof o)){if(t instanceof s){if(!this._options.retry.statusCodes.includes(t.response.status))return 0;const e=t.response.headers.get("Retry-After");if(e&&this._options.retry.afterStatusCodes.includes(t.response.status)){let t=Number(e);return Number.isNaN(t)?t=Date.parse(e)-Date.now():t*=1e3,void 0!==this._options.retry.maxRetryAfter&&t>this._options.retry.maxRetryAfter?0:t}if(413===t.response.status)return 0}const e=.3;return Math.min(this._options.retry.backoffLimit,e*2**(this._retryCount-1)*1e3)}return 0}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const r=Math.min(this._calculateRetryDelay(e),b);if(0!==r&&this._retryCount>0){await async function(t,{signal:e}){return new Promise(((r,s)=>{if(e){if(e.aborted)return void s(R(e));e.addEventListener("abort",o,{once:!0})}function o(){s(R(e)),clearTimeout(n)}const n=setTimeout((()=>{e?.removeEventListener("abort",o),r()}),t)}))}(r,{signal:this._options.signal});for(const t of this._options.hooks.beforeRetry)if(await t({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===y)return;return this._retry(t)}throw e}}async _fetch(){for(const t of this._options.hooks.beforeRequest){const e=await t(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}return!1===this._options.timeout?this._options.fetch(this.request.clone()):async function(t,e,r){return new Promise(((s,n)=>{const i=setTimeout((()=>{e&&e.abort(),n(new o(t))}),r.timeout);r.fetch(t).then(s).catch(n).then((()=>{clearTimeout(i)}))}))}(this.request.clone(),this.abortController,this._options)}_stream(t,e){const r=Number(t.headers.get("content-length"))||0;let s=0;return 204===t.status?(e&&e({percent:1,totalBytes:r,transferredBytes:s},new Uint8Array),new globalThis.Response(null,{status:t.status,statusText:t.statusText,headers:t.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(o){const n=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array),await async function t(){const{done:i,value:a}=await n.read();i?o.close():(e&&(s+=a.byteLength,e({percent:0===r?0:s/r,transferredBytes:s,totalBytes:r},a)),o.enqueue(a),await t())}()}}),{status:t.status,statusText:t.statusText,headers:t.headers})}}const v=t=>{const e=(e,r)=>q.create(e,i(t,r));for(const r of f)e[r]=(e,s)=>q.create(e,i(t,s,{method:r}));return e.create=t=>v(i(t)),e.extend=e=>v(i(t,e)),e.stop=y,e},x=v()}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUksTUFBRTNKLFNBQWV3SixFQUFPRSxPQUMvQkMsRUFDSEosRUFBV0ssU0FJUmhFLElBQ0h3RCxHQUFvQnBKLEVBQU1tRyxXQUUxQlAsRUFBbUIsQ0FBQ3lELFFBRFcsSUFBZkYsRUFBbUIsRUFBSUMsRUFBbUJELEVBQzdCQyxtQkFBa0JELGNBQWFuSixJQUc3RHVKLEVBQVdNLFFBQVE3SixTQUNiMEosSUFDUCxDQUVNQSxFQUNQLElBRUQsQ0FDQ3BLLE9BQVFILEVBQVNHLE9BQ2pCQyxXQUFZSixFQUFTSSxXQUNyQjhCLFFBQVNsQyxFQUFTa0MsU0FHckIsRUcvVkQsTUFBTXlJLEVBQWtCQyxJQUV2QixNQUFNdEYsRUFBbUNBLENBQUN4QixFQUFjNUQsSUFBc0JrRixFQUFHeUYsT0FBTy9HLEVBQU9oRCxFQUFpQjhKLEVBQVUxSyxJQUUxSCxJQUFLLE1BQU15QyxLQUFVUSxFQUVwQm1DLEVBQUczQyxHQUFVLENBQUNtQixFQUFjNUQsSUFBc0JrRixFQUFHeUYsT0FBTy9HLEVBQU9oRCxFQUFpQjhKLEVBQVUxSyxFQUFTLENBQUN5QyxZQU96RyxPQUpBMkMsRUFBR3VGLE9BQVVDLEdBQW1DSCxFQUFlN0osRUFBaUJnSyxJQUNoRnhGLEVBQUd5RixPQUFVRCxHQUFtQ0gsRUFBZTdKLEVBQWlCOEosRUFBVUUsSUFDMUZ4RixFQUFHM0IsS0FBT0EsRUFFSDJCLENBQWdCLEVBS3hCLEVBRldxRiIsInNvdXJjZXMiOlsid2VicGFjazovL0Bvd2xtZWFucy9yZWdvdi1jb21tLXNlcnZlci8uLi8uLi9zb3VyY2UvZXJyb3JzL0hUVFBFcnJvci50cyIsIndlYnBhY2s6Ly9Ab3dsbWVhbnMvcmVnb3YtY29tbS1zZXJ2ZXIvLi4vLi4vc291cmNlL2Vycm9ycy9UaW1lb3V0RXJyb3IudHMiLCJ3ZWJwYWNrOi8vQG93bG1lYW5zL3JlZ292LWNvbW0tc2VydmVyLy4uLy4uL3NvdXJjZS91dGlscy9pcy50cyIsIndlYnBhY2s6Ly9Ab3dsbWVhbnMvcmVnb3YtY29tbS1zZXJ2ZXIvLi4vLi4vc291cmNlL3V0aWxzL21lcmdlLnRzIiwid2VicGFjazovL0Bvd2xtZWFucy9yZWdvdi1jb21tLXNlcnZlci8uLi8uLi9zb3VyY2UvY29yZS9jb25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vQG93bG1lYW5zL3JlZ292LWNvbW0tc2VydmVyLy4uLy4uL3NvdXJjZS91dGlscy9ub3JtYWxpemUudHMiLCJ3ZWJwYWNrOi8vQG93bG1lYW5zL3JlZ292LWNvbW0tc2VydmVyLy4uLy4uL3NvdXJjZS9lcnJvcnMvRE9NRXhjZXB0aW9uLnRzIiwid2VicGFjazovL0Bvd2xtZWFucy9yZWdvdi1jb21tLXNlcnZlci8uLi8uLi9zb3VyY2UvY29yZS9LeS50cyIsIndlYnBhY2s6Ly9Ab3dsbWVhbnMvcmVnb3YtY29tbS1zZXJ2ZXIvLi4vLi4vc291cmNlL3V0aWxzL2RlbGF5LnRzIiwid2VicGFjazovL0Bvd2xtZWFucy9yZWdvdi1jb21tLXNlcnZlci8uLi8uLi9zb3VyY2UvdXRpbHMvdGltZW91dC50cyIsIndlYnBhY2s6Ly9Ab3dsbWVhbnMvcmVnb3YtY29tbS1zZXJ2ZXIvLi4vc291cmNlL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHtOb3JtYWxpemVkT3B0aW9uc30gZnJvbSAnLi4vdHlwZXMvb3B0aW9ucy5qcyc7XG5cbi8vIGVzbGludC1saW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuZXhwb3J0IGNsYXNzIEhUVFBFcnJvciBleHRlbmRzIEVycm9yIHtcblx0cHVibGljIHJlc3BvbnNlOiBSZXNwb25zZTtcblx0cHVibGljIHJlcXVlc3Q6IFJlcXVlc3Q7XG5cdHB1YmxpYyBvcHRpb25zOiBOb3JtYWxpemVkT3B0aW9ucztcblxuXHRjb25zdHJ1Y3RvcihyZXNwb25zZTogUmVzcG9uc2UsIHJlcXVlc3Q6IFJlcXVlc3QsIG9wdGlvbnM6IE5vcm1hbGl6ZWRPcHRpb25zKSB7XG5cdFx0Y29uc3QgY29kZSA9IChyZXNwb25zZS5zdGF0dXMgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSAwKSA/IHJlc3BvbnNlLnN0YXR1cyA6ICcnO1xuXHRcdGNvbnN0IHRpdGxlID0gcmVzcG9uc2Uuc3RhdHVzVGV4dCB8fCAnJztcblx0XHRjb25zdCBzdGF0dXMgPSBgJHtjb2RlfSAke3RpdGxlfWAudHJpbSgpO1xuXHRcdGNvbnN0IHJlYXNvbiA9IHN0YXR1cyA/IGBzdGF0dXMgY29kZSAke3N0YXR1c31gIDogJ2FuIHVua25vd24gZXJyb3InO1xuXG5cdFx0c3VwZXIoYFJlcXVlc3QgZmFpbGVkIHdpdGggJHtyZWFzb259YCk7XG5cblx0XHR0aGlzLm5hbWUgPSAnSFRUUEVycm9yJztcblx0XHR0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG5cdFx0dGhpcy5yZXF1ZXN0ID0gcmVxdWVzdDtcblx0XHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHR9XG59XG4iLCJleHBvcnQgY2xhc3MgVGltZW91dEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuXHRwdWJsaWMgcmVxdWVzdDogUmVxdWVzdDtcblxuXHRjb25zdHJ1Y3RvcihyZXF1ZXN0OiBSZXF1ZXN0KSB7XG5cdFx0c3VwZXIoJ1JlcXVlc3QgdGltZWQgb3V0Jyk7XG5cdFx0dGhpcy5uYW1lID0gJ1RpbWVvdXRFcnJvcic7XG5cdFx0dGhpcy5yZXF1ZXN0ID0gcmVxdWVzdDtcblx0fVxufVxuIiwiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcbmV4cG9ydCBjb25zdCBpc09iamVjdCA9ICh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIG9iamVjdCA9PiB2YWx1ZSAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnO1xuIiwiaW1wb3J0IHR5cGUge0t5SGVhZGVyc0luaXQsIE9wdGlvbnN9IGZyb20gJy4uL3R5cGVzL29wdGlvbnMuanMnO1xuaW1wb3J0IHtpc09iamVjdH0gZnJvbSAnLi9pcy5qcyc7XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUFuZE1lcmdlID0gKC4uLnNvdXJjZXM6IEFycmF5PFBhcnRpYWw8T3B0aW9ucz4gfCB1bmRlZmluZWQ+KTogUGFydGlhbDxPcHRpb25zPiA9PiB7XG5cdGZvciAoY29uc3Qgc291cmNlIG9mIHNvdXJjZXMpIHtcblx0XHRpZiAoKCFpc09iamVjdChzb3VyY2UpIHx8IEFycmF5LmlzQXJyYXkoc291cmNlKSkgJiYgdHlwZW9mIHNvdXJjZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBgb3B0aW9uc2AgYXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3QnKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZGVlcE1lcmdlKHt9LCAuLi5zb3VyY2VzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtZXJnZUhlYWRlcnMgPSAoc291cmNlMTogS3lIZWFkZXJzSW5pdCA9IHt9LCBzb3VyY2UyOiBLeUhlYWRlcnNJbml0ID0ge30pID0+IHtcblx0Y29uc3QgcmVzdWx0ID0gbmV3IGdsb2JhbFRoaXMuSGVhZGVycyhzb3VyY2UxIGFzIEhlYWRlcnNJbml0KTtcblx0Y29uc3QgaXNIZWFkZXJzSW5zdGFuY2UgPSBzb3VyY2UyIGluc3RhbmNlb2YgZ2xvYmFsVGhpcy5IZWFkZXJzO1xuXHRjb25zdCBzb3VyY2UgPSBuZXcgZ2xvYmFsVGhpcy5IZWFkZXJzKHNvdXJjZTIgYXMgSGVhZGVyc0luaXQpO1xuXG5cdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIHNvdXJjZS5lbnRyaWVzKCkpIHtcblx0XHRpZiAoKGlzSGVhZGVyc0luc3RhbmNlICYmIHZhbHVlID09PSAndW5kZWZpbmVkJykgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmVzdWx0LmRlbGV0ZShrZXkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXN1bHQuc2V0KGtleSwgdmFsdWUpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyBUT0RPOiBNYWtlIHRoaXMgc3Ryb25nbHktdHlwZWQgKG5vIGBhbnlgKS5cbmV4cG9ydCBjb25zdCBkZWVwTWVyZ2UgPSA8VD4oLi4uc291cmNlczogQXJyYXk8UGFydGlhbDxUPiB8IHVuZGVmaW5lZD4pOiBUID0+IHtcblx0bGV0IHJldHVyblZhbHVlOiBhbnkgPSB7fTtcblx0bGV0IGhlYWRlcnMgPSB7fTtcblxuXHRmb3IgKGNvbnN0IHNvdXJjZSBvZiBzb3VyY2VzKSB7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkoc291cmNlKSkge1xuXHRcdFx0aWYgKCFBcnJheS5pc0FycmF5KHJldHVyblZhbHVlKSkge1xuXHRcdFx0XHRyZXR1cm5WYWx1ZSA9IFtdO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm5WYWx1ZSA9IFsuLi5yZXR1cm5WYWx1ZSwgLi4uc291cmNlXTtcblx0XHR9IGVsc2UgaWYgKGlzT2JqZWN0KHNvdXJjZSkpIHtcblx0XHRcdGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzb3VyY2UpKSB7XG5cdFx0XHRcdGlmIChpc09iamVjdCh2YWx1ZSkgJiYga2V5IGluIHJldHVyblZhbHVlKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBkZWVwTWVyZ2UocmV0dXJuVmFsdWVba2V5XSwgdmFsdWUpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuVmFsdWUgPSB7Li4ucmV0dXJuVmFsdWUsIFtrZXldOiB2YWx1ZX07XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpc09iamVjdCgoc291cmNlIGFzIGFueSkuaGVhZGVycykpIHtcblx0XHRcdFx0aGVhZGVycyA9IG1lcmdlSGVhZGVycyhoZWFkZXJzLCAoc291cmNlIGFzIGFueSkuaGVhZGVycyk7XG5cdFx0XHRcdHJldHVyblZhbHVlLmhlYWRlcnMgPSBoZWFkZXJzO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiByZXR1cm5WYWx1ZTtcbn07XG4iLCJpbXBvcnQgdHlwZSB7RXhwZWN0LCBFcXVhbH0gZnJvbSAnQHR5cGUtY2hhbGxlbmdlcy91dGlscyc7XG5pbXBvcnQge0h0dHBNZXRob2R9IGZyb20gJy4uL3R5cGVzL29wdGlvbnMuanMnO1xuXG5leHBvcnQgY29uc3Qgc3VwcG9ydHNSZXF1ZXN0U3RyZWFtcyA9ICgoKSA9PiB7XG5cdGxldCBkdXBsZXhBY2Nlc3NlZCA9IGZhbHNlO1xuXHRsZXQgaGFzQ29udGVudFR5cGUgPSBmYWxzZTtcblx0Y29uc3Qgc3VwcG9ydHNSZWFkYWJsZVN0cmVhbSA9IHR5cGVvZiBnbG9iYWxUaGlzLlJlYWRhYmxlU3RyZWFtID09PSAnZnVuY3Rpb24nO1xuXHRjb25zdCBzdXBwb3J0c1JlcXVlc3QgPSB0eXBlb2YgZ2xvYmFsVGhpcy5SZXF1ZXN0ID09PSAnZnVuY3Rpb24nO1xuXG5cdGlmIChzdXBwb3J0c1JlYWRhYmxlU3RyZWFtICYmIHN1cHBvcnRzUmVxdWVzdCkge1xuXHRcdGhhc0NvbnRlbnRUeXBlID0gbmV3IGdsb2JhbFRoaXMuUmVxdWVzdCgnaHR0cHM6Ly9hLmNvbScsIHtcblx0XHRcdGJvZHk6IG5ldyBnbG9iYWxUaGlzLlJlYWRhYmxlU3RyZWFtKCksXG5cdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdC8vIEB0cy1leHBlY3QtZXJyb3IgLSBUeXBlcyBhcmUgb3V0ZGF0ZWQuXG5cdFx0XHRnZXQgZHVwbGV4KCkge1xuXHRcdFx0XHRkdXBsZXhBY2Nlc3NlZCA9IHRydWU7XG5cdFx0XHRcdHJldHVybiAnaGFsZic7XG5cdFx0XHR9LFxuXHRcdH0pLmhlYWRlcnMuaGFzKCdDb250ZW50LVR5cGUnKTtcblx0fVxuXG5cdHJldHVybiBkdXBsZXhBY2Nlc3NlZCAmJiAhaGFzQ29udGVudFR5cGU7XG59KSgpO1xuXG5leHBvcnQgY29uc3Qgc3VwcG9ydHNBYm9ydENvbnRyb2xsZXIgPSB0eXBlb2YgZ2xvYmFsVGhpcy5BYm9ydENvbnRyb2xsZXIgPT09ICdmdW5jdGlvbic7XG5leHBvcnQgY29uc3Qgc3VwcG9ydHNSZXNwb25zZVN0cmVhbXMgPSB0eXBlb2YgZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbSA9PT0gJ2Z1bmN0aW9uJztcbmV4cG9ydCBjb25zdCBzdXBwb3J0c0Zvcm1EYXRhID0gdHlwZW9mIGdsb2JhbFRoaXMuRm9ybURhdGEgPT09ICdmdW5jdGlvbic7XG5cbmV4cG9ydCBjb25zdCByZXF1ZXN0TWV0aG9kcyA9IFsnZ2V0JywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2hlYWQnLCAnZGVsZXRlJ10gYXMgY29uc3Q7XG5cbmNvbnN0IHZhbGlkYXRlID0gPFQgZXh0ZW5kcyBBcnJheTx0cnVlPj4oKSA9PiB1bmRlZmluZWQgYXMgdW5rbm93biBhcyBUO1xudmFsaWRhdGU8W1xuXHRFeHBlY3Q8RXF1YWw8dHlwZW9mIHJlcXVlc3RNZXRob2RzW251bWJlcl0sIEh0dHBNZXRob2Q+Pixcbl0+KCk7XG5cbmV4cG9ydCBjb25zdCByZXNwb25zZVR5cGVzID0ge1xuXHRqc29uOiAnYXBwbGljYXRpb24vanNvbicsXG5cdHRleHQ6ICd0ZXh0LyonLFxuXHRmb3JtRGF0YTogJ211bHRpcGFydC9mb3JtLWRhdGEnLFxuXHRhcnJheUJ1ZmZlcjogJyovKicsXG5cdGJsb2I6ICcqLyonLFxufSBhcyBjb25zdDtcblxuLy8gVGhlIG1heGltdW0gdmFsdWUgb2YgYSAzMmJpdCBpbnQgKHNlZSBpc3N1ZSAjMTE3KVxuZXhwb3J0IGNvbnN0IG1heFNhZmVUaW1lb3V0ID0gMl8xNDdfNDgzXzY0NztcblxuZXhwb3J0IGNvbnN0IHN0b3AgPSBTeW1ib2woJ3N0b3AnKTtcbiIsImltcG9ydCB7cmVxdWVzdE1ldGhvZHN9IGZyb20gJy4uL2NvcmUvY29uc3RhbnRzLmpzJztcbmltcG9ydCB0eXBlIHtIdHRwTWV0aG9kfSBmcm9tICcuLi90eXBlcy9vcHRpb25zLmpzJztcbmltcG9ydCB0eXBlIHtSZXRyeU9wdGlvbnN9IGZyb20gJy4uL3R5cGVzL3JldHJ5LmpzJztcblxuZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZVJlcXVlc3RNZXRob2QgPSAoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyA9PlxuXHRyZXF1ZXN0TWV0aG9kcy5pbmNsdWRlcyhpbnB1dCBhcyBIdHRwTWV0aG9kKSA/IGlucHV0LnRvVXBwZXJDYXNlKCkgOiBpbnB1dDtcblxuY29uc3QgcmV0cnlNZXRob2RzID0gWydnZXQnLCAncHV0JywgJ2hlYWQnLCAnZGVsZXRlJywgJ29wdGlvbnMnLCAndHJhY2UnXTtcblxuY29uc3QgcmV0cnlTdGF0dXNDb2RlcyA9IFs0MDgsIDQxMywgNDI5LCA1MDAsIDUwMiwgNTAzLCA1MDRdO1xuXG5jb25zdCByZXRyeUFmdGVyU3RhdHVzQ29kZXMgPSBbNDEzLCA0MjksIDUwM107XG5cbmNvbnN0IGRlZmF1bHRSZXRyeU9wdGlvbnM6IFJlcXVpcmVkPFJldHJ5T3B0aW9ucz4gPSB7XG5cdGxpbWl0OiAyLFxuXHRtZXRob2RzOiByZXRyeU1ldGhvZHMsXG5cdHN0YXR1c0NvZGVzOiByZXRyeVN0YXR1c0NvZGVzLFxuXHRhZnRlclN0YXR1c0NvZGVzOiByZXRyeUFmdGVyU3RhdHVzQ29kZXMsXG5cdG1heFJldHJ5QWZ0ZXI6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSxcblx0YmFja29mZkxpbWl0OiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG59O1xuXG5leHBvcnQgY29uc3Qgbm9ybWFsaXplUmV0cnlPcHRpb25zID0gKHJldHJ5OiBudW1iZXIgfCBSZXRyeU9wdGlvbnMgPSB7fSk6IFJlcXVpcmVkPFJldHJ5T3B0aW9ucz4gPT4ge1xuXHRpZiAodHlwZW9mIHJldHJ5ID09PSAnbnVtYmVyJykge1xuXHRcdHJldHVybiB7XG5cdFx0XHQuLi5kZWZhdWx0UmV0cnlPcHRpb25zLFxuXHRcdFx0bGltaXQ6IHJldHJ5LFxuXHRcdH07XG5cdH1cblxuXHRpZiAocmV0cnkubWV0aG9kcyAmJiAhQXJyYXkuaXNBcnJheShyZXRyeS5tZXRob2RzKSkge1xuXHRcdHRocm93IG5ldyBFcnJvcigncmV0cnkubWV0aG9kcyBtdXN0IGJlIGFuIGFycmF5Jyk7XG5cdH1cblxuXHRpZiAocmV0cnkuc3RhdHVzQ29kZXMgJiYgIUFycmF5LmlzQXJyYXkocmV0cnkuc3RhdHVzQ29kZXMpKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdyZXRyeS5zdGF0dXNDb2RlcyBtdXN0IGJlIGFuIGFycmF5Jyk7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdC4uLmRlZmF1bHRSZXRyeU9wdGlvbnMsXG5cdFx0Li4ucmV0cnksXG5cdFx0YWZ0ZXJTdGF0dXNDb2RlczogcmV0cnlBZnRlclN0YXR1c0NvZGVzLFxuXHR9O1xufTtcbiIsIi8vIERPTUV4Y2VwdGlvbiBpcyBzdXBwb3J0ZWQgb24gbW9zdCBtb2Rlcm4gYnJvd3NlcnMgYW5kIE5vZGUuanMgMTgrLlxuLy8gQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRE9NRXhjZXB0aW9uI2Jyb3dzZXJfY29tcGF0aWJpbGl0eVxuY29uc3QgaXNEb21FeGNlcHRpb25TdXBwb3J0ZWQgPSBCb29sZWFuKGdsb2JhbFRoaXMuRE9NRXhjZXB0aW9uKTtcblxuLy8gVE9ETzogV2hlbiB0YXJnZXRpbmcgTm9kZS5qcyAxOCwgdXNlIGBzaWduYWwudGhyb3dJZkFib3J0ZWQoKWAgKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9BYm9ydFNpZ25hbC90aHJvd0lmQWJvcnRlZClcbmV4cG9ydCBmdW5jdGlvbiBjb21wb3NlQWJvcnRFcnJvcihzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuXHQvKlxuXHROT1RFOiBVc2UgRG9tRXhjZXB0aW9uIHdpdGggQWJvcnRFcnJvciBuYW1lIGFzIHNwZWNpZmllZCBpbiBNRE4gZG9jcyAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0Fib3J0Q29udHJvbGxlci9hYm9ydClcblx0PiBXaGVuIGFib3J0KCkgaXMgY2FsbGVkLCB0aGUgZmV0Y2goKSBwcm9taXNlIHJlamVjdHMgd2l0aCBhbiBFcnJvciBvZiB0eXBlIERPTUV4Y2VwdGlvbiwgd2l0aCBuYW1lIEFib3J0RXJyb3IuXG5cdCovXG5cdGlmIChpc0RvbUV4Y2VwdGlvblN1cHBvcnRlZCkge1xuXHRcdHJldHVybiBuZXcgRE9NRXhjZXB0aW9uKHNpZ25hbD8ucmVhc29uID8/ICdUaGUgb3BlcmF0aW9uIHdhcyBhYm9ydGVkLicsICdBYm9ydEVycm9yJyk7XG5cdH1cblxuXHQvLyBET01FeGNlcHRpb24gbm90IHN1cHBvcnRlZC4gRmFsbCBiYWNrIHRvIHVzZSBvZiBlcnJvciBhbmQgb3ZlcnJpZGUgbmFtZS5cblx0Y29uc3QgZXJyb3IgPSBuZXcgRXJyb3Ioc2lnbmFsPy5yZWFzb24gPz8gJ1RoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQuJyk7XG5cdGVycm9yLm5hbWUgPSAnQWJvcnRFcnJvcic7XG5cblx0cmV0dXJuIGVycm9yO1xufVxuIiwiaW1wb3J0IHtIVFRQRXJyb3J9IGZyb20gJy4uL2Vycm9ycy9IVFRQRXJyb3IuanMnO1xuaW1wb3J0IHtUaW1lb3V0RXJyb3J9IGZyb20gJy4uL2Vycm9ycy9UaW1lb3V0RXJyb3IuanMnO1xuaW1wb3J0IHR5cGUge0hvb2tzfSBmcm9tICcuLi90eXBlcy9ob29rcy5qcyc7XG5pbXBvcnQgdHlwZSB7SW5wdXQsIEludGVybmFsT3B0aW9ucywgTm9ybWFsaXplZE9wdGlvbnMsIE9wdGlvbnMsIFNlYXJjaFBhcmFtc0luaXR9IGZyb20gJy4uL3R5cGVzL29wdGlvbnMuanMnO1xuaW1wb3J0IHtSZXNwb25zZVByb21pc2V9IGZyb20gJy4uL3R5cGVzL1Jlc3BvbnNlUHJvbWlzZS5qcyc7XG5pbXBvcnQge2RlZXBNZXJnZSwgbWVyZ2VIZWFkZXJzfSBmcm9tICcuLi91dGlscy9tZXJnZS5qcyc7XG5pbXBvcnQge25vcm1hbGl6ZVJlcXVlc3RNZXRob2QsIG5vcm1hbGl6ZVJldHJ5T3B0aW9uc30gZnJvbSAnLi4vdXRpbHMvbm9ybWFsaXplLmpzJztcbmltcG9ydCB0aW1lb3V0LCB7VGltZW91dE9wdGlvbnN9IGZyb20gJy4uL3V0aWxzL3RpbWVvdXQuanMnO1xuaW1wb3J0IGRlbGF5IGZyb20gJy4uL3V0aWxzL2RlbGF5LmpzJztcbmltcG9ydCB7T2JqZWN0RW50cmllc30gZnJvbSAnLi4vdXRpbHMvdHlwZXMuanMnO1xuaW1wb3J0IHtcblx0bWF4U2FmZVRpbWVvdXQsXG5cdHJlc3BvbnNlVHlwZXMsXG5cdHN0b3AsXG5cdHN1cHBvcnRzQWJvcnRDb250cm9sbGVyLFxuXHRzdXBwb3J0c0Zvcm1EYXRhLFxuXHRzdXBwb3J0c1Jlc3BvbnNlU3RyZWFtcyxcblx0c3VwcG9ydHNSZXF1ZXN0U3RyZWFtcyxcbn0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuXG5leHBvcnQgY2xhc3MgS3kge1xuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3Byb21pc2UtZnVuY3Rpb24tYXN5bmNcblx0c3RhdGljIGNyZWF0ZShpbnB1dDogSW5wdXQsIG9wdGlvbnM6IE9wdGlvbnMpOiBSZXNwb25zZVByb21pc2Uge1xuXHRcdGNvbnN0IGt5ID0gbmV3IEt5KGlucHV0LCBvcHRpb25zKTtcblxuXHRcdGNvbnN0IGZuID0gYXN5bmMgKCk6IFByb21pc2U8UmVzcG9uc2U+ID0+IHtcblx0XHRcdGlmIChreS5fb3B0aW9ucy50aW1lb3V0ID4gbWF4U2FmZVRpbWVvdXQpIHtcblx0XHRcdFx0dGhyb3cgbmV3IFJhbmdlRXJyb3IoYFRoZSBcXGB0aW1lb3V0XFxgIG9wdGlvbiBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuICR7bWF4U2FmZVRpbWVvdXR9YCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIERlbGF5IHRoZSBmZXRjaCBzbyB0aGF0IGJvZHkgbWV0aG9kIHNob3J0Y3V0cyBjYW4gc2V0IHRoZSBBY2NlcHQgaGVhZGVyXG5cdFx0XHRhd2FpdCBQcm9taXNlLnJlc29sdmUoKTtcblx0XHRcdGxldCByZXNwb25zZSA9IGF3YWl0IGt5Ll9mZXRjaCgpO1xuXG5cdFx0XHRmb3IgKGNvbnN0IGhvb2sgb2Yga3kuX29wdGlvbnMuaG9va3MuYWZ0ZXJSZXNwb25zZSkge1xuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYXdhaXQtaW4tbG9vcFxuXHRcdFx0XHRjb25zdCBtb2RpZmllZFJlc3BvbnNlID0gYXdhaXQgaG9vayhcblx0XHRcdFx0XHRreS5yZXF1ZXN0LFxuXHRcdFx0XHRcdGt5Ll9vcHRpb25zIGFzIE5vcm1hbGl6ZWRPcHRpb25zLFxuXHRcdFx0XHRcdGt5Ll9kZWNvcmF0ZVJlc3BvbnNlKHJlc3BvbnNlLmNsb25lKCkpLFxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGlmIChtb2RpZmllZFJlc3BvbnNlIGluc3RhbmNlb2YgZ2xvYmFsVGhpcy5SZXNwb25zZSkge1xuXHRcdFx0XHRcdHJlc3BvbnNlID0gbW9kaWZpZWRSZXNwb25zZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRreS5fZGVjb3JhdGVSZXNwb25zZShyZXNwb25zZSk7XG5cblx0XHRcdGlmICghcmVzcG9uc2Uub2sgJiYga3kuX29wdGlvbnMudGhyb3dIdHRwRXJyb3JzKSB7XG5cdFx0XHRcdGxldCBlcnJvciA9IG5ldyBIVFRQRXJyb3IocmVzcG9uc2UsIGt5LnJlcXVlc3QsIChreS5fb3B0aW9ucyBhcyB1bmtub3duKSBhcyBOb3JtYWxpemVkT3B0aW9ucyk7XG5cblx0XHRcdFx0Zm9yIChjb25zdCBob29rIG9mIGt5Ll9vcHRpb25zLmhvb2tzLmJlZm9yZUVycm9yKSB7XG5cdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWF3YWl0LWluLWxvb3Bcblx0XHRcdFx0XHRlcnJvciA9IGF3YWl0IGhvb2soZXJyb3IpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGBvbkRvd25sb2FkUHJvZ3Jlc3NgIGlzIHBhc3NlZCwgaXQgdXNlcyB0aGUgc3RyZWFtIEFQSSBpbnRlcm5hbGx5XG5cdFx0XHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHRcdFx0aWYgKGt5Ll9vcHRpb25zLm9uRG93bmxvYWRQcm9ncmVzcykge1xuXHRcdFx0XHRpZiAodHlwZW9mIGt5Ll9vcHRpb25zLm9uRG93bmxvYWRQcm9ncmVzcyAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBgb25Eb3dubG9hZFByb2dyZXNzYCBvcHRpb24gbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIXN1cHBvcnRzUmVzcG9uc2VTdHJlYW1zKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdTdHJlYW1zIGFyZSBub3Qgc3VwcG9ydGVkIGluIHlvdXIgZW52aXJvbm1lbnQuIGBSZWFkYWJsZVN0cmVhbWAgaXMgbWlzc2luZy4nKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBreS5fc3RyZWFtKHJlc3BvbnNlLmNsb25lKCksIGt5Ll9vcHRpb25zLm9uRG93bmxvYWRQcm9ncmVzcyk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXNwb25zZTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgaXNSZXRyaWFibGVNZXRob2QgPSBreS5fb3B0aW9ucy5yZXRyeS5tZXRob2RzLmluY2x1ZGVzKGt5LnJlcXVlc3QubWV0aG9kLnRvTG93ZXJDYXNlKCkpO1xuXHRcdGNvbnN0IHJlc3VsdCA9IChpc1JldHJpYWJsZU1ldGhvZCA/IGt5Ll9yZXRyeShmbikgOiBmbigpKSBhcyBSZXNwb25zZVByb21pc2U7XG5cblx0XHRmb3IgKGNvbnN0IFt0eXBlLCBtaW1lVHlwZV0gb2YgT2JqZWN0LmVudHJpZXMocmVzcG9uc2VUeXBlcykgYXMgT2JqZWN0RW50cmllczx0eXBlb2YgcmVzcG9uc2VUeXBlcz4pIHtcblx0XHRcdHJlc3VsdFt0eXBlXSA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9wcmVmZXItbnVsbGlzaC1jb2FsZXNjaW5nXG5cdFx0XHRcdGt5LnJlcXVlc3QuaGVhZGVycy5zZXQoJ2FjY2VwdCcsIGt5LnJlcXVlc3QuaGVhZGVycy5nZXQoJ2FjY2VwdCcpIHx8IG1pbWVUeXBlKTtcblxuXHRcdFx0XHRjb25zdCBhd2FpdGVkUmVzdWx0ID0gYXdhaXQgcmVzdWx0O1xuXHRcdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0ZWRSZXN1bHQuY2xvbmUoKTtcblxuXHRcdFx0XHRpZiAodHlwZSA9PT0gJ2pzb24nKSB7XG5cdFx0XHRcdFx0aWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA0KSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJyc7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCByZXNwb25zZS5jbG9uZSgpLmFycmF5QnVmZmVyKCk7XG5cdFx0XHRcdFx0Y29uc3QgcmVzcG9uc2VTaXplID0gYXJyYXlCdWZmZXIuYnl0ZUxlbmd0aDtcblx0XHRcdFx0XHRpZiAocmVzcG9uc2VTaXplID09PSAwKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJyc7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKG9wdGlvbnMucGFyc2VKc29uKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gb3B0aW9ucy5wYXJzZUpzb24oYXdhaXQgcmVzcG9uc2UudGV4dCgpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gcmVzcG9uc2VbdHlwZV0oKTtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdHB1YmxpYyByZXF1ZXN0OiBSZXF1ZXN0O1xuXHRwcm90ZWN0ZWQgYWJvcnRDb250cm9sbGVyPzogQWJvcnRDb250cm9sbGVyO1xuXHRwcm90ZWN0ZWQgX3JldHJ5Q291bnQgPSAwO1xuXHRwcm90ZWN0ZWQgX2lucHV0OiBJbnB1dDtcblx0cHJvdGVjdGVkIF9vcHRpb25zOiBJbnRlcm5hbE9wdGlvbnM7XG5cblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcblx0Y29uc3RydWN0b3IoaW5wdXQ6IElucHV0LCBvcHRpb25zOiBPcHRpb25zID0ge30pIHtcblx0XHR0aGlzLl9pbnB1dCA9IGlucHV0O1xuXHRcdHRoaXMuX29wdGlvbnMgPSB7XG5cdFx0XHQvLyBUT0RPOiBjcmVkZW50aWFscyBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoZSBzcGVjIGNoYW5nZSBpcyBpbXBsZW1lbnRlZCBpbiBhbGwgYnJvd3NlcnMuIENvbnRleHQ6IGh0dHBzOi8vd3d3LmNocm9tZXN0YXR1cy5jb20vZmVhdHVyZS80NTM5NDczMzEyMzUwMjA4XG5cdFx0XHRjcmVkZW50aWFsczogKHRoaXMuX2lucHV0IGFzIFJlcXVlc3QpLmNyZWRlbnRpYWxzIHx8ICdzYW1lLW9yaWdpbicsXG5cdFx0XHQuLi5vcHRpb25zLFxuXHRcdFx0aGVhZGVyczogbWVyZ2VIZWFkZXJzKCh0aGlzLl9pbnB1dCBhcyBSZXF1ZXN0KS5oZWFkZXJzLCBvcHRpb25zLmhlYWRlcnMpLFxuXHRcdFx0aG9va3M6IGRlZXBNZXJnZTxSZXF1aXJlZDxIb29rcz4+KFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0YmVmb3JlUmVxdWVzdDogW10sXG5cdFx0XHRcdFx0YmVmb3JlUmV0cnk6IFtdLFxuXHRcdFx0XHRcdGJlZm9yZUVycm9yOiBbXSxcblx0XHRcdFx0XHRhZnRlclJlc3BvbnNlOiBbXSxcblx0XHRcdFx0fSxcblx0XHRcdFx0b3B0aW9ucy5ob29rcyxcblx0XHRcdCksXG5cdFx0XHRtZXRob2Q6IG5vcm1hbGl6ZVJlcXVlc3RNZXRob2Qob3B0aW9ucy5tZXRob2QgPz8gKHRoaXMuX2lucHV0IGFzIFJlcXVlc3QpLm1ldGhvZCksXG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3ByZWZlci1udWxsaXNoLWNvYWxlc2Npbmdcblx0XHRcdHByZWZpeFVybDogU3RyaW5nKG9wdGlvbnMucHJlZml4VXJsIHx8ICcnKSxcblx0XHRcdHJldHJ5OiBub3JtYWxpemVSZXRyeU9wdGlvbnMob3B0aW9ucy5yZXRyeSksXG5cdFx0XHR0aHJvd0h0dHBFcnJvcnM6IG9wdGlvbnMudGhyb3dIdHRwRXJyb3JzICE9PSBmYWxzZSxcblx0XHRcdHRpbWVvdXQ6IHR5cGVvZiBvcHRpb25zLnRpbWVvdXQgPT09ICd1bmRlZmluZWQnID8gMTBfMDAwIDogb3B0aW9ucy50aW1lb3V0LFxuXHRcdFx0ZmV0Y2g6IG9wdGlvbnMuZmV0Y2ggPz8gZ2xvYmFsVGhpcy5mZXRjaC5iaW5kKGdsb2JhbFRoaXMpLFxuXHRcdH07XG5cblx0XHRpZiAodHlwZW9mIHRoaXMuX2lucHV0ICE9PSAnc3RyaW5nJyAmJiAhKHRoaXMuX2lucHV0IGluc3RhbmNlb2YgVVJMIHx8IHRoaXMuX2lucHV0IGluc3RhbmNlb2YgZ2xvYmFsVGhpcy5SZXF1ZXN0KSkge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignYGlucHV0YCBtdXN0IGJlIGEgc3RyaW5nLCBVUkwsIG9yIFJlcXVlc3QnKTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5fb3B0aW9ucy5wcmVmaXhVcmwgJiYgdHlwZW9mIHRoaXMuX2lucHV0ID09PSAnc3RyaW5nJykge1xuXHRcdFx0aWYgKHRoaXMuX2lucHV0LnN0YXJ0c1dpdGgoJy8nKSkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2BpbnB1dGAgbXVzdCBub3QgYmVnaW4gd2l0aCBhIHNsYXNoIHdoZW4gdXNpbmcgYHByZWZpeFVybGAnKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCF0aGlzLl9vcHRpb25zLnByZWZpeFVybC5lbmRzV2l0aCgnLycpKSB7XG5cdFx0XHRcdHRoaXMuX29wdGlvbnMucHJlZml4VXJsICs9ICcvJztcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5faW5wdXQgPSB0aGlzLl9vcHRpb25zLnByZWZpeFVybCArIHRoaXMuX2lucHV0O1xuXHRcdH1cblxuXHRcdGlmIChzdXBwb3J0c0Fib3J0Q29udHJvbGxlcikge1xuXHRcdFx0dGhpcy5hYm9ydENvbnRyb2xsZXIgPSBuZXcgZ2xvYmFsVGhpcy5BYm9ydENvbnRyb2xsZXIoKTtcblx0XHRcdGlmICh0aGlzLl9vcHRpb25zLnNpZ25hbCkge1xuXHRcdFx0XHRjb25zdCBvcmlnaW5hbFNpZ25hbCA9IHRoaXMuX29wdGlvbnMuc2lnbmFsO1xuXG5cdFx0XHRcdHRoaXMuX29wdGlvbnMuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuYWJvcnRDb250cm9sbGVyIS5hYm9ydChvcmlnaW5hbFNpZ25hbC5yZWFzb24pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5fb3B0aW9ucy5zaWduYWwgPSB0aGlzLmFib3J0Q29udHJvbGxlci5zaWduYWw7XG5cdFx0fVxuXG5cdFx0aWYgKHN1cHBvcnRzUmVxdWVzdFN0cmVhbXMpIHtcblx0XHRcdC8vIEB0cy1leHBlY3QtZXJyb3IgLSBUeXBlcyBhcmUgb3V0ZGF0ZWQuXG5cdFx0XHR0aGlzLl9vcHRpb25zLmR1cGxleCA9ICdoYWxmJztcblx0XHR9XG5cblx0XHR0aGlzLnJlcXVlc3QgPSBuZXcgZ2xvYmFsVGhpcy5SZXF1ZXN0KHRoaXMuX2lucHV0IGFzIFJlcXVlc3RJbmZvLCB0aGlzLl9vcHRpb25zIGFzIFJlcXVlc3RJbml0KTtcblxuXHRcdGlmICh0aGlzLl9vcHRpb25zLnNlYXJjaFBhcmFtcykge1xuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHVuaWNvcm4vcHJldmVudC1hYmJyZXZpYXRpb25zXG5cdFx0XHRjb25zdCB0ZXh0U2VhcmNoUGFyYW1zID0gdHlwZW9mIHRoaXMuX29wdGlvbnMuc2VhcmNoUGFyYW1zID09PSAnc3RyaW5nJ1xuXHRcdFx0XHQ/IHRoaXMuX29wdGlvbnMuc2VhcmNoUGFyYW1zLnJlcGxhY2UoL15cXD8vLCAnJylcblx0XHRcdFx0OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHRoaXMuX29wdGlvbnMuc2VhcmNoUGFyYW1zIGFzIHVua25vd24gYXMgU2VhcmNoUGFyYW1zSW5pdCkudG9TdHJpbmcoKTtcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB1bmljb3JuL3ByZXZlbnQtYWJicmV2aWF0aW9uc1xuXHRcdFx0Y29uc3Qgc2VhcmNoUGFyYW1zID0gJz8nICsgdGV4dFNlYXJjaFBhcmFtcztcblx0XHRcdGNvbnN0IHVybCA9IHRoaXMucmVxdWVzdC51cmwucmVwbGFjZSgvKD86XFw/Lio/KT8oPz0jfCQpLywgc2VhcmNoUGFyYW1zKTtcblxuXHRcdFx0Ly8gVG8gcHJvdmlkZSBjb3JyZWN0IGZvcm0gYm91bmRhcnksIENvbnRlbnQtVHlwZSBoZWFkZXIgc2hvdWxkIGJlIGRlbGV0ZWQgZWFjaCB0aW1lIHdoZW4gbmV3IFJlcXVlc3QgaW5zdGFudGlhdGVkIGZyb20gYW5vdGhlciBvbmVcblx0XHRcdGlmIChcblx0XHRcdFx0KChzdXBwb3J0c0Zvcm1EYXRhICYmIHRoaXMuX29wdGlvbnMuYm9keSBpbnN0YW5jZW9mIGdsb2JhbFRoaXMuRm9ybURhdGEpXG5cdFx0XHRcdFx0fHwgdGhpcy5fb3B0aW9ucy5ib2R5IGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zKSAmJiAhKHRoaXMuX29wdGlvbnMuaGVhZGVycyAmJiAodGhpcy5fb3B0aW9ucy5oZWFkZXJzIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4pWydjb250ZW50LXR5cGUnXSlcblx0XHRcdCkge1xuXHRcdFx0XHR0aGlzLnJlcXVlc3QuaGVhZGVycy5kZWxldGUoJ2NvbnRlbnQtdHlwZScpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUaGUgc3ByZWFkIG9mIGB0aGlzLnJlcXVlc3RgIGlzIHJlcXVpcmVkIGFzIG90aGVyd2lzZSBpdCBtaXNzZXMgdGhlIGBkdXBsZXhgIG9wdGlvbiBmb3Igc29tZSByZWFzb24gYW5kIHRocm93cy5cblx0XHRcdHRoaXMucmVxdWVzdCA9IG5ldyBnbG9iYWxUaGlzLlJlcXVlc3QobmV3IGdsb2JhbFRoaXMuUmVxdWVzdCh1cmwsIHsuLi50aGlzLnJlcXVlc3R9KSwgdGhpcy5fb3B0aW9ucyBhcyBSZXF1ZXN0SW5pdCk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuX29wdGlvbnMuanNvbiAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHR0aGlzLl9vcHRpb25zLmJvZHkgPSBKU09OLnN0cmluZ2lmeSh0aGlzLl9vcHRpb25zLmpzb24pO1xuXHRcdFx0dGhpcy5yZXF1ZXN0LmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCB0aGlzLl9vcHRpb25zLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSA/PyAnYXBwbGljYXRpb24vanNvbicpO1xuXHRcdFx0dGhpcy5yZXF1ZXN0ID0gbmV3IGdsb2JhbFRoaXMuUmVxdWVzdCh0aGlzLnJlcXVlc3QsIHtib2R5OiB0aGlzLl9vcHRpb25zLmJvZHl9KTtcblx0XHR9XG5cdH1cblxuXHRwcm90ZWN0ZWQgX2NhbGN1bGF0ZVJldHJ5RGVsYXkoZXJyb3I6IHVua25vd24pIHtcblx0XHR0aGlzLl9yZXRyeUNvdW50Kys7XG5cblx0XHRpZiAodGhpcy5fcmV0cnlDb3VudCA8IHRoaXMuX29wdGlvbnMucmV0cnkubGltaXQgJiYgIShlcnJvciBpbnN0YW5jZW9mIFRpbWVvdXRFcnJvcikpIHtcblx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEhUVFBFcnJvcikge1xuXHRcdFx0XHRpZiAoIXRoaXMuX29wdGlvbnMucmV0cnkuc3RhdHVzQ29kZXMuaW5jbHVkZXMoZXJyb3IucmVzcG9uc2Uuc3RhdHVzKSkge1xuXHRcdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgcmV0cnlBZnRlciA9IGVycm9yLnJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdSZXRyeS1BZnRlcicpO1xuXHRcdFx0XHRpZiAocmV0cnlBZnRlciAmJiB0aGlzLl9vcHRpb25zLnJldHJ5LmFmdGVyU3RhdHVzQ29kZXMuaW5jbHVkZXMoZXJyb3IucmVzcG9uc2Uuc3RhdHVzKSkge1xuXHRcdFx0XHRcdGxldCBhZnRlciA9IE51bWJlcihyZXRyeUFmdGVyKTtcblx0XHRcdFx0XHRpZiAoTnVtYmVyLmlzTmFOKGFmdGVyKSkge1xuXHRcdFx0XHRcdFx0YWZ0ZXIgPSBEYXRlLnBhcnNlKHJldHJ5QWZ0ZXIpIC0gRGF0ZS5ub3coKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0YWZ0ZXIgKj0gMTAwMDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAodHlwZW9mIHRoaXMuX29wdGlvbnMucmV0cnkubWF4UmV0cnlBZnRlciAhPT0gJ3VuZGVmaW5lZCcgJiYgYWZ0ZXIgPiB0aGlzLl9vcHRpb25zLnJldHJ5Lm1heFJldHJ5QWZ0ZXIpIHtcblx0XHRcdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiBhZnRlcjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQxMykge1xuXHRcdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IEJBQ0tPRkZfRkFDVE9SID0gMC4zO1xuXHRcdFx0cmV0dXJuIE1hdGgubWluKHRoaXMuX29wdGlvbnMucmV0cnkuYmFja29mZkxpbWl0LCBCQUNLT0ZGX0ZBQ1RPUiAqICgyICoqICh0aGlzLl9yZXRyeUNvdW50IC0gMSkpICogMTAwMCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIDA7XG5cdH1cblxuXHRwcm90ZWN0ZWQgX2RlY29yYXRlUmVzcG9uc2UocmVzcG9uc2U6IFJlc3BvbnNlKTogUmVzcG9uc2Uge1xuXHRcdGlmICh0aGlzLl9vcHRpb25zLnBhcnNlSnNvbikge1xuXHRcdFx0cmVzcG9uc2UuanNvbiA9IGFzeW5jICgpID0+IHRoaXMuX29wdGlvbnMucGFyc2VKc29uIShhd2FpdCByZXNwb25zZS50ZXh0KCkpO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXNwb25zZTtcblx0fVxuXG5cdHByb3RlY3RlZCBhc3luYyBfcmV0cnk8VCBleHRlbmRzICguLi5hcmdzOiBhbnkpID0+IFByb21pc2U8YW55Pj4oZm46IFQpOiBQcm9taXNlPFJldHVyblR5cGU8VD4gfCB2b2lkPiB7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBhd2FpdCBmbigpO1xuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1pbXBsaWNpdC1hbnktY2F0Y2hcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc3QgbXMgPSBNYXRoLm1pbih0aGlzLl9jYWxjdWxhdGVSZXRyeURlbGF5KGVycm9yKSwgbWF4U2FmZVRpbWVvdXQpO1xuXHRcdFx0aWYgKG1zICE9PSAwICYmIHRoaXMuX3JldHJ5Q291bnQgPiAwKSB7XG5cdFx0XHRcdGF3YWl0IGRlbGF5KG1zLCB7c2lnbmFsOiB0aGlzLl9vcHRpb25zLnNpZ25hbH0pO1xuXG5cdFx0XHRcdGZvciAoY29uc3QgaG9vayBvZiB0aGlzLl9vcHRpb25zLmhvb2tzLmJlZm9yZVJldHJ5KSB7XG5cdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWF3YWl0LWluLWxvb3Bcblx0XHRcdFx0XHRjb25zdCBob29rUmVzdWx0ID0gYXdhaXQgaG9vayh7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0OiB0aGlzLnJlcXVlc3QsXG5cdFx0XHRcdFx0XHRvcHRpb25zOiAodGhpcy5fb3B0aW9ucyBhcyB1bmtub3duKSBhcyBOb3JtYWxpemVkT3B0aW9ucyxcblx0XHRcdFx0XHRcdGVycm9yOiBlcnJvciBhcyBFcnJvcixcblx0XHRcdFx0XHRcdHJldHJ5Q291bnQ6IHRoaXMuX3JldHJ5Q291bnQsXG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvLyBJZiBgc3RvcGAgaXMgcmV0dXJuZWQgZnJvbSB0aGUgaG9vaywgdGhlIHJldHJ5IHByb2Nlc3MgaXMgc3RvcHBlZFxuXHRcdFx0XHRcdGlmIChob29rUmVzdWx0ID09PSBzdG9wKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHRoaXMuX3JldHJ5KGZuKTtcblx0XHRcdH1cblxuXHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0fVxuXHR9XG5cblx0cHJvdGVjdGVkIGFzeW5jIF9mZXRjaCgpOiBQcm9taXNlPFJlc3BvbnNlPiB7XG5cdFx0Zm9yIChjb25zdCBob29rIG9mIHRoaXMuX29wdGlvbnMuaG9va3MuYmVmb3JlUmVxdWVzdCkge1xuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWF3YWl0LWluLWxvb3Bcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhvb2sodGhpcy5yZXF1ZXN0LCAodGhpcy5fb3B0aW9ucyBhcyB1bmtub3duKSBhcyBOb3JtYWxpemVkT3B0aW9ucyk7XG5cblx0XHRcdGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSZXF1ZXN0KSB7XG5cdFx0XHRcdHRoaXMucmVxdWVzdCA9IHJlc3VsdDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSZXNwb25zZSkge1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICh0aGlzLl9vcHRpb25zLnRpbWVvdXQgPT09IGZhbHNlKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fb3B0aW9ucy5mZXRjaCh0aGlzLnJlcXVlc3QuY2xvbmUoKSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRpbWVvdXQodGhpcy5yZXF1ZXN0LmNsb25lKCksIHRoaXMuYWJvcnRDb250cm9sbGVyLCB0aGlzLl9vcHRpb25zIGFzIFRpbWVvdXRPcHRpb25zKTtcblx0fVxuXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdHByb3RlY3RlZCBfc3RyZWFtKHJlc3BvbnNlOiBSZXNwb25zZSwgb25Eb3dubG9hZFByb2dyZXNzOiBPcHRpb25zWydvbkRvd25sb2FkUHJvZ3Jlc3MnXSkge1xuXHRcdGNvbnN0IHRvdGFsQnl0ZXMgPSBOdW1iZXIocmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtbGVuZ3RoJykpIHx8IDA7XG5cdFx0bGV0IHRyYW5zZmVycmVkQnl0ZXMgPSAwO1xuXG5cdFx0aWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA0KSB7XG5cdFx0XHRpZiAob25Eb3dubG9hZFByb2dyZXNzKSB7XG5cdFx0XHRcdG9uRG93bmxvYWRQcm9ncmVzcyh7cGVyY2VudDogMSwgdG90YWxCeXRlcywgdHJhbnNmZXJyZWRCeXRlc30sIG5ldyBVaW50OEFycmF5KCkpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbmV3IGdsb2JhbFRoaXMuUmVzcG9uc2UoXG5cdFx0XHRcdG51bGwsXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcblx0XHRcdFx0XHRzdGF0dXNUZXh0OiByZXNwb25zZS5zdGF0dXNUZXh0LFxuXHRcdFx0XHRcdGhlYWRlcnM6IHJlc3BvbnNlLmhlYWRlcnMsXG5cdFx0XHRcdH0sXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdHJldHVybiBuZXcgZ2xvYmFsVGhpcy5SZXNwb25zZShcblx0XHRcdG5ldyBnbG9iYWxUaGlzLlJlYWRhYmxlU3RyZWFtKHtcblx0XHRcdFx0YXN5bmMgc3RhcnQoY29udHJvbGxlcikge1xuXHRcdFx0XHRcdGNvbnN0IHJlYWRlciA9IHJlc3BvbnNlLmJvZHkhLmdldFJlYWRlcigpO1xuXG5cdFx0XHRcdFx0aWYgKG9uRG93bmxvYWRQcm9ncmVzcykge1xuXHRcdFx0XHRcdFx0b25Eb3dubG9hZFByb2dyZXNzKHtwZXJjZW50OiAwLCB0cmFuc2ZlcnJlZEJ5dGVzOiAwLCB0b3RhbEJ5dGVzfSwgbmV3IFVpbnQ4QXJyYXkoKSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YXN5bmMgZnVuY3Rpb24gcmVhZCgpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHtkb25lLCB2YWx1ZX0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuXHRcdFx0XHRcdFx0aWYgKGRvbmUpIHtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChvbkRvd25sb2FkUHJvZ3Jlc3MpIHtcblx0XHRcdFx0XHRcdFx0dHJhbnNmZXJyZWRCeXRlcyArPSB2YWx1ZS5ieXRlTGVuZ3RoO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBwZXJjZW50ID0gdG90YWxCeXRlcyA9PT0gMCA/IDAgOiB0cmFuc2ZlcnJlZEJ5dGVzIC8gdG90YWxCeXRlcztcblx0XHRcdFx0XHRcdFx0b25Eb3dubG9hZFByb2dyZXNzKHtwZXJjZW50LCB0cmFuc2ZlcnJlZEJ5dGVzLCB0b3RhbEJ5dGVzfSwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyLmVucXVldWUodmFsdWUpO1xuXHRcdFx0XHRcdFx0YXdhaXQgcmVhZCgpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGF3YWl0IHJlYWQoKTtcblx0XHRcdFx0fSxcblx0XHRcdH0pLFxuXHRcdFx0e1xuXHRcdFx0XHRzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcblx0XHRcdFx0c3RhdHVzVGV4dDogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcblx0XHRcdFx0aGVhZGVyczogcmVzcG9uc2UuaGVhZGVycyxcblx0XHRcdH0sXG5cdFx0KTtcblx0fVxufVxuIiwiLy8gaHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy9kZWxheS90cmVlL2FiOThhZThkZmNiMzhlMTU5MzI4NmM5NGQ5MzRlNzBkMTRhNGUxMTFcblxuaW1wb3J0IHtjb21wb3NlQWJvcnRFcnJvcn0gZnJvbSAnLi4vZXJyb3JzL0RPTUV4Y2VwdGlvbi5qcyc7XG5pbXBvcnQge0ludGVybmFsT3B0aW9uc30gZnJvbSAnLi4vdHlwZXMvb3B0aW9ucy5qcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVsYXlPcHRpb25zIHtcblx0c2lnbmFsPzogSW50ZXJuYWxPcHRpb25zWydzaWduYWwnXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gZGVsYXkoXG5cdG1zOiBudW1iZXIsXG5cdHtzaWduYWx9OiBEZWxheU9wdGlvbnMsXG4pOiBQcm9taXNlPHZvaWQ+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRpZiAoc2lnbmFsKSB7XG5cdFx0XHRpZiAoc2lnbmFsLmFib3J0ZWQpIHtcblx0XHRcdFx0cmVqZWN0KGNvbXBvc2VBYm9ydEVycm9yKHNpZ25hbCkpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGhhbmRsZUFib3J0LCB7b25jZTogdHJ1ZX0pO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGhhbmRsZUFib3J0KCkge1xuXHRcdFx0cmVqZWN0KGNvbXBvc2VBYm9ydEVycm9yKHNpZ25hbCEpKTtcblx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0c2lnbmFsPy5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGhhbmRsZUFib3J0KTtcblx0XHRcdHJlc29sdmUoKTtcblx0XHR9LCBtcyk7XG5cdH0pO1xufVxuIiwiaW1wb3J0IHtUaW1lb3V0RXJyb3J9IGZyb20gJy4uL2Vycm9ycy9UaW1lb3V0RXJyb3IuanMnO1xuXG5leHBvcnQgdHlwZSBUaW1lb3V0T3B0aW9ucyA9IHtcblx0dGltZW91dDogbnVtYmVyO1xuXHRmZXRjaDogdHlwZW9mIGZldGNoO1xufTtcblxuLy8gYFByb21pc2UucmFjZSgpYCB3b3JrYXJvdW5kICgjOTEpXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiB0aW1lb3V0KFxuXHRyZXF1ZXN0OiBSZXF1ZXN0LFxuXHRhYm9ydENvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlciB8IHVuZGVmaW5lZCxcblx0b3B0aW9uczogVGltZW91dE9wdGlvbnMsXG4pOiBQcm9taXNlPFJlc3BvbnNlPiB7XG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0Y29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRpZiAoYWJvcnRDb250cm9sbGVyKSB7XG5cdFx0XHRcdGFib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZWplY3QobmV3IFRpbWVvdXRFcnJvcihyZXF1ZXN0KSk7XG5cdFx0fSwgb3B0aW9ucy50aW1lb3V0KTtcblxuXHRcdHZvaWQgb3B0aW9uc1xuXHRcdFx0LmZldGNoKHJlcXVlc3QpXG5cdFx0XHQudGhlbihyZXNvbHZlKVxuXHRcdFx0LmNhdGNoKHJlamVjdClcblx0XHRcdC50aGVuKCgpID0+IHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG5cdFx0XHR9KTtcblx0fSk7XG59XG4iLCIvKiEgTUlUIExpY2Vuc2UgwqkgU2luZHJlIFNvcmh1cyAqL1xuXG5pbXBvcnQge0t5fSBmcm9tICcuL2NvcmUvS3kuanMnO1xuaW1wb3J0IHtyZXF1ZXN0TWV0aG9kcywgc3RvcH0gZnJvbSAnLi9jb3JlL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgdHlwZSB7S3lJbnN0YW5jZX0gZnJvbSAnLi90eXBlcy9reS5qcyc7XG5pbXBvcnQgdHlwZSB7SW5wdXQsIE9wdGlvbnN9IGZyb20gJy4vdHlwZXMvb3B0aW9ucy5qcyc7XG5pbXBvcnQge3ZhbGlkYXRlQW5kTWVyZ2V9IGZyb20gJy4vdXRpbHMvbWVyZ2UuanMnO1xuaW1wb3J0IHtNdXRhYmxlfSBmcm9tICcuL3V0aWxzL3R5cGVzLmpzJztcblxuY29uc3QgY3JlYXRlSW5zdGFuY2UgPSAoZGVmYXVsdHM/OiBQYXJ0aWFsPE9wdGlvbnM+KTogS3lJbnN0YW5jZSA9PiB7XG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcHJvbWlzZS1mdW5jdGlvbi1hc3luY1xuXHRjb25zdCBreTogUGFydGlhbDxNdXRhYmxlPEt5SW5zdGFuY2U+PiA9IChpbnB1dDogSW5wdXQsIG9wdGlvbnM/OiBPcHRpb25zKSA9PiBLeS5jcmVhdGUoaW5wdXQsIHZhbGlkYXRlQW5kTWVyZ2UoZGVmYXVsdHMsIG9wdGlvbnMpKTtcblxuXHRmb3IgKGNvbnN0IG1ldGhvZCBvZiByZXF1ZXN0TWV0aG9kcykge1xuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcHJvbWlzZS1mdW5jdGlvbi1hc3luY1xuXHRcdGt5W21ldGhvZF0gPSAoaW5wdXQ6IElucHV0LCBvcHRpb25zPzogT3B0aW9ucykgPT4gS3kuY3JlYXRlKGlucHV0LCB2YWxpZGF0ZUFuZE1lcmdlKGRlZmF1bHRzLCBvcHRpb25zLCB7bWV0aG9kfSkpO1xuXHR9XG5cblx0a3kuY3JlYXRlID0gKG5ld0RlZmF1bHRzPzogUGFydGlhbDxPcHRpb25zPikgPT4gY3JlYXRlSW5zdGFuY2UodmFsaWRhdGVBbmRNZXJnZShuZXdEZWZhdWx0cykpO1xuXHRreS5leHRlbmQgPSAobmV3RGVmYXVsdHM/OiBQYXJ0aWFsPE9wdGlvbnM+KSA9PiBjcmVhdGVJbnN0YW5jZSh2YWxpZGF0ZUFuZE1lcmdlKGRlZmF1bHRzLCBuZXdEZWZhdWx0cykpO1xuXHRreS5zdG9wID0gc3RvcDtcblxuXHRyZXR1cm4ga3kgYXMgS3lJbnN0YW5jZTtcbn07XG5cbmNvbnN0IGt5ID0gY3JlYXRlSW5zdGFuY2UoKTtcblxuZXhwb3J0IGRlZmF1bHQga3k7XG5cbmV4cG9ydCB0eXBlIHtcblx0T3B0aW9ucyxcblx0Tm9ybWFsaXplZE9wdGlvbnMsXG5cdFJldHJ5T3B0aW9ucyxcblx0U2VhcmNoUGFyYW1zT3B0aW9uLFxuXHREb3dubG9hZFByb2dyZXNzLFxufSBmcm9tICcuL3R5cGVzL29wdGlvbnMuanMnO1xuXG5leHBvcnQgdHlwZSB7XG5cdEhvb2tzLFxuXHRCZWZvcmVSZXF1ZXN0SG9vayxcblx0QmVmb3JlUmV0cnlIb29rLFxuXHRCZWZvcmVSZXRyeVN0YXRlLFxuXHRCZWZvcmVFcnJvckhvb2ssXG5cdEFmdGVyUmVzcG9uc2VIb29rLFxufSBmcm9tICcuL3R5cGVzL2hvb2tzLmpzJztcblxuZXhwb3J0IHR5cGUge1Jlc3BvbnNlUHJvbWlzZX0gZnJvbSAnLi90eXBlcy9SZXNwb25zZVByb21pc2UuanMnO1xuZXhwb3J0IHR5cGUge0t5UmVzcG9uc2V9IGZyb20gJy4vdHlwZXMvcmVzcG9uc2UuanMnO1xuZXhwb3J0IHtIVFRQRXJyb3J9IGZyb20gJy4vZXJyb3JzL0hUVFBFcnJvci5qcyc7XG5leHBvcnQge1RpbWVvdXRFcnJvcn0gZnJvbSAnLi9lcnJvcnMvVGltZW91dEVycm9yLmpzJztcbiJdLCJuYW1lcyI6WyJIVFRQRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwicmVzcG9uc2UiLCJyZXF1ZXN0Iiwib3B0aW9ucyIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJ0cmltIiwic3VwZXIiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInRoaXMiLCJuYW1lIiwiVGltZW91dEVycm9yIiwiaXNPYmplY3QiLCJ2YWx1ZSIsInZhbGlkYXRlQW5kTWVyZ2UiLCJzb3VyY2VzIiwic291cmNlIiwiQXJyYXkiLCJpc0FycmF5IiwiVHlwZUVycm9yIiwiZGVlcE1lcmdlIiwibWVyZ2VIZWFkZXJzIiwic291cmNlMSIsInNvdXJjZTIiLCJyZXN1bHQiLCJnbG9iYWxUaGlzIiwiSGVhZGVycyIsImlzSGVhZGVyc0luc3RhbmNlIiwia2V5IiwiZW50cmllcyIsInVuZGVmaW5lZCIsImRlbGV0ZSIsInNldCIsInJldHVyblZhbHVlIiwiaGVhZGVycyIsInN1cHBvcnRzUmVxdWVzdFN0cmVhbXMiLCJkdXBsZXhBY2Nlc3NlZCIsImhhc0NvbnRlbnRUeXBlIiwic3VwcG9ydHNSZWFkYWJsZVN0cmVhbSIsIlJlYWRhYmxlU3RyZWFtIiwic3VwcG9ydHNSZXF1ZXN0IiwiUmVxdWVzdCIsImJvZHkiLCJtZXRob2QiLCJkdXBsZXgiLCJoYXMiLCJzdXBwb3J0c0Fib3J0Q29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInN1cHBvcnRzUmVzcG9uc2VTdHJlYW1zIiwic3VwcG9ydHNGb3JtRGF0YSIsIkZvcm1EYXRhIiwicmVxdWVzdE1ldGhvZHMiLCJyZXNwb25zZVR5cGVzIiwianNvbiIsInRleHQiLCJmb3JtRGF0YSIsImFycmF5QnVmZmVyIiwiYmxvYiIsIm1heFNhZmVUaW1lb3V0Iiwic3RvcCIsIlN5bWJvbCIsIm5vcm1hbGl6ZVJlcXVlc3RNZXRob2QiLCJpbnB1dCIsImluY2x1ZGVzIiwidG9VcHBlckNhc2UiLCJyZXRyeUFmdGVyU3RhdHVzQ29kZXMiLCJkZWZhdWx0UmV0cnlPcHRpb25zIiwibGltaXQiLCJtZXRob2RzIiwic3RhdHVzQ29kZXMiLCJhZnRlclN0YXR1c0NvZGVzIiwibWF4UmV0cnlBZnRlciIsIk51bWJlciIsIlBPU0lUSVZFX0lORklOSVRZIiwiYmFja29mZkxpbWl0Iiwibm9ybWFsaXplUmV0cnlPcHRpb25zIiwicmV0cnkiLCJpc0RvbUV4Y2VwdGlvblN1cHBvcnRlZCIsIkJvb2xlYW4iLCJET01FeGNlcHRpb24iLCJjb21wb3NlQWJvcnRFcnJvciIsInNpZ25hbCIsInJlYXNvbiIsImVycm9yIiwiS3kiLCJzdGF0aWMiLCJreSIsImZuIiwiYXN5bmMiLCJfb3B0aW9ucyIsInRpbWVvdXQiLCJSYW5nZUVycm9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJfZmV0Y2giLCJob29rIiwiaG9va3MiLCJhZnRlclJlc3BvbnNlIiwibW9kaWZpZWRSZXNwb25zZSIsIl9kZWNvcmF0ZVJlc3BvbnNlIiwiY2xvbmUiLCJSZXNwb25zZSIsIm9rIiwidGhyb3dIdHRwRXJyb3JzIiwiYmVmb3JlRXJyb3IiLCJvbkRvd25sb2FkUHJvZ3Jlc3MiLCJfc3RyZWFtIiwidG9Mb3dlckNhc2UiLCJfcmV0cnkiLCJ0eXBlIiwibWltZVR5cGUiLCJnZXQiLCJieXRlTGVuZ3RoIiwicGFyc2VKc29uIiwiX2lucHV0IiwiY3JlZGVudGlhbHMiLCJiZWZvcmVSZXF1ZXN0IiwiYmVmb3JlUmV0cnkiLCJwcmVmaXhVcmwiLCJTdHJpbmciLCJmZXRjaCIsImJpbmQiLCJVUkwiLCJzdGFydHNXaXRoIiwiZW5kc1dpdGgiLCJhYm9ydENvbnRyb2xsZXIiLCJvcmlnaW5hbFNpZ25hbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhYm9ydCIsInNlYXJjaFBhcmFtcyIsInJlcGxhY2UiLCJVUkxTZWFyY2hQYXJhbXMiLCJ0b1N0cmluZyIsInVybCIsIkpTT04iLCJzdHJpbmdpZnkiLCJfY2FsY3VsYXRlUmV0cnlEZWxheSIsIl9yZXRyeUNvdW50IiwicmV0cnlBZnRlciIsImFmdGVyIiwiaXNOYU4iLCJEYXRlIiwicGFyc2UiLCJub3ciLCJCQUNLT0ZGX0ZBQ1RPUiIsIk1hdGgiLCJtaW4iLCJtcyIsInJlamVjdCIsImFib3J0ZWQiLCJoYW5kbGVBYm9ydCIsIm9uY2UiLCJjbGVhclRpbWVvdXQiLCJ0aW1lb3V0SWQiLCJzZXRUaW1lb3V0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRlbGF5IiwicmV0cnlDb3VudCIsInRoZW4iLCJjYXRjaCIsInRvdGFsQnl0ZXMiLCJ0cmFuc2ZlcnJlZEJ5dGVzIiwicGVyY2VudCIsIlVpbnQ4QXJyYXkiLCJjb250cm9sbGVyIiwicmVhZGVyIiwiZ2V0UmVhZGVyIiwicmVhZCIsImRvbmUiLCJjbG9zZSIsImVucXVldWUiLCJjcmVhdGVJbnN0YW5jZSIsImRlZmF1bHRzIiwiY3JlYXRlIiwibmV3RGVmYXVsdHMiLCJleHRlbmQiXSwic291cmNlUm9vdCI6IiJ9