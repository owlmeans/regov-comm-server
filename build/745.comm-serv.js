/*! For license information please see 745.comm-serv.js.LICENSE.txt */
"use strict";exports.id=745,exports.ids=[745],exports.modules={745:(t,e,r)=>{r.d(e,{HTTPError:()=>s,TimeoutError:()=>o,default:()=>x});class s extends Error{constructor(t,e,r){const s=`${t.status||0===t.status?t.status:""} ${t.statusText||""}`.trim();super("Request failed with "+(s?`status code ${s}`:"an unknown error")),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=t,this.request=e,this.options=r}}class o extends Error{constructor(t){super("Request timed out"),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=t}}const n=t=>null!==t&&"object"==typeof t,i=(...t)=>{for(const e of t)if((!n(e)||Array.isArray(e))&&void 0!==e)throw new TypeError("The `options` argument must be an object");return u({},...t)},a=(t={},e={})=>{const r=new globalThis.Headers(t),s=e instanceof globalThis.Headers,o=new globalThis.Headers(e);for(const[t,e]of o.entries())s&&"undefined"===e||void 0===e?r.delete(t):r.set(t,e);return r},u=(...t)=>{let e={},r={};for(const s of t)if(Array.isArray(s))Array.isArray(e)||(e=[]),e=[...e,...s];else if(n(s)){for(let[t,r]of Object.entries(s))n(r)&&t in e&&(r=u(e[t],r)),e={...e,[t]:r};n(s.headers)&&(r=a(r,s.headers),e.headers=r)}return e},h=(()=>{let t=!1,e=!1;const r="function"==typeof globalThis.ReadableStream,s="function"==typeof globalThis.Request;return r&&s&&(e=new globalThis.Request("https://a.com",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type")),t&&!e})(),l="function"==typeof globalThis.AbortController,p="function"==typeof globalThis.ReadableStream,c="function"==typeof globalThis.FormData,f=["get","post","put","patch","head","delete"],d={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},b=2147483647,y=Symbol("stop"),m=t=>f.includes(t)?t.toUpperCase():t,_=[413,429,503],w={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:_,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY},g=(t={})=>{if("number"==typeof t)return{...w,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...w,...t,afterStatusCodes:_}},T=Boolean(globalThis.DOMException);function R(t){if(T)return new DOMException(t?.reason??"The operation was aborted.","AbortError");const e=new Error(t?.reason??"The operation was aborted.");return e.name="AbortError",e}class q{static create(t,e){const r=new q(t,e),o=async()=>{if(r._options.timeout>b)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();let t=await r._fetch();for(const e of r._options.hooks.afterResponse){const s=await e(r.request,r._options,r._decorateResponse(t.clone()));s instanceof globalThis.Response&&(t=s)}if(r._decorateResponse(t),!t.ok&&r._options.throwHttpErrors){let e=new s(t,r.request,r._options);for(const t of r._options.hooks.beforeError)e=await t(e);throw e}if(r._options.onDownloadProgress){if("function"!=typeof r._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!p)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return r._stream(t.clone(),r._options.onDownloadProgress)}return t},n=r._options.retry.methods.includes(r.request.method.toLowerCase())?r._retry(o):o();for(const[t,s]of Object.entries(d))n[t]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||s);const o=(await n).clone();if("json"===t){if(204===o.status)return"";if(0===(await o.clone().arrayBuffer()).byteLength)return"";if(e.parseJson)return e.parseJson(await o.text())}return o[t]()};return n}constructor(t,e={}){if(Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=t,this._options={credentials:this._input.credentials||"same-origin",...e,headers:a(this._input.headers,e.headers),hooks:u({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},e.hooks),method:m(e.method??this._input.method),prefixUrl:String(e.prefixUrl||""),retry:g(e.retry),throwHttpErrors:!1!==e.throwHttpErrors,timeout:void 0===e.timeout?1e4:e.timeout,fetch:e.fetch??globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(l){if(this.abortController=new globalThis.AbortController,this._options.signal){const t=this._options.signal;this._options.signal.addEventListener("abort",(()=>{this.abortController.abort(t.reason)}))}this._options.signal=this.abortController.signal}if(h&&(this._options.duplex="half"),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const t="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),e=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,t);!(c&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(e,{...this.request}),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",this._options.headers.get("content-type")??"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(t instanceof o)){if(t instanceof s){if(!this._options.retry.statusCodes.includes(t.response.status))return 0;const e=t.response.headers.get("Retry-After");if(e&&this._options.retry.afterStatusCodes.includes(t.response.status)){let t=Number(e);return Number.isNaN(t)?t=Date.parse(e)-Date.now():t*=1e3,void 0!==this._options.retry.maxRetryAfter&&t>this._options.retry.maxRetryAfter?0:t}if(413===t.response.status)return 0}const e=.3;return Math.min(this._options.retry.backoffLimit,e*2**(this._retryCount-1)*1e3)}return 0}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const r=Math.min(this._calculateRetryDelay(e),b);if(0!==r&&this._retryCount>0){await async function(t,{signal:e}){return new Promise(((r,s)=>{if(e){if(e.aborted)return void s(R(e));e.addEventListener("abort",o,{once:!0})}function o(){s(R(e)),clearTimeout(n)}const n=setTimeout((()=>{e?.removeEventListener("abort",o),r()}),t)}))}(r,{signal:this._options.signal});for(const t of this._options.hooks.beforeRetry)if(await t({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===y)return;return this._retry(t)}throw e}}async _fetch(){for(const t of this._options.hooks.beforeRequest){const e=await t(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}return!1===this._options.timeout?this._options.fetch(this.request.clone()):async function(t,e,r){return new Promise(((s,n)=>{const i=setTimeout((()=>{e&&e.abort(),n(new o(t))}),r.timeout);r.fetch(t).then(s).catch(n).then((()=>{clearTimeout(i)}))}))}(this.request.clone(),this.abortController,this._options)}_stream(t,e){const r=Number(t.headers.get("content-length"))||0;let s=0;return 204===t.status?(e&&e({percent:1,totalBytes:r,transferredBytes:s},new Uint8Array),new globalThis.Response(null,{status:t.status,statusText:t.statusText,headers:t.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(o){const n=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array),await async function t(){const{done:i,value:a}=await n.read();i?o.close():(e&&(s+=a.byteLength,e({percent:0===r?0:s/r,transferredBytes:s,totalBytes:r},a)),o.enqueue(a),await t())}()}}),{status:t.status,statusText:t.statusText,headers:t.headers})}}const v=t=>{const e=(e,r)=>q.create(e,i(t,r));for(const r of f)e[r]=(e,s)=>q.create(e,i(t,s,{method:r}));return e.create=t=>v(i(t)),e.extend=e=>v(i(t,e)),e.stop=y,e},x=v()}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzQ1LmNvbW0tc2Vydi5qcyIsIm1hcHBpbmdzIjoiO3VJQUdNLE1BQU9BLFVBQWtCQyxNQUs5QkMsV0FBQUEsQ0FBWUMsRUFBb0JDLEVBQWtCQyxHQUNqRCxNQUVNQyxFQUFTLEdBRkRILEVBQVNHLFFBQThCLElBQXBCSCxFQUFTRyxPQUFnQkgsRUFBU0csT0FBUyxNQUM5REgsRUFBU0ksWUFBYyxLQUNIQyxPQUdsQ0MsTUFBTSx3QkFGU0gsRUFBUyxlQUFlQSxJQUFXLHFCQVJuREksT0FBQUMsZUFBQSwwRUFDQUQsT0FBQUMsZUFBQSx5RUFDQUQsT0FBQUMsZUFBQSx5RUFVQ0MsS0FBS0MsS0FBTyxZQUNaRCxLQUFLVCxTQUFXQSxFQUNoQlMsS0FBS1IsUUFBVUEsRUFDZlEsS0FBS1AsUUFBVUEsQ0FDaEIsRUNwQkssTUFBT1MsVUFBcUJiLE1BR2pDQyxXQUFBQSxDQUFZRSxHQUNYSyxNQUFNLHFCQUhQQyxPQUFBQyxlQUFBLHlFQUlDQyxLQUFLQyxLQUFPLGVBQ1pELEtBQUtSLFFBQVVBLENBQ2hCLEVDTk0sTUFBTVcsRUFBWUMsR0FBOEMsT0FBVkEsR0FBbUMsaUJBQVZBLEVDRXpFQyxFQUFtQkEsSUFBSUMsS0FDbkMsSUFBSyxNQUFNQyxLQUFVRCxFQUNwQixLQUFNSCxFQUFTSSxJQUFXQyxNQUFNQyxRQUFRRixVQUE4QixJQUFYQSxFQUMxRCxNQUFNLElBQUlHLFVBQVUsNENBSXRCLE9BQU9DLEVBQVUsQ0FBQyxLQUFNTCxFQUFRLEVBR3BCTSxFQUFlQSxDQUFDQyxFQUF5QixDQUFDLEVBQUdDLEVBQXlCLENBQUMsS0FDbkYsTUFBTUMsRUFBUyxJQUFJQyxXQUFXQyxRQUFRSixHQUNoQ0ssRUFBb0JKLGFBQW1CRSxXQUFXQyxRQUNsRFYsRUFBUyxJQUFJUyxXQUFXQyxRQUFRSCxHQUV0QyxJQUFLLE1BQU9LLEVBQUtmLEtBQVVHLEVBQU9hLFVBQzVCRixHQUErQixjQUFWZCxRQUFvQ2lCLElBQVZqQixFQUNuRFcsRUFBT08sT0FBT0gsR0FFZEosRUFBT1EsSUFBSUosRUFBS2YsR0FJbEIsT0FBT1csQ0FBTSxFQUlESixFQUFZQSxJQUFPTCxLQUMvQixJQUFJa0IsRUFBbUIsQ0FBQyxFQUNwQkMsRUFBVSxDQUFDLEVBRWYsSUFBSyxNQUFNbEIsS0FBVUQsRUFDcEIsR0FBSUUsTUFBTUMsUUFBUUYsR0FDWkMsTUFBTUMsUUFBUWUsS0FDbEJBLEVBQWMsSUFHZkEsRUFBYyxJQUFJQSxLQUFnQmpCLFFBQzVCLEdBQUlKLEVBQVNJLEdBQVMsQ0FDNUIsSUFBSyxJQUFLWSxFQUFLZixLQUFVTixPQUFPc0IsUUFBUWIsR0FDbkNKLEVBQVNDLElBQVVlLEtBQU9LLElBQzdCcEIsRUFBUU8sRUFBVWEsRUFBWUwsR0FBTWYsSUFHckNvQixFQUFjLElBQUlBLEVBQWEsQ0FBQ0wsR0FBTWYsR0FHbkNELEVBQVVJLEVBQWVrQixXQUM1QkEsRUFBVWIsRUFBYWEsRUFBVWxCLEVBQWVrQixTQUNoREQsRUFBWUMsUUFBVUEsR0FLekIsT0FBT0QsQ0FBVyxFQ3RETkUsRUFBeUIsTUFDckMsSUFBSUMsR0FBaUIsRUFDakJDLEdBQWlCLEVBQ3JCLE1BQU1DLEVBQThELG1CQUE5QmIsV0FBV2MsZUFDM0NDLEVBQWdELG1CQUF2QmYsV0FBV2dCLFFBYzFDLE9BWklILEdBQTBCRSxJQUM3QkgsRUFBaUIsSUFBSVosV0FBV2dCLFFBQVEsZ0JBQWlCLENBQ3hEQyxLQUFNLElBQUlqQixXQUFXYyxlQUNyQkksT0FBUSxPQUVSLFVBQUlDLEdBRUgsT0FEQVIsR0FBaUIsRUFDVixNQUNSLElBQ0VGLFFBQVFXLElBQUksaUJBR1RULElBQW1CQyxDQUMxQixFQW5CcUMsR0FxQnpCUyxFQUFnRSxtQkFBL0JyQixXQUFXc0IsZ0JBQzVDQyxFQUErRCxtQkFBOUJ2QixXQUFXYyxlQUM1Q1UsRUFBa0QsbUJBQXhCeEIsV0FBV3lCLFNBRXJDQyxFQUFpQixDQUFDLE1BQU8sT0FBUSxNQUFPLFFBQVMsT0FBUSxVQU96REMsRUFBZ0IsQ0FDNUJDLEtBQU0sbUJBQ05DLEtBQU0sU0FDTkMsU0FBVSxzQkFDVkMsWUFBYSxNQUNiQyxLQUFNLE9BSU1DLEVBQWlCLFdBRWpCQyxFQUFPQyxPQUFPLFFDMUNkQyxFQUEwQkMsR0FDdENYLEVBQWVZLFNBQVNELEdBQXVCQSxFQUFNRSxjQUFnQkYsRUFNaEVHLEVBQXdCLENBQUMsSUFBSyxJQUFLLEtBRW5DQyxFQUE4QyxDQUNuREMsTUFBTyxFQUNQQyxRQVJvQixDQUFDLE1BQU8sTUFBTyxPQUFRLFNBQVUsVUFBVyxTQVNoRUMsWUFQd0IsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQVF2REMsaUJBQWtCTCxFQUNsQk0sY0FBZUMsT0FBT0Msa0JBQ3RCQyxhQUFjRixPQUFPQyxtQkFHVEUsRUFBd0JBLENBQUNDLEVBQStCLENBQUMsS0FDckUsR0FBcUIsaUJBQVZBLEVBQ1YsTUFBTyxJQUNIVixFQUNIQyxNQUFPUyxHQUlULEdBQUlBLEVBQU1SLFVBQVluRCxNQUFNQyxRQUFRMEQsRUFBTVIsU0FDekMsTUFBTSxJQUFJdEUsTUFBTSxrQ0FHakIsR0FBSThFLEVBQU1QLGNBQWdCcEQsTUFBTUMsUUFBUTBELEVBQU1QLGFBQzdDLE1BQU0sSUFBSXZFLE1BQU0sc0NBR2pCLE1BQU8sSUFDSG9FLEtBQ0FVLEVBQ0hOLGlCQUFrQkwsRUFDbEIsRUN4Q0lZLEVBQTBCQyxRQUFRckQsV0FBV3NELGNBRzdDLFNBQVVDLEVBQWtCQyxHQUtqQyxHQUFJSixFQUNILE9BQU8sSUFBSUUsYUFBYUUsR0FBUUMsUUFBVSw2QkFBOEIsY0FJekUsTUFBTUMsRUFBUSxJQUFJckYsTUFBTW1GLEdBQVFDLFFBQVUsOEJBRzFDLE9BRkFDLEVBQU16RSxLQUFPLGFBRU55RSxDQUNSLENDQ00sTUFBT0MsRUFFWixhQUFPQyxDQUFPdkIsRUFBYzVELEdBQzNCLE1BQU1vRixFQUFLLElBQUlGLEVBQUd0QixFQUFPNUQsR0FFbkJxRixFQUFLQyxVQUNWLEdBQUlGLEVBQUdHLFNBQVNDLFFBQVVoQyxFQUN6QixNQUFNLElBQUlpQyxXQUFXLGdFQUloQkMsUUFBUUMsVUFDZCxJQUFJN0YsUUFBaUJzRixFQUFHUSxTQUV4QixJQUFLLE1BQU1DLEtBQVFULEVBQUdHLFNBQVNPLE1BQU1DLGNBQWUsQ0FFbkQsTUFBTUMsUUFBeUJILEVBQzlCVCxFQUFHckYsUUFDSHFGLEVBQUdHLFNBQ0hILEVBQUdhLGtCQUFrQm5HLEVBQVNvRyxVQUczQkYsYUFBNEJ6RSxXQUFXNEUsV0FDMUNyRyxFQUFXa0csR0FNYixHQUZBWixFQUFHYSxrQkFBa0JuRyxJQUVoQkEsRUFBU3NHLElBQU1oQixFQUFHRyxTQUFTYyxnQkFBaUIsQ0FDaEQsSUFBSXBCLEVBQVEsSUFBSXRGLEVBQVVHLEVBQVVzRixFQUFHckYsUUFBVXFGLEVBQUdHLFVBRXBELElBQUssTUFBTU0sS0FBUVQsRUFBR0csU0FBU08sTUFBTVEsWUFFcENyQixRQUFjWSxFQUFLWixHQUdwQixNQUFNQSxFQUtQLEdBQUlHLEVBQUdHLFNBQVNnQixtQkFBb0IsQ0FDbkMsR0FBOEMsbUJBQW5DbkIsRUFBR0csU0FBU2dCLG1CQUN0QixNQUFNLElBQUl0RixVQUFVLHNEQUdyQixJQUFLNkIsRUFDSixNQUFNLElBQUlsRCxNQUFNLCtFQUdqQixPQUFPd0YsRUFBR29CLFFBQVExRyxFQUFTb0csUUFBU2QsRUFBR0csU0FBU2dCLG9CQUdqRCxPQUFPekcsQ0FBUSxFQUlWd0IsRUFEb0I4RCxFQUFHRyxTQUFTYixNQUFNUixRQUFRTCxTQUFTdUIsRUFBR3JGLFFBQVEwQyxPQUFPZ0UsZUFDM0NyQixFQUFHc0IsT0FBT3JCLEdBQU1BLElBRXBELElBQUssTUFBT3NCLEVBQU1DLEtBQWF2RyxPQUFPc0IsUUFBUXVCLEdBQzdDNUIsRUFBT3FGLEdBQVFyQixVQUVkRixFQUFHckYsUUFBUWlDLFFBQVFGLElBQUksU0FBVXNELEVBQUdyRixRQUFRaUMsUUFBUTZFLElBQUksV0FBYUQsR0FFckUsTUFDTTlHLFNBRHNCd0IsR0FDRzRFLFFBRS9CLEdBQWEsU0FBVFMsRUFBaUIsQ0FDcEIsR0FBd0IsTUFBcEI3RyxFQUFTRyxPQUNaLE1BQU8sR0FLUixHQUFxQixXQUZLSCxFQUFTb0csUUFBUTVDLGVBQ1Z3RCxXQUVoQyxNQUFPLEdBR1IsR0FBSTlHLEVBQVErRyxVQUNYLE9BQU8vRyxFQUFRK0csZ0JBQWdCakgsRUFBU3NELFFBSTFDLE9BQU90RCxFQUFTNkcsSUFBTyxFQUl6QixPQUFPckYsQ0FDUixDQVNBekIsV0FBQUEsQ0FBWStELEVBQWM1RCxFQUFtQixDQUFDLEdBeUI3QyxHQWhDREssT0FBQUMsZUFBQSx5RUFDQUQsT0FBQUMsZUFBQSxpRkFDQUQsT0FBQUMsZUFBQSxvRUFBd0IsSUFDeEJELE9BQUFDLGVBQUEsd0VBQ0FELE9BQUFDLGVBQUEsMEVBSUNDLEtBQUt5RyxPQUFTcEQsRUFDZHJELEtBQUtnRixTQUFXLENBRWYwQixZQUFjMUcsS0FBS3lHLE9BQW1CQyxhQUFlLGlCQUNsRGpILEVBQ0hnQyxRQUFTYixFQUFjWixLQUFLeUcsT0FBbUJoRixRQUFTaEMsRUFBUWdDLFNBQ2hFOEQsTUFBTzVFLEVBQ04sQ0FDQ2dHLGNBQWUsR0FDZkMsWUFBYSxHQUNiYixZQUFhLEdBQ2JQLGNBQWUsSUFFaEIvRixFQUFROEYsT0FFVHJELE9BQVFrQixFQUF1QjNELEVBQVF5QyxRQUFXbEMsS0FBS3lHLE9BQW1CdkUsUUFFMUUyRSxVQUFXQyxPQUFPckgsRUFBUW9ILFdBQWEsSUFDdkMxQyxNQUFPRCxFQUFzQnpFLEVBQVEwRSxPQUNyQzJCLGlCQUE2QyxJQUE1QnJHLEVBQVFxRyxnQkFDekJiLGFBQW9DLElBQXBCeEYsRUFBUXdGLFFBQTBCLElBQVN4RixFQUFRd0YsUUFDbkU4QixNQUFPdEgsRUFBUXNILE9BQVMvRixXQUFXK0YsTUFBTUMsS0FBS2hHLGFBR3BCLGlCQUFoQmhCLEtBQUt5RyxVQUF5QnpHLEtBQUt5RyxrQkFBa0JRLEtBQU9qSCxLQUFLeUcsa0JBQWtCekYsV0FBV2dCLFNBQ3hHLE1BQU0sSUFBSXRCLFVBQVUsNkNBR3JCLEdBQUlWLEtBQUtnRixTQUFTNkIsV0FBb0MsaUJBQWhCN0csS0FBS3lHLE9BQXFCLENBQy9ELEdBQUl6RyxLQUFLeUcsT0FBT1MsV0FBVyxLQUMxQixNQUFNLElBQUk3SCxNQUFNLDhEQUdaVyxLQUFLZ0YsU0FBUzZCLFVBQVVNLFNBQVMsT0FDckNuSCxLQUFLZ0YsU0FBUzZCLFdBQWEsS0FHNUI3RyxLQUFLeUcsT0FBU3pHLEtBQUtnRixTQUFTNkIsVUFBWTdHLEtBQUt5RyxPQUc5QyxHQUFJcEUsRUFBeUIsQ0FFNUIsR0FEQXJDLEtBQUtvSCxnQkFBa0IsSUFBSXBHLFdBQVdzQixnQkFDbEN0QyxLQUFLZ0YsU0FBU1IsT0FBUSxDQUN6QixNQUFNNkMsRUFBaUJySCxLQUFLZ0YsU0FBU1IsT0FFckN4RSxLQUFLZ0YsU0FBU1IsT0FBTzhDLGlCQUFpQixTQUFTLEtBQzlDdEgsS0FBS29ILGdCQUFpQkcsTUFBTUYsRUFBZTVDLE9BQU8sSUFJcER6RSxLQUFLZ0YsU0FBU1IsT0FBU3hFLEtBQUtvSCxnQkFBZ0I1QyxPQVU3QyxHQVBJOUMsSUFFSDFCLEtBQUtnRixTQUFTN0MsT0FBUyxRQUd4Qm5DLEtBQUtSLFFBQVUsSUFBSXdCLFdBQVdnQixRQUFRaEMsS0FBS3lHLE9BQXVCekcsS0FBS2dGLFVBRW5FaEYsS0FBS2dGLFNBQVN3QyxhQUFjLENBRS9CLE1BSU1BLEVBQWUsS0FKMEMsaUJBQS9CeEgsS0FBS2dGLFNBQVN3QyxhQUMzQ3hILEtBQUtnRixTQUFTd0MsYUFBYUMsUUFBUSxNQUFPLElBQzFDLElBQUlDLGdCQUFnQjFILEtBQUtnRixTQUFTd0MsY0FBNkNHLFlBRzVFQyxFQUFNNUgsS0FBS1IsUUFBUW9JLElBQUlILFFBQVEsb0JBQXFCRCxLQUl2RGhGLEdBQW9CeEMsS0FBS2dGLFNBQVMvQyxnQkFBZ0JqQixXQUFXeUIsVUFDM0R6QyxLQUFLZ0YsU0FBUy9DLGdCQUFnQnlGLGtCQUFzQjFILEtBQUtnRixTQUFTdkQsU0FBWXpCLEtBQUtnRixTQUFTdkQsUUFBbUMsaUJBRW5JekIsS0FBS1IsUUFBUWlDLFFBQVFILE9BQU8sZ0JBSTdCdEIsS0FBS1IsUUFBVSxJQUFJd0IsV0FBV2dCLFFBQVEsSUFBSWhCLFdBQVdnQixRQUFRNEYsRUFBSyxJQUFJNUgsS0FBS1IsVUFBV1EsS0FBS2dGLGVBR2pFM0QsSUFBdkJyQixLQUFLZ0YsU0FBU3BDLE9BQ2pCNUMsS0FBS2dGLFNBQVMvQyxLQUFPNEYsS0FBS0MsVUFBVTlILEtBQUtnRixTQUFTcEMsTUFDbEQ1QyxLQUFLUixRQUFRaUMsUUFBUUYsSUFBSSxlQUFnQnZCLEtBQUtnRixTQUFTdkQsUUFBUTZFLElBQUksaUJBQW1CLG9CQUN0RnRHLEtBQUtSLFFBQVUsSUFBSXdCLFdBQVdnQixRQUFRaEMsS0FBS1IsUUFBUyxDQUFDeUMsS0FBTWpDLEtBQUtnRixTQUFTL0MsT0FFM0UsQ0FFVThGLG9CQUFBQSxDQUFxQnJELEdBRzlCLEdBRkExRSxLQUFLZ0ksY0FFRGhJLEtBQUtnSSxZQUFjaEksS0FBS2dGLFNBQVNiLE1BQU1ULFNBQVdnQixhQUFpQnhFLEdBQWUsQ0FDckYsR0FBSXdFLGFBQWlCdEYsRUFBVyxDQUMvQixJQUFLWSxLQUFLZ0YsU0FBU2IsTUFBTVAsWUFBWU4sU0FBU29CLEVBQU1uRixTQUFTRyxRQUM1RCxPQUFPLEVBR1IsTUFBTXVJLEVBQWF2RCxFQUFNbkYsU0FBU2tDLFFBQVE2RSxJQUFJLGVBQzlDLEdBQUkyQixHQUFjakksS0FBS2dGLFNBQVNiLE1BQU1OLGlCQUFpQlAsU0FBU29CLEVBQU1uRixTQUFTRyxRQUFTLENBQ3ZGLElBQUl3SSxFQUFRbkUsT0FBT2tFLEdBT25CLE9BTklsRSxPQUFPb0UsTUFBTUQsR0FDaEJBLEVBQVFFLEtBQUtDLE1BQU1KLEdBQWNHLEtBQUtFLE1BRXRDSixHQUFTLFNBR3VDLElBQXRDbEksS0FBS2dGLFNBQVNiLE1BQU1MLGVBQWlDb0UsRUFBUWxJLEtBQUtnRixTQUFTYixNQUFNTCxjQUNwRixFQUdEb0UsRUFHUixHQUE4QixNQUExQnhELEVBQU1uRixTQUFTRyxPQUNsQixPQUFPLEVBSVQsTUFBTTZJLEVBQWlCLEdBQ3ZCLE9BQU9DLEtBQUtDLElBQUl6SSxLQUFLZ0YsU0FBU2IsTUFBTUYsYUFBY3NFLEVBQWtCLElBQU12SSxLQUFLZ0ksWUFBYyxHQUFNLEtBR3BHLE9BQU8sQ0FDUixDQUVVdEMsaUJBQUFBLENBQWtCbkcsR0FLM0IsT0FKSVMsS0FBS2dGLFNBQVN3QixZQUNqQmpILEVBQVNxRCxLQUFPbUMsU0FBWS9FLEtBQUtnRixTQUFTd0IsZ0JBQWlCakgsRUFBU3NELFNBRzlEdEQsQ0FDUixDQUVVLFlBQU00RyxDQUFpRHJCLEdBQ2hFLElBQ0MsYUFBYUEsSUFFWixNQUFPSixHQUNSLE1BQU1nRSxFQUFLRixLQUFLQyxJQUFJekksS0FBSytILHFCQUFxQnJELEdBQVF6QixHQUN0RCxHQUFXLElBQVB5RixHQUFZMUksS0FBS2dJLFlBQWMsRUFBRyxPQ3pQMUJqRCxlQUNkMkQsR0FDQSxPQUFDbEUsSUFFRCxPQUFPLElBQUlXLFNBQVEsQ0FBQ0MsRUFBU3VELEtBQzVCLEdBQUluRSxFQUFRLENBQ1gsR0FBSUEsRUFBT29FLFFBRVYsWUFEQUQsRUFBT3BFLEVBQWtCQyxJQUkxQkEsRUFBTzhDLGlCQUFpQixRQUFTdUIsRUFBYSxDQUFDQyxNQUFNLElBR3RELFNBQVNELElBQ1JGLEVBQU9wRSxFQUFrQkMsSUFDekJ1RSxhQUFhQyxFQUNkLENBRUEsTUFBTUEsRUFBWUMsWUFBVyxLQUM1QnpFLEdBQVEwRSxvQkFBb0IsUUFBU0wsR0FDckN6RCxHQUFTLEdBQ1BzRCxFQUFHLEdBRVIsQ0RrT1VTLENBQU1ULEVBQUksQ0FBQ2xFLE9BQVF4RSxLQUFLZ0YsU0FBU1IsU0FFdkMsSUFBSyxNQUFNYyxLQUFRdEYsS0FBS2dGLFNBQVNPLE1BQU1xQixZQVV0QyxTQVJ5QnRCLEVBQUssQ0FDN0I5RixRQUFTUSxLQUFLUixRQUNkQyxRQUFVTyxLQUFLZ0YsU0FDZk4sTUFBT0EsRUFDUDBFLFdBQVlwSixLQUFLZ0ksZ0JBSUM5RSxFQUNsQixPQUlGLE9BQU9sRCxLQUFLbUcsT0FBT3JCLEdBR3BCLE1BQU1KLEVBRVIsQ0FFVSxZQUFNVyxHQUNmLElBQUssTUFBTUMsS0FBUXRGLEtBQUtnRixTQUFTTyxNQUFNb0IsY0FBZSxDQUVyRCxNQUFNNUYsUUFBZXVFLEVBQUt0RixLQUFLUixRQUFVUSxLQUFLZ0YsVUFFOUMsR0FBSWpFLGFBQWtCaUIsUUFBUyxDQUM5QmhDLEtBQUtSLFFBQVV1QixFQUNmLE1BR0QsR0FBSUEsYUFBa0I2RSxTQUNyQixPQUFPN0UsRUFJVCxPQUE4QixJQUExQmYsS0FBS2dGLFNBQVNDLFFBQ1ZqRixLQUFLZ0YsU0FBUytCLE1BQU0vRyxLQUFLUixRQUFRbUcsU0VuUzVCWixlQUNkdkYsRUFDQTRILEVBQ0EzSCxHQUVBLE9BQU8sSUFBSTBGLFNBQVEsQ0FBQ0MsRUFBU3VELEtBQzVCLE1BQU1LLEVBQVlDLFlBQVcsS0FDeEI3QixHQUNIQSxFQUFnQkcsUUFHakJvQixFQUFPLElBQUl6SSxFQUFhVixHQUFTLEdBQy9CQyxFQUFRd0YsU0FFTnhGLEVBQ0hzSCxNQUFNdkgsR0FDTjZKLEtBQUtqRSxHQUNMa0UsTUFBTVgsR0FDTlUsTUFBSyxLQUNMTixhQUFhQyxFQUFVLEdBQ3RCLEdBRUwsQ0ZnUlMvRCxDQUFRakYsS0FBS1IsUUFBUW1HLFFBQVMzRixLQUFLb0gsZ0JBQWlCcEgsS0FBS2dGLFNBQ2pFLENBR1VpQixPQUFBQSxDQUFRMUcsRUFBb0J5RyxHQUNyQyxNQUFNdUQsRUFBYXhGLE9BQU94RSxFQUFTa0MsUUFBUTZFLElBQUksb0JBQXNCLEVBQ3JFLElBQUlrRCxFQUFtQixFQUV2QixPQUF3QixNQUFwQmpLLEVBQVNHLFFBQ1JzRyxHQUNIQSxFQUFtQixDQUFDeUQsUUFBUyxFQUFHRixhQUFZQyxvQkFBbUIsSUFBSUUsWUFHN0QsSUFBSTFJLFdBQVc0RSxTQUNyQixLQUNBLENBQ0NsRyxPQUFRSCxFQUFTRyxPQUNqQkMsV0FBWUosRUFBU0ksV0FDckI4QixRQUFTbEMsRUFBU2tDLFdBS2QsSUFBSVQsV0FBVzRFLFNBQ3JCLElBQUk1RSxXQUFXYyxlQUFlLENBQzdCLFdBQU02SCxDQUFNQyxHQUNYLE1BQU1DLEVBQVN0SyxFQUFTMEMsS0FBTTZILFlBRTFCOUQsR0FDSEEsRUFBbUIsQ0FBQ3lELFFBQVMsRUFBR0QsaUJBQWtCLEVBQUdELGNBQWEsSUFBSUcsa0JBR3ZFM0UsZUFBZWdGLElBQ2QsTUFBTSxLQUFDQyxFQUFJLE1BQUU1SixTQUFleUosRUFBT0UsT0FDL0JDLEVBQ0hKLEVBQVdLLFNBSVJqRSxJQUNId0QsR0FBb0JwSixFQUFNbUcsV0FFMUJQLEVBQW1CLENBQUN5RCxRQURXLElBQWZGLEVBQW1CLEVBQUlDLEVBQW1CRCxFQUM3QkMsbUJBQWtCRCxjQUFhbkosSUFHN0R3SixFQUFXTSxRQUFROUosU0FDYjJKLElBQ1AsQ0FFTUEsRUFDUCxJQUVELENBQ0NySyxPQUFRSCxFQUFTRyxPQUNqQkMsV0FBWUosRUFBU0ksV0FDckI4QixRQUFTbEMsRUFBU2tDLFNBR3JCLEVHL1ZELE1BQU0wSSxFQUFrQkMsSUFFdkIsTUFBTXZGLEVBQW1DQSxDQUFDeEIsRUFBYzVELElBQXNCa0YsRUFBR0MsT0FBT3ZCLEVBQU9oRCxFQUFpQitKLEVBQVUzSyxJQUUxSCxJQUFLLE1BQU15QyxLQUFVUSxFQUVwQm1DLEVBQUczQyxHQUFVLENBQUNtQixFQUFjNUQsSUFBc0JrRixFQUFHQyxPQUFPdkIsRUFBT2hELEVBQWlCK0osRUFBVTNLLEVBQVMsQ0FBQ3lDLFlBT3pHLE9BSkEyQyxFQUFHRCxPQUFVeUYsR0FBbUNGLEVBQWU5SixFQUFpQmdLLElBQ2hGeEYsRUFBR3lGLE9BQVVELEdBQW1DRixFQUFlOUosRUFBaUIrSixFQUFVQyxJQUMxRnhGLEVBQUczQixLQUFPQSxFQUVIMkIsQ0FBZ0IsRUFLeEIsRUFGV3NGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQG93bG1lYW5zL3JlZ292LWNvbW0tc2VydmVyLy4uLy4uL3NvdXJjZS9lcnJvcnMvSFRUUEVycm9yLnRzIiwid2VicGFjazovL0Bvd2xtZWFucy9yZWdvdi1jb21tLXNlcnZlci8uLi8uLi9zb3VyY2UvZXJyb3JzL1RpbWVvdXRFcnJvci50cyIsIndlYnBhY2s6Ly9Ab3dsbWVhbnMvcmVnb3YtY29tbS1zZXJ2ZXIvLi4vLi4vc291cmNlL3V0aWxzL2lzLnRzIiwid2VicGFjazovL0Bvd2xtZWFucy9yZWdvdi1jb21tLXNlcnZlci8uLi8uLi9zb3VyY2UvdXRpbHMvbWVyZ2UudHMiLCJ3ZWJwYWNrOi8vQG93bG1lYW5zL3JlZ292LWNvbW0tc2VydmVyLy4uLy4uL3NvdXJjZS9jb3JlL2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly9Ab3dsbWVhbnMvcmVnb3YtY29tbS1zZXJ2ZXIvLi4vLi4vc291cmNlL3V0aWxzL25vcm1hbGl6ZS50cyIsIndlYnBhY2s6Ly9Ab3dsbWVhbnMvcmVnb3YtY29tbS1zZXJ2ZXIvLi4vLi4vc291cmNlL2Vycm9ycy9ET01FeGNlcHRpb24udHMiLCJ3ZWJwYWNrOi8vQG93bG1lYW5zL3JlZ292LWNvbW0tc2VydmVyLy4uLy4uL3NvdXJjZS9jb3JlL0t5LnRzIiwid2VicGFjazovL0Bvd2xtZWFucy9yZWdvdi1jb21tLXNlcnZlci8uLi8uLi9zb3VyY2UvdXRpbHMvZGVsYXkudHMiLCJ3ZWJwYWNrOi8vQG93bG1lYW5zL3JlZ292LWNvbW0tc2VydmVyLy4uLy4uL3NvdXJjZS91dGlscy90aW1lb3V0LnRzIiwid2VicGFjazovL0Bvd2xtZWFucy9yZWdvdi1jb21tLXNlcnZlci8uLi9zb3VyY2UvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUge05vcm1hbGl6ZWRPcHRpb25zfSBmcm9tICcuLi90eXBlcy9vcHRpb25zLmpzJztcblxuLy8gZXNsaW50LWxpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5leHBvcnQgY2xhc3MgSFRUUEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuXHRwdWJsaWMgcmVzcG9uc2U6IFJlc3BvbnNlO1xuXHRwdWJsaWMgcmVxdWVzdDogUmVxdWVzdDtcblx0cHVibGljIG9wdGlvbnM6IE5vcm1hbGl6ZWRPcHRpb25zO1xuXG5cdGNvbnN0cnVjdG9yKHJlc3BvbnNlOiBSZXNwb25zZSwgcmVxdWVzdDogUmVxdWVzdCwgb3B0aW9uczogTm9ybWFsaXplZE9wdGlvbnMpIHtcblx0XHRjb25zdCBjb2RlID0gKHJlc3BvbnNlLnN0YXR1cyB8fCByZXNwb25zZS5zdGF0dXMgPT09IDApID8gcmVzcG9uc2Uuc3RhdHVzIDogJyc7XG5cdFx0Y29uc3QgdGl0bGUgPSByZXNwb25zZS5zdGF0dXNUZXh0IHx8ICcnO1xuXHRcdGNvbnN0IHN0YXR1cyA9IGAke2NvZGV9ICR7dGl0bGV9YC50cmltKCk7XG5cdFx0Y29uc3QgcmVhc29uID0gc3RhdHVzID8gYHN0YXR1cyBjb2RlICR7c3RhdHVzfWAgOiAnYW4gdW5rbm93biBlcnJvcic7XG5cblx0XHRzdXBlcihgUmVxdWVzdCBmYWlsZWQgd2l0aCAke3JlYXNvbn1gKTtcblxuXHRcdHRoaXMubmFtZSA9ICdIVFRQRXJyb3InO1xuXHRcdHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcblx0XHR0aGlzLnJlcXVlc3QgPSByZXF1ZXN0O1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdH1cbn1cbiIsImV4cG9ydCBjbGFzcyBUaW1lb3V0RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG5cdHB1YmxpYyByZXF1ZXN0OiBSZXF1ZXN0O1xuXG5cdGNvbnN0cnVjdG9yKHJlcXVlc3Q6IFJlcXVlc3QpIHtcblx0XHRzdXBlcignUmVxdWVzdCB0aW1lZCBvdXQnKTtcblx0XHR0aGlzLm5hbWUgPSAnVGltZW91dEVycm9yJztcblx0XHR0aGlzLnJlcXVlc3QgPSByZXF1ZXN0O1xuXHR9XG59XG4iLCIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuZXhwb3J0IGNvbnN0IGlzT2JqZWN0ID0gKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgb2JqZWN0ID0+IHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCc7XG4iLCJpbXBvcnQgdHlwZSB7S3lIZWFkZXJzSW5pdCwgT3B0aW9uc30gZnJvbSAnLi4vdHlwZXMvb3B0aW9ucy5qcyc7XG5pbXBvcnQge2lzT2JqZWN0fSBmcm9tICcuL2lzLmpzJztcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlQW5kTWVyZ2UgPSAoLi4uc291cmNlczogQXJyYXk8UGFydGlhbDxPcHRpb25zPiB8IHVuZGVmaW5lZD4pOiBQYXJ0aWFsPE9wdGlvbnM+ID0+IHtcblx0Zm9yIChjb25zdCBzb3VyY2Ugb2Ygc291cmNlcykge1xuXHRcdGlmICgoIWlzT2JqZWN0KHNvdXJjZSkgfHwgQXJyYXkuaXNBcnJheShzb3VyY2UpKSAmJiB0eXBlb2Ygc291cmNlICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGBvcHRpb25zYCBhcmd1bWVudCBtdXN0IGJlIGFuIG9iamVjdCcpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBkZWVwTWVyZ2Uoe30sIC4uLnNvdXJjZXMpO1xufTtcblxuZXhwb3J0IGNvbnN0IG1lcmdlSGVhZGVycyA9IChzb3VyY2UxOiBLeUhlYWRlcnNJbml0ID0ge30sIHNvdXJjZTI6IEt5SGVhZGVyc0luaXQgPSB7fSkgPT4ge1xuXHRjb25zdCByZXN1bHQgPSBuZXcgZ2xvYmFsVGhpcy5IZWFkZXJzKHNvdXJjZTEgYXMgSGVhZGVyc0luaXQpO1xuXHRjb25zdCBpc0hlYWRlcnNJbnN0YW5jZSA9IHNvdXJjZTIgaW5zdGFuY2VvZiBnbG9iYWxUaGlzLkhlYWRlcnM7XG5cdGNvbnN0IHNvdXJjZSA9IG5ldyBnbG9iYWxUaGlzLkhlYWRlcnMoc291cmNlMiBhcyBIZWFkZXJzSW5pdCk7XG5cblx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2Ygc291cmNlLmVudHJpZXMoKSkge1xuXHRcdGlmICgoaXNIZWFkZXJzSW5zdGFuY2UgJiYgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXN1bHQuZGVsZXRlKGtleSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdC5zZXQoa2V5LCB2YWx1ZSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cbi8vIFRPRE86IE1ha2UgdGhpcyBzdHJvbmdseS10eXBlZCAobm8gYGFueWApLlxuZXhwb3J0IGNvbnN0IGRlZXBNZXJnZSA9IDxUPiguLi5zb3VyY2VzOiBBcnJheTxQYXJ0aWFsPFQ+IHwgdW5kZWZpbmVkPik6IFQgPT4ge1xuXHRsZXQgcmV0dXJuVmFsdWU6IGFueSA9IHt9O1xuXHRsZXQgaGVhZGVycyA9IHt9O1xuXG5cdGZvciAoY29uc3Qgc291cmNlIG9mIHNvdXJjZXMpIHtcblx0XHRpZiAoQXJyYXkuaXNBcnJheShzb3VyY2UpKSB7XG5cdFx0XHRpZiAoIUFycmF5LmlzQXJyYXkocmV0dXJuVmFsdWUpKSB7XG5cdFx0XHRcdHJldHVyblZhbHVlID0gW107XG5cdFx0XHR9XG5cblx0XHRcdHJldHVyblZhbHVlID0gWy4uLnJldHVyblZhbHVlLCAuLi5zb3VyY2VdO1xuXHRcdH0gZWxzZSBpZiAoaXNPYmplY3Qoc291cmNlKSkge1xuXHRcdFx0Zm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNvdXJjZSkpIHtcblx0XHRcdFx0aWYgKGlzT2JqZWN0KHZhbHVlKSAmJiBrZXkgaW4gcmV0dXJuVmFsdWUpIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGRlZXBNZXJnZShyZXR1cm5WYWx1ZVtrZXldLCB2YWx1ZSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm5WYWx1ZSA9IHsuLi5yZXR1cm5WYWx1ZSwgW2tleV06IHZhbHVlfTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGlzT2JqZWN0KChzb3VyY2UgYXMgYW55KS5oZWFkZXJzKSkge1xuXHRcdFx0XHRoZWFkZXJzID0gbWVyZ2VIZWFkZXJzKGhlYWRlcnMsIChzb3VyY2UgYXMgYW55KS5oZWFkZXJzKTtcblx0XHRcdFx0cmV0dXJuVmFsdWUuaGVhZGVycyA9IGhlYWRlcnM7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJldHVyblZhbHVlO1xufTtcbiIsImltcG9ydCB0eXBlIHtFeHBlY3QsIEVxdWFsfSBmcm9tICdAdHlwZS1jaGFsbGVuZ2VzL3V0aWxzJztcbmltcG9ydCB7SHR0cE1ldGhvZH0gZnJvbSAnLi4vdHlwZXMvb3B0aW9ucy5qcyc7XG5cbmV4cG9ydCBjb25zdCBzdXBwb3J0c1JlcXVlc3RTdHJlYW1zID0gKCgpID0+IHtcblx0bGV0IGR1cGxleEFjY2Vzc2VkID0gZmFsc2U7XG5cdGxldCBoYXNDb250ZW50VHlwZSA9IGZhbHNlO1xuXHRjb25zdCBzdXBwb3J0c1JlYWRhYmxlU3RyZWFtID0gdHlwZW9mIGdsb2JhbFRoaXMuUmVhZGFibGVTdHJlYW0gPT09ICdmdW5jdGlvbic7XG5cdGNvbnN0IHN1cHBvcnRzUmVxdWVzdCA9IHR5cGVvZiBnbG9iYWxUaGlzLlJlcXVlc3QgPT09ICdmdW5jdGlvbic7XG5cblx0aWYgKHN1cHBvcnRzUmVhZGFibGVTdHJlYW0gJiYgc3VwcG9ydHNSZXF1ZXN0KSB7XG5cdFx0aGFzQ29udGVudFR5cGUgPSBuZXcgZ2xvYmFsVGhpcy5SZXF1ZXN0KCdodHRwczovL2EuY29tJywge1xuXHRcdFx0Ym9keTogbmV3IGdsb2JhbFRoaXMuUmVhZGFibGVTdHJlYW0oKSxcblx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0Ly8gQHRzLWV4cGVjdC1lcnJvciAtIFR5cGVzIGFyZSBvdXRkYXRlZC5cblx0XHRcdGdldCBkdXBsZXgoKSB7XG5cdFx0XHRcdGR1cGxleEFjY2Vzc2VkID0gdHJ1ZTtcblx0XHRcdFx0cmV0dXJuICdoYWxmJztcblx0XHRcdH0sXG5cdFx0fSkuaGVhZGVycy5oYXMoJ0NvbnRlbnQtVHlwZScpO1xuXHR9XG5cblx0cmV0dXJuIGR1cGxleEFjY2Vzc2VkICYmICFoYXNDb250ZW50VHlwZTtcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBzdXBwb3J0c0Fib3J0Q29udHJvbGxlciA9IHR5cGVvZiBnbG9iYWxUaGlzLkFib3J0Q29udHJvbGxlciA9PT0gJ2Z1bmN0aW9uJztcbmV4cG9ydCBjb25zdCBzdXBwb3J0c1Jlc3BvbnNlU3RyZWFtcyA9IHR5cGVvZiBnbG9iYWxUaGlzLlJlYWRhYmxlU3RyZWFtID09PSAnZnVuY3Rpb24nO1xuZXhwb3J0IGNvbnN0IHN1cHBvcnRzRm9ybURhdGEgPSB0eXBlb2YgZ2xvYmFsVGhpcy5Gb3JtRGF0YSA9PT0gJ2Z1bmN0aW9uJztcblxuZXhwb3J0IGNvbnN0IHJlcXVlc3RNZXRob2RzID0gWydnZXQnLCAncG9zdCcsICdwdXQnLCAncGF0Y2gnLCAnaGVhZCcsICdkZWxldGUnXSBhcyBjb25zdDtcblxuY29uc3QgdmFsaWRhdGUgPSA8VCBleHRlbmRzIEFycmF5PHRydWU+PigpID0+IHVuZGVmaW5lZCBhcyB1bmtub3duIGFzIFQ7XG52YWxpZGF0ZTxbXG5cdEV4cGVjdDxFcXVhbDx0eXBlb2YgcmVxdWVzdE1ldGhvZHNbbnVtYmVyXSwgSHR0cE1ldGhvZD4+LFxuXT4oKTtcblxuZXhwb3J0IGNvbnN0IHJlc3BvbnNlVHlwZXMgPSB7XG5cdGpzb246ICdhcHBsaWNhdGlvbi9qc29uJyxcblx0dGV4dDogJ3RleHQvKicsXG5cdGZvcm1EYXRhOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScsXG5cdGFycmF5QnVmZmVyOiAnKi8qJyxcblx0YmxvYjogJyovKicsXG59IGFzIGNvbnN0O1xuXG4vLyBUaGUgbWF4aW11bSB2YWx1ZSBvZiBhIDMyYml0IGludCAoc2VlIGlzc3VlICMxMTcpXG5leHBvcnQgY29uc3QgbWF4U2FmZVRpbWVvdXQgPSAyXzE0N180ODNfNjQ3O1xuXG5leHBvcnQgY29uc3Qgc3RvcCA9IFN5bWJvbCgnc3RvcCcpO1xuIiwiaW1wb3J0IHtyZXF1ZXN0TWV0aG9kc30gZnJvbSAnLi4vY29yZS9jb25zdGFudHMuanMnO1xuaW1wb3J0IHR5cGUge0h0dHBNZXRob2R9IGZyb20gJy4uL3R5cGVzL29wdGlvbnMuanMnO1xuaW1wb3J0IHR5cGUge1JldHJ5T3B0aW9uc30gZnJvbSAnLi4vdHlwZXMvcmV0cnkuanMnO1xuXG5leHBvcnQgY29uc3Qgbm9ybWFsaXplUmVxdWVzdE1ldGhvZCA9IChpbnB1dDogc3RyaW5nKTogc3RyaW5nID0+XG5cdHJlcXVlc3RNZXRob2RzLmluY2x1ZGVzKGlucHV0IGFzIEh0dHBNZXRob2QpID8gaW5wdXQudG9VcHBlckNhc2UoKSA6IGlucHV0O1xuXG5jb25zdCByZXRyeU1ldGhvZHMgPSBbJ2dldCcsICdwdXQnLCAnaGVhZCcsICdkZWxldGUnLCAnb3B0aW9ucycsICd0cmFjZSddO1xuXG5jb25zdCByZXRyeVN0YXR1c0NvZGVzID0gWzQwOCwgNDEzLCA0MjksIDUwMCwgNTAyLCA1MDMsIDUwNF07XG5cbmNvbnN0IHJldHJ5QWZ0ZXJTdGF0dXNDb2RlcyA9IFs0MTMsIDQyOSwgNTAzXTtcblxuY29uc3QgZGVmYXVsdFJldHJ5T3B0aW9uczogUmVxdWlyZWQ8UmV0cnlPcHRpb25zPiA9IHtcblx0bGltaXQ6IDIsXG5cdG1ldGhvZHM6IHJldHJ5TWV0aG9kcyxcblx0c3RhdHVzQ29kZXM6IHJldHJ5U3RhdHVzQ29kZXMsXG5cdGFmdGVyU3RhdHVzQ29kZXM6IHJldHJ5QWZ0ZXJTdGF0dXNDb2Rlcyxcblx0bWF4UmV0cnlBZnRlcjogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLFxuXHRiYWNrb2ZmTGltaXQ6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSxcbn07XG5cbmV4cG9ydCBjb25zdCBub3JtYWxpemVSZXRyeU9wdGlvbnMgPSAocmV0cnk6IG51bWJlciB8IFJldHJ5T3B0aW9ucyA9IHt9KTogUmVxdWlyZWQ8UmV0cnlPcHRpb25zPiA9PiB7XG5cdGlmICh0eXBlb2YgcmV0cnkgPT09ICdudW1iZXInKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLmRlZmF1bHRSZXRyeU9wdGlvbnMsXG5cdFx0XHRsaW1pdDogcmV0cnksXG5cdFx0fTtcblx0fVxuXG5cdGlmIChyZXRyeS5tZXRob2RzICYmICFBcnJheS5pc0FycmF5KHJldHJ5Lm1ldGhvZHMpKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdyZXRyeS5tZXRob2RzIG11c3QgYmUgYW4gYXJyYXknKTtcblx0fVxuXG5cdGlmIChyZXRyeS5zdGF0dXNDb2RlcyAmJiAhQXJyYXkuaXNBcnJheShyZXRyeS5zdGF0dXNDb2RlcykpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ3JldHJ5LnN0YXR1c0NvZGVzIG11c3QgYmUgYW4gYXJyYXknKTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0Li4uZGVmYXVsdFJldHJ5T3B0aW9ucyxcblx0XHQuLi5yZXRyeSxcblx0XHRhZnRlclN0YXR1c0NvZGVzOiByZXRyeUFmdGVyU3RhdHVzQ29kZXMsXG5cdH07XG59O1xuIiwiLy8gRE9NRXhjZXB0aW9uIGlzIHN1cHBvcnRlZCBvbiBtb3N0IG1vZGVybiBicm93c2VycyBhbmQgTm9kZS5qcyAxOCsuXG4vLyBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ET01FeGNlcHRpb24jYnJvd3Nlcl9jb21wYXRpYmlsaXR5XG5jb25zdCBpc0RvbUV4Y2VwdGlvblN1cHBvcnRlZCA9IEJvb2xlYW4oZ2xvYmFsVGhpcy5ET01FeGNlcHRpb24pO1xuXG4vLyBUT0RPOiBXaGVuIHRhcmdldGluZyBOb2RlLmpzIDE4LCB1c2UgYHNpZ25hbC50aHJvd0lmQWJvcnRlZCgpYCAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0Fib3J0U2lnbmFsL3Rocm93SWZBYm9ydGVkKVxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBvc2VBYm9ydEVycm9yKHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG5cdC8qXG5cdE5PVEU6IFVzZSBEb21FeGNlcHRpb24gd2l0aCBBYm9ydEVycm9yIG5hbWUgYXMgc3BlY2lmaWVkIGluIE1ETiBkb2NzIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQWJvcnRDb250cm9sbGVyL2Fib3J0KVxuXHQ+IFdoZW4gYWJvcnQoKSBpcyBjYWxsZWQsIHRoZSBmZXRjaCgpIHByb21pc2UgcmVqZWN0cyB3aXRoIGFuIEVycm9yIG9mIHR5cGUgRE9NRXhjZXB0aW9uLCB3aXRoIG5hbWUgQWJvcnRFcnJvci5cblx0Ki9cblx0aWYgKGlzRG9tRXhjZXB0aW9uU3VwcG9ydGVkKSB7XG5cdFx0cmV0dXJuIG5ldyBET01FeGNlcHRpb24oc2lnbmFsPy5yZWFzb24gPz8gJ1RoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQuJywgJ0Fib3J0RXJyb3InKTtcblx0fVxuXG5cdC8vIERPTUV4Y2VwdGlvbiBub3Qgc3VwcG9ydGVkLiBGYWxsIGJhY2sgdG8gdXNlIG9mIGVycm9yIGFuZCBvdmVycmlkZSBuYW1lLlxuXHRjb25zdCBlcnJvciA9IG5ldyBFcnJvcihzaWduYWw/LnJlYXNvbiA/PyAnVGhlIG9wZXJhdGlvbiB3YXMgYWJvcnRlZC4nKTtcblx0ZXJyb3IubmFtZSA9ICdBYm9ydEVycm9yJztcblxuXHRyZXR1cm4gZXJyb3I7XG59XG4iLCJpbXBvcnQge0hUVFBFcnJvcn0gZnJvbSAnLi4vZXJyb3JzL0hUVFBFcnJvci5qcyc7XG5pbXBvcnQge1RpbWVvdXRFcnJvcn0gZnJvbSAnLi4vZXJyb3JzL1RpbWVvdXRFcnJvci5qcyc7XG5pbXBvcnQgdHlwZSB7SG9va3N9IGZyb20gJy4uL3R5cGVzL2hvb2tzLmpzJztcbmltcG9ydCB0eXBlIHtJbnB1dCwgSW50ZXJuYWxPcHRpb25zLCBOb3JtYWxpemVkT3B0aW9ucywgT3B0aW9ucywgU2VhcmNoUGFyYW1zSW5pdH0gZnJvbSAnLi4vdHlwZXMvb3B0aW9ucy5qcyc7XG5pbXBvcnQge1Jlc3BvbnNlUHJvbWlzZX0gZnJvbSAnLi4vdHlwZXMvUmVzcG9uc2VQcm9taXNlLmpzJztcbmltcG9ydCB7ZGVlcE1lcmdlLCBtZXJnZUhlYWRlcnN9IGZyb20gJy4uL3V0aWxzL21lcmdlLmpzJztcbmltcG9ydCB7bm9ybWFsaXplUmVxdWVzdE1ldGhvZCwgbm9ybWFsaXplUmV0cnlPcHRpb25zfSBmcm9tICcuLi91dGlscy9ub3JtYWxpemUuanMnO1xuaW1wb3J0IHRpbWVvdXQsIHtUaW1lb3V0T3B0aW9uc30gZnJvbSAnLi4vdXRpbHMvdGltZW91dC5qcyc7XG5pbXBvcnQgZGVsYXkgZnJvbSAnLi4vdXRpbHMvZGVsYXkuanMnO1xuaW1wb3J0IHtPYmplY3RFbnRyaWVzfSBmcm9tICcuLi91dGlscy90eXBlcy5qcyc7XG5pbXBvcnQge1xuXHRtYXhTYWZlVGltZW91dCxcblx0cmVzcG9uc2VUeXBlcyxcblx0c3RvcCxcblx0c3VwcG9ydHNBYm9ydENvbnRyb2xsZXIsXG5cdHN1cHBvcnRzRm9ybURhdGEsXG5cdHN1cHBvcnRzUmVzcG9uc2VTdHJlYW1zLFxuXHRzdXBwb3J0c1JlcXVlc3RTdHJlYW1zLFxufSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5cbmV4cG9ydCBjbGFzcyBLeSB7XG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcHJvbWlzZS1mdW5jdGlvbi1hc3luY1xuXHRzdGF0aWMgY3JlYXRlKGlucHV0OiBJbnB1dCwgb3B0aW9uczogT3B0aW9ucyk6IFJlc3BvbnNlUHJvbWlzZSB7XG5cdFx0Y29uc3Qga3kgPSBuZXcgS3koaW5wdXQsIG9wdGlvbnMpO1xuXG5cdFx0Y29uc3QgZm4gPSBhc3luYyAoKTogUHJvbWlzZTxSZXNwb25zZT4gPT4ge1xuXHRcdFx0aWYgKGt5Ll9vcHRpb25zLnRpbWVvdXQgPiBtYXhTYWZlVGltZW91dCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgUmFuZ2VFcnJvcihgVGhlIFxcYHRpbWVvdXRcXGAgb3B0aW9uIGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gJHttYXhTYWZlVGltZW91dH1gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRGVsYXkgdGhlIGZldGNoIHNvIHRoYXQgYm9keSBtZXRob2Qgc2hvcnRjdXRzIGNhbiBzZXQgdGhlIEFjY2VwdCBoZWFkZXJcblx0XHRcdGF3YWl0IFByb21pc2UucmVzb2x2ZSgpO1xuXHRcdFx0bGV0IHJlc3BvbnNlID0gYXdhaXQga3kuX2ZldGNoKCk7XG5cblx0XHRcdGZvciAoY29uc3QgaG9vayBvZiBreS5fb3B0aW9ucy5ob29rcy5hZnRlclJlc3BvbnNlKSB7XG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hd2FpdC1pbi1sb29wXG5cdFx0XHRcdGNvbnN0IG1vZGlmaWVkUmVzcG9uc2UgPSBhd2FpdCBob29rKFxuXHRcdFx0XHRcdGt5LnJlcXVlc3QsXG5cdFx0XHRcdFx0a3kuX29wdGlvbnMgYXMgTm9ybWFsaXplZE9wdGlvbnMsXG5cdFx0XHRcdFx0a3kuX2RlY29yYXRlUmVzcG9uc2UocmVzcG9uc2UuY2xvbmUoKSksXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKG1vZGlmaWVkUmVzcG9uc2UgaW5zdGFuY2VvZiBnbG9iYWxUaGlzLlJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0cmVzcG9uc2UgPSBtb2RpZmllZFJlc3BvbnNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGt5Ll9kZWNvcmF0ZVJlc3BvbnNlKHJlc3BvbnNlKTtcblxuXHRcdFx0aWYgKCFyZXNwb25zZS5vayAmJiBreS5fb3B0aW9ucy50aHJvd0h0dHBFcnJvcnMpIHtcblx0XHRcdFx0bGV0IGVycm9yID0gbmV3IEhUVFBFcnJvcihyZXNwb25zZSwga3kucmVxdWVzdCwgKGt5Ll9vcHRpb25zIGFzIHVua25vd24pIGFzIE5vcm1hbGl6ZWRPcHRpb25zKTtcblxuXHRcdFx0XHRmb3IgKGNvbnN0IGhvb2sgb2Yga3kuX29wdGlvbnMuaG9va3MuYmVmb3JlRXJyb3IpIHtcblx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYXdhaXQtaW4tbG9vcFxuXHRcdFx0XHRcdGVycm9yID0gYXdhaXQgaG9vayhlcnJvcik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aHJvdyBlcnJvcjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgYG9uRG93bmxvYWRQcm9ncmVzc2AgaXMgcGFzc2VkLCBpdCB1c2VzIHRoZSBzdHJlYW0gQVBJIGludGVybmFsbHlcblx0XHRcdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdFx0XHRpZiAoa3kuX29wdGlvbnMub25Eb3dubG9hZFByb2dyZXNzKSB7XG5cdFx0XHRcdGlmICh0eXBlb2Yga3kuX29wdGlvbnMub25Eb3dubG9hZFByb2dyZXNzICE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGBvbkRvd25sb2FkUHJvZ3Jlc3NgIG9wdGlvbiBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghc3VwcG9ydHNSZXNwb25zZVN0cmVhbXMpIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1N0cmVhbXMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4geW91ciBlbnZpcm9ubWVudC4gYFJlYWRhYmxlU3RyZWFtYCBpcyBtaXNzaW5nLicpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGt5Ll9zdHJlYW0ocmVzcG9uc2UuY2xvbmUoKSwga3kuX29wdGlvbnMub25Eb3dubG9hZFByb2dyZXNzKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlO1xuXHRcdH07XG5cblx0XHRjb25zdCBpc1JldHJpYWJsZU1ldGhvZCA9IGt5Ll9vcHRpb25zLnJldHJ5Lm1ldGhvZHMuaW5jbHVkZXMoa3kucmVxdWVzdC5tZXRob2QudG9Mb3dlckNhc2UoKSk7XG5cdFx0Y29uc3QgcmVzdWx0ID0gKGlzUmV0cmlhYmxlTWV0aG9kID8ga3kuX3JldHJ5KGZuKSA6IGZuKCkpIGFzIFJlc3BvbnNlUHJvbWlzZTtcblxuXHRcdGZvciAoY29uc3QgW3R5cGUsIG1pbWVUeXBlXSBvZiBPYmplY3QuZW50cmllcyhyZXNwb25zZVR5cGVzKSBhcyBPYmplY3RFbnRyaWVzPHR5cGVvZiByZXNwb25zZVR5cGVzPikge1xuXHRcdFx0cmVzdWx0W3R5cGVdID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3ByZWZlci1udWxsaXNoLWNvYWxlc2Npbmdcblx0XHRcdFx0a3kucmVxdWVzdC5oZWFkZXJzLnNldCgnYWNjZXB0Jywga3kucmVxdWVzdC5oZWFkZXJzLmdldCgnYWNjZXB0JykgfHwgbWltZVR5cGUpO1xuXG5cdFx0XHRcdGNvbnN0IGF3YWl0ZWRSZXN1bHQgPSBhd2FpdCByZXN1bHQ7XG5cdFx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXRlZFJlc3VsdC5jbG9uZSgpO1xuXG5cdFx0XHRcdGlmICh0eXBlID09PSAnanNvbicpIHtcblx0XHRcdFx0XHRpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpIHtcblx0XHRcdFx0XHRcdHJldHVybiAnJztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IHJlc3BvbnNlLmNsb25lKCkuYXJyYXlCdWZmZXIoKTtcblx0XHRcdFx0XHRjb25zdCByZXNwb25zZVNpemUgPSBhcnJheUJ1ZmZlci5ieXRlTGVuZ3RoO1xuXHRcdFx0XHRcdGlmIChyZXNwb25zZVNpemUgPT09IDApIHtcblx0XHRcdFx0XHRcdHJldHVybiAnJztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAob3B0aW9ucy5wYXJzZUpzb24pIHtcblx0XHRcdFx0XHRcdHJldHVybiBvcHRpb25zLnBhcnNlSnNvbihhd2FpdCByZXNwb25zZS50ZXh0KCkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiByZXNwb25zZVt0eXBlXSgpO1xuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cblx0cHVibGljIHJlcXVlc3Q6IFJlcXVlc3Q7XG5cdHByb3RlY3RlZCBhYm9ydENvbnRyb2xsZXI/OiBBYm9ydENvbnRyb2xsZXI7XG5cdHByb3RlY3RlZCBfcmV0cnlDb3VudCA9IDA7XG5cdHByb3RlY3RlZCBfaW5wdXQ6IElucHV0O1xuXHRwcm90ZWN0ZWQgX29wdGlvbnM6IEludGVybmFsT3B0aW9ucztcblxuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuXHRjb25zdHJ1Y3RvcihpbnB1dDogSW5wdXQsIG9wdGlvbnM6IE9wdGlvbnMgPSB7fSkge1xuXHRcdHRoaXMuX2lucHV0ID0gaW5wdXQ7XG5cdFx0dGhpcy5fb3B0aW9ucyA9IHtcblx0XHRcdC8vIFRPRE86IGNyZWRlbnRpYWxzIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhlIHNwZWMgY2hhbmdlIGlzIGltcGxlbWVudGVkIGluIGFsbCBicm93c2Vycy4gQ29udGV4dDogaHR0cHM6Ly93d3cuY2hyb21lc3RhdHVzLmNvbS9mZWF0dXJlLzQ1Mzk0NzMzMTIzNTAyMDhcblx0XHRcdGNyZWRlbnRpYWxzOiAodGhpcy5faW5wdXQgYXMgUmVxdWVzdCkuY3JlZGVudGlhbHMgfHwgJ3NhbWUtb3JpZ2luJyxcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRoZWFkZXJzOiBtZXJnZUhlYWRlcnMoKHRoaXMuX2lucHV0IGFzIFJlcXVlc3QpLmhlYWRlcnMsIG9wdGlvbnMuaGVhZGVycyksXG5cdFx0XHRob29rczogZGVlcE1lcmdlPFJlcXVpcmVkPEhvb2tzPj4oXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRiZWZvcmVSZXF1ZXN0OiBbXSxcblx0XHRcdFx0XHRiZWZvcmVSZXRyeTogW10sXG5cdFx0XHRcdFx0YmVmb3JlRXJyb3I6IFtdLFxuXHRcdFx0XHRcdGFmdGVyUmVzcG9uc2U6IFtdLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRvcHRpb25zLmhvb2tzLFxuXHRcdFx0KSxcblx0XHRcdG1ldGhvZDogbm9ybWFsaXplUmVxdWVzdE1ldGhvZChvcHRpb25zLm1ldGhvZCA/PyAodGhpcy5faW5wdXQgYXMgUmVxdWVzdCkubWV0aG9kKSxcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcHJlZmVyLW51bGxpc2gtY29hbGVzY2luZ1xuXHRcdFx0cHJlZml4VXJsOiBTdHJpbmcob3B0aW9ucy5wcmVmaXhVcmwgfHwgJycpLFxuXHRcdFx0cmV0cnk6IG5vcm1hbGl6ZVJldHJ5T3B0aW9ucyhvcHRpb25zLnJldHJ5KSxcblx0XHRcdHRocm93SHR0cEVycm9yczogb3B0aW9ucy50aHJvd0h0dHBFcnJvcnMgIT09IGZhbHNlLFxuXHRcdFx0dGltZW91dDogdHlwZW9mIG9wdGlvbnMudGltZW91dCA9PT0gJ3VuZGVmaW5lZCcgPyAxMF8wMDAgOiBvcHRpb25zLnRpbWVvdXQsXG5cdFx0XHRmZXRjaDogb3B0aW9ucy5mZXRjaCA/PyBnbG9iYWxUaGlzLmZldGNoLmJpbmQoZ2xvYmFsVGhpcyksXG5cdFx0fTtcblxuXHRcdGlmICh0eXBlb2YgdGhpcy5faW5wdXQgIT09ICdzdHJpbmcnICYmICEodGhpcy5faW5wdXQgaW5zdGFuY2VvZiBVUkwgfHwgdGhpcy5faW5wdXQgaW5zdGFuY2VvZiBnbG9iYWxUaGlzLlJlcXVlc3QpKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdgaW5wdXRgIG11c3QgYmUgYSBzdHJpbmcsIFVSTCwgb3IgUmVxdWVzdCcpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLl9vcHRpb25zLnByZWZpeFVybCAmJiB0eXBlb2YgdGhpcy5faW5wdXQgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRpZiAodGhpcy5faW5wdXQuc3RhcnRzV2l0aCgnLycpKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignYGlucHV0YCBtdXN0IG5vdCBiZWdpbiB3aXRoIGEgc2xhc2ggd2hlbiB1c2luZyBgcHJlZml4VXJsYCcpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIXRoaXMuX29wdGlvbnMucHJlZml4VXJsLmVuZHNXaXRoKCcvJykpIHtcblx0XHRcdFx0dGhpcy5fb3B0aW9ucy5wcmVmaXhVcmwgKz0gJy8nO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9pbnB1dCA9IHRoaXMuX29wdGlvbnMucHJlZml4VXJsICsgdGhpcy5faW5wdXQ7XG5cdFx0fVxuXG5cdFx0aWYgKHN1cHBvcnRzQWJvcnRDb250cm9sbGVyKSB7XG5cdFx0XHR0aGlzLmFib3J0Q29udHJvbGxlciA9IG5ldyBnbG9iYWxUaGlzLkFib3J0Q29udHJvbGxlcigpO1xuXHRcdFx0aWYgKHRoaXMuX29wdGlvbnMuc2lnbmFsKSB7XG5cdFx0XHRcdGNvbnN0IG9yaWdpbmFsU2lnbmFsID0gdGhpcy5fb3B0aW9ucy5zaWduYWw7XG5cblx0XHRcdFx0dGhpcy5fb3B0aW9ucy5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5hYm9ydENvbnRyb2xsZXIhLmFib3J0KG9yaWdpbmFsU2lnbmFsLnJlYXNvbik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9vcHRpb25zLnNpZ25hbCA9IHRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbDtcblx0XHR9XG5cblx0XHRpZiAoc3VwcG9ydHNSZXF1ZXN0U3RyZWFtcykge1xuXHRcdFx0Ly8gQHRzLWV4cGVjdC1lcnJvciAtIFR5cGVzIGFyZSBvdXRkYXRlZC5cblx0XHRcdHRoaXMuX29wdGlvbnMuZHVwbGV4ID0gJ2hhbGYnO1xuXHRcdH1cblxuXHRcdHRoaXMucmVxdWVzdCA9IG5ldyBnbG9iYWxUaGlzLlJlcXVlc3QodGhpcy5faW5wdXQgYXMgUmVxdWVzdEluZm8sIHRoaXMuX29wdGlvbnMgYXMgUmVxdWVzdEluaXQpO1xuXG5cdFx0aWYgKHRoaXMuX29wdGlvbnMuc2VhcmNoUGFyYW1zKSB7XG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdW5pY29ybi9wcmV2ZW50LWFiYnJldmlhdGlvbnNcblx0XHRcdGNvbnN0IHRleHRTZWFyY2hQYXJhbXMgPSB0eXBlb2YgdGhpcy5fb3B0aW9ucy5zZWFyY2hQYXJhbXMgPT09ICdzdHJpbmcnXG5cdFx0XHRcdD8gdGhpcy5fb3B0aW9ucy5zZWFyY2hQYXJhbXMucmVwbGFjZSgvXlxcPy8sICcnKVxuXHRcdFx0XHQ6IG5ldyBVUkxTZWFyY2hQYXJhbXModGhpcy5fb3B0aW9ucy5zZWFyY2hQYXJhbXMgYXMgdW5rbm93biBhcyBTZWFyY2hQYXJhbXNJbml0KS50b1N0cmluZygpO1xuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHVuaWNvcm4vcHJldmVudC1hYmJyZXZpYXRpb25zXG5cdFx0XHRjb25zdCBzZWFyY2hQYXJhbXMgPSAnPycgKyB0ZXh0U2VhcmNoUGFyYW1zO1xuXHRcdFx0Y29uc3QgdXJsID0gdGhpcy5yZXF1ZXN0LnVybC5yZXBsYWNlKC8oPzpcXD8uKj8pPyg/PSN8JCkvLCBzZWFyY2hQYXJhbXMpO1xuXG5cdFx0XHQvLyBUbyBwcm92aWRlIGNvcnJlY3QgZm9ybSBib3VuZGFyeSwgQ29udGVudC1UeXBlIGhlYWRlciBzaG91bGQgYmUgZGVsZXRlZCBlYWNoIHRpbWUgd2hlbiBuZXcgUmVxdWVzdCBpbnN0YW50aWF0ZWQgZnJvbSBhbm90aGVyIG9uZVxuXHRcdFx0aWYgKFxuXHRcdFx0XHQoKHN1cHBvcnRzRm9ybURhdGEgJiYgdGhpcy5fb3B0aW9ucy5ib2R5IGluc3RhbmNlb2YgZ2xvYmFsVGhpcy5Gb3JtRGF0YSlcblx0XHRcdFx0XHR8fCB0aGlzLl9vcHRpb25zLmJvZHkgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXMpICYmICEodGhpcy5fb3B0aW9ucy5oZWFkZXJzICYmICh0aGlzLl9vcHRpb25zLmhlYWRlcnMgYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPilbJ2NvbnRlbnQtdHlwZSddKVxuXHRcdFx0KSB7XG5cdFx0XHRcdHRoaXMucmVxdWVzdC5oZWFkZXJzLmRlbGV0ZSgnY29udGVudC10eXBlJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRoZSBzcHJlYWQgb2YgYHRoaXMucmVxdWVzdGAgaXMgcmVxdWlyZWQgYXMgb3RoZXJ3aXNlIGl0IG1pc3NlcyB0aGUgYGR1cGxleGAgb3B0aW9uIGZvciBzb21lIHJlYXNvbiBhbmQgdGhyb3dzLlxuXHRcdFx0dGhpcy5yZXF1ZXN0ID0gbmV3IGdsb2JhbFRoaXMuUmVxdWVzdChuZXcgZ2xvYmFsVGhpcy5SZXF1ZXN0KHVybCwgey4uLnRoaXMucmVxdWVzdH0pLCB0aGlzLl9vcHRpb25zIGFzIFJlcXVlc3RJbml0KTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5fb3B0aW9ucy5qc29uICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdHRoaXMuX29wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuX29wdGlvbnMuanNvbik7XG5cdFx0XHR0aGlzLnJlcXVlc3QuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsIHRoaXMuX29wdGlvbnMuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpID8/ICdhcHBsaWNhdGlvbi9qc29uJyk7XG5cdFx0XHR0aGlzLnJlcXVlc3QgPSBuZXcgZ2xvYmFsVGhpcy5SZXF1ZXN0KHRoaXMucmVxdWVzdCwge2JvZHk6IHRoaXMuX29wdGlvbnMuYm9keX0pO1xuXHRcdH1cblx0fVxuXG5cdHByb3RlY3RlZCBfY2FsY3VsYXRlUmV0cnlEZWxheShlcnJvcjogdW5rbm93bikge1xuXHRcdHRoaXMuX3JldHJ5Q291bnQrKztcblxuXHRcdGlmICh0aGlzLl9yZXRyeUNvdW50IDwgdGhpcy5fb3B0aW9ucy5yZXRyeS5saW1pdCAmJiAhKGVycm9yIGluc3RhbmNlb2YgVGltZW91dEVycm9yKSkge1xuXHRcdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgSFRUUEVycm9yKSB7XG5cdFx0XHRcdGlmICghdGhpcy5fb3B0aW9ucy5yZXRyeS5zdGF0dXNDb2Rlcy5pbmNsdWRlcyhlcnJvci5yZXNwb25zZS5zdGF0dXMpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIDA7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCByZXRyeUFmdGVyID0gZXJyb3IucmVzcG9uc2UuaGVhZGVycy5nZXQoJ1JldHJ5LUFmdGVyJyk7XG5cdFx0XHRcdGlmIChyZXRyeUFmdGVyICYmIHRoaXMuX29wdGlvbnMucmV0cnkuYWZ0ZXJTdGF0dXNDb2Rlcy5pbmNsdWRlcyhlcnJvci5yZXNwb25zZS5zdGF0dXMpKSB7XG5cdFx0XHRcdFx0bGV0IGFmdGVyID0gTnVtYmVyKHJldHJ5QWZ0ZXIpO1xuXHRcdFx0XHRcdGlmIChOdW1iZXIuaXNOYU4oYWZ0ZXIpKSB7XG5cdFx0XHRcdFx0XHRhZnRlciA9IERhdGUucGFyc2UocmV0cnlBZnRlcikgLSBEYXRlLm5vdygpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRhZnRlciAqPSAxMDAwO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICh0eXBlb2YgdGhpcy5fb3B0aW9ucy5yZXRyeS5tYXhSZXRyeUFmdGVyICE9PSAndW5kZWZpbmVkJyAmJiBhZnRlciA+IHRoaXMuX29wdGlvbnMucmV0cnkubWF4UmV0cnlBZnRlcikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIDA7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIGFmdGVyO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEzKSB7XG5cdFx0XHRcdFx0cmV0dXJuIDA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgQkFDS09GRl9GQUNUT1IgPSAwLjM7XG5cdFx0XHRyZXR1cm4gTWF0aC5taW4odGhpcy5fb3B0aW9ucy5yZXRyeS5iYWNrb2ZmTGltaXQsIEJBQ0tPRkZfRkFDVE9SICogKDIgKiogKHRoaXMuX3JldHJ5Q291bnQgLSAxKSkgKiAxMDAwKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gMDtcblx0fVxuXG5cdHByb3RlY3RlZCBfZGVjb3JhdGVSZXNwb25zZShyZXNwb25zZTogUmVzcG9uc2UpOiBSZXNwb25zZSB7XG5cdFx0aWYgKHRoaXMuX29wdGlvbnMucGFyc2VKc29uKSB7XG5cdFx0XHRyZXNwb25zZS5qc29uID0gYXN5bmMgKCkgPT4gdGhpcy5fb3B0aW9ucy5wYXJzZUpzb24hKGF3YWl0IHJlc3BvbnNlLnRleHQoKSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3BvbnNlO1xuXHR9XG5cblx0cHJvdGVjdGVkIGFzeW5jIF9yZXRyeTxUIGV4dGVuZHMgKC4uLmFyZ3M6IGFueSkgPT4gUHJvbWlzZTxhbnk+PihmbjogVCk6IFByb21pc2U8UmV0dXJuVHlwZTxUPiB8IHZvaWQ+IHtcblx0XHR0cnkge1xuXHRcdFx0cmV0dXJuIGF3YWl0IGZuKCk7XG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWltcGxpY2l0LWFueS1jYXRjaFxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zdCBtcyA9IE1hdGgubWluKHRoaXMuX2NhbGN1bGF0ZVJldHJ5RGVsYXkoZXJyb3IpLCBtYXhTYWZlVGltZW91dCk7XG5cdFx0XHRpZiAobXMgIT09IDAgJiYgdGhpcy5fcmV0cnlDb3VudCA+IDApIHtcblx0XHRcdFx0YXdhaXQgZGVsYXkobXMsIHtzaWduYWw6IHRoaXMuX29wdGlvbnMuc2lnbmFsfSk7XG5cblx0XHRcdFx0Zm9yIChjb25zdCBob29rIG9mIHRoaXMuX29wdGlvbnMuaG9va3MuYmVmb3JlUmV0cnkpIHtcblx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYXdhaXQtaW4tbG9vcFxuXHRcdFx0XHRcdGNvbnN0IGhvb2tSZXN1bHQgPSBhd2FpdCBob29rKHtcblx0XHRcdFx0XHRcdHJlcXVlc3Q6IHRoaXMucmVxdWVzdCxcblx0XHRcdFx0XHRcdG9wdGlvbnM6ICh0aGlzLl9vcHRpb25zIGFzIHVua25vd24pIGFzIE5vcm1hbGl6ZWRPcHRpb25zLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IGVycm9yIGFzIEVycm9yLFxuXHRcdFx0XHRcdFx0cmV0cnlDb3VudDogdGhpcy5fcmV0cnlDb3VudCxcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIElmIGBzdG9wYCBpcyByZXR1cm5lZCBmcm9tIHRoZSBob29rLCB0aGUgcmV0cnkgcHJvY2VzcyBpcyBzdG9wcGVkXG5cdFx0XHRcdFx0aWYgKGhvb2tSZXN1bHQgPT09IHN0b3ApIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdGhpcy5fcmV0cnkoZm4pO1xuXHRcdFx0fVxuXG5cdFx0XHR0aHJvdyBlcnJvcjtcblx0XHR9XG5cdH1cblxuXHRwcm90ZWN0ZWQgYXN5bmMgX2ZldGNoKCk6IFByb21pc2U8UmVzcG9uc2U+IHtcblx0XHRmb3IgKGNvbnN0IGhvb2sgb2YgdGhpcy5fb3B0aW9ucy5ob29rcy5iZWZvcmVSZXF1ZXN0KSB7XG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYXdhaXQtaW4tbG9vcFxuXHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgaG9vayh0aGlzLnJlcXVlc3QsICh0aGlzLl9vcHRpb25zIGFzIHVua25vd24pIGFzIE5vcm1hbGl6ZWRPcHRpb25zKTtcblxuXHRcdFx0aWYgKHJlc3VsdCBpbnN0YW5jZW9mIFJlcXVlc3QpIHtcblx0XHRcdFx0dGhpcy5yZXF1ZXN0ID0gcmVzdWx0O1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblxuXHRcdFx0aWYgKHJlc3VsdCBpbnN0YW5jZW9mIFJlc3BvbnNlKSB7XG5cdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuX29wdGlvbnMudGltZW91dCA9PT0gZmFsc2UpIHtcblx0XHRcdHJldHVybiB0aGlzLl9vcHRpb25zLmZldGNoKHRoaXMucmVxdWVzdC5jbG9uZSgpKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGltZW91dCh0aGlzLnJlcXVlc3QuY2xvbmUoKSwgdGhpcy5hYm9ydENvbnRyb2xsZXIsIHRoaXMuX29wdGlvbnMgYXMgVGltZW91dE9wdGlvbnMpO1xuXHR9XG5cblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0cHJvdGVjdGVkIF9zdHJlYW0ocmVzcG9uc2U6IFJlc3BvbnNlLCBvbkRvd25sb2FkUHJvZ3Jlc3M6IE9wdGlvbnNbJ29uRG93bmxvYWRQcm9ncmVzcyddKSB7XG5cdFx0Y29uc3QgdG90YWxCeXRlcyA9IE51bWJlcihyZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC1sZW5ndGgnKSkgfHwgMDtcblx0XHRsZXQgdHJhbnNmZXJyZWRCeXRlcyA9IDA7XG5cblx0XHRpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpIHtcblx0XHRcdGlmIChvbkRvd25sb2FkUHJvZ3Jlc3MpIHtcblx0XHRcdFx0b25Eb3dubG9hZFByb2dyZXNzKHtwZXJjZW50OiAxLCB0b3RhbEJ5dGVzLCB0cmFuc2ZlcnJlZEJ5dGVzfSwgbmV3IFVpbnQ4QXJyYXkoKSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBuZXcgZ2xvYmFsVGhpcy5SZXNwb25zZShcblx0XHRcdFx0bnVsbCxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuXHRcdFx0XHRcdHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG5cdFx0XHRcdFx0aGVhZGVyczogcmVzcG9uc2UuaGVhZGVycyxcblx0XHRcdFx0fSxcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG5ldyBnbG9iYWxUaGlzLlJlc3BvbnNlKFxuXHRcdFx0bmV3IGdsb2JhbFRoaXMuUmVhZGFibGVTdHJlYW0oe1xuXHRcdFx0XHRhc3luYyBzdGFydChjb250cm9sbGVyKSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keSEuZ2V0UmVhZGVyKCk7XG5cblx0XHRcdFx0XHRpZiAob25Eb3dubG9hZFByb2dyZXNzKSB7XG5cdFx0XHRcdFx0XHRvbkRvd25sb2FkUHJvZ3Jlc3Moe3BlcmNlbnQ6IDAsIHRyYW5zZmVycmVkQnl0ZXM6IDAsIHRvdGFsQnl0ZXN9LCBuZXcgVWludDhBcnJheSgpKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRhc3luYyBmdW5jdGlvbiByZWFkKCkge1xuXHRcdFx0XHRcdFx0Y29uc3Qge2RvbmUsIHZhbHVlfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG5cdFx0XHRcdFx0XHRpZiAoZG9uZSkge1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLmNsb3NlKCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKG9uRG93bmxvYWRQcm9ncmVzcykge1xuXHRcdFx0XHRcdFx0XHR0cmFuc2ZlcnJlZEJ5dGVzICs9IHZhbHVlLmJ5dGVMZW5ndGg7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHBlcmNlbnQgPSB0b3RhbEJ5dGVzID09PSAwID8gMCA6IHRyYW5zZmVycmVkQnl0ZXMgLyB0b3RhbEJ5dGVzO1xuXHRcdFx0XHRcdFx0XHRvbkRvd25sb2FkUHJvZ3Jlc3Moe3BlcmNlbnQsIHRyYW5zZmVycmVkQnl0ZXMsIHRvdGFsQnl0ZXN9LCB2YWx1ZSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuZW5xdWV1ZSh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRhd2FpdCByZWFkKCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YXdhaXQgcmVhZCgpO1xuXHRcdFx0XHR9LFxuXHRcdFx0fSksXG5cdFx0XHR7XG5cdFx0XHRcdHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuXHRcdFx0XHRzdGF0dXNUZXh0OiByZXNwb25zZS5zdGF0dXNUZXh0LFxuXHRcdFx0XHRoZWFkZXJzOiByZXNwb25zZS5oZWFkZXJzLFxuXHRcdFx0fSxcblx0XHQpO1xuXHR9XG59XG4iLCIvLyBodHRwczovL2dpdGh1Yi5jb20vc2luZHJlc29yaHVzL2RlbGF5L3RyZWUvYWI5OGFlOGRmY2IzOGUxNTkzMjg2Yzk0ZDkzNGU3MGQxNGE0ZTExMVxuXG5pbXBvcnQge2NvbXBvc2VBYm9ydEVycm9yfSBmcm9tICcuLi9lcnJvcnMvRE9NRXhjZXB0aW9uLmpzJztcbmltcG9ydCB7SW50ZXJuYWxPcHRpb25zfSBmcm9tICcuLi90eXBlcy9vcHRpb25zLmpzJztcblxuZXhwb3J0IGludGVyZmFjZSBEZWxheU9wdGlvbnMge1xuXHRzaWduYWw/OiBJbnRlcm5hbE9wdGlvbnNbJ3NpZ25hbCddO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBkZWxheShcblx0bXM6IG51bWJlcixcblx0e3NpZ25hbH06IERlbGF5T3B0aW9ucyxcbik6IFByb21pc2U8dm9pZD4ge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdGlmIChzaWduYWwpIHtcblx0XHRcdGlmIChzaWduYWwuYWJvcnRlZCkge1xuXHRcdFx0XHRyZWplY3QoY29tcG9zZUFib3J0RXJyb3Ioc2lnbmFsKSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0c2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgaGFuZGxlQWJvcnQsIHtvbmNlOiB0cnVlfSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaGFuZGxlQWJvcnQoKSB7XG5cdFx0XHRyZWplY3QoY29tcG9zZUFib3J0RXJyb3Ioc2lnbmFsISkpO1xuXHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRzaWduYWw/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgaGFuZGxlQWJvcnQpO1xuXHRcdFx0cmVzb2x2ZSgpO1xuXHRcdH0sIG1zKTtcblx0fSk7XG59XG4iLCJpbXBvcnQge1RpbWVvdXRFcnJvcn0gZnJvbSAnLi4vZXJyb3JzL1RpbWVvdXRFcnJvci5qcyc7XG5cbmV4cG9ydCB0eXBlIFRpbWVvdXRPcHRpb25zID0ge1xuXHR0aW1lb3V0OiBudW1iZXI7XG5cdGZldGNoOiB0eXBlb2YgZmV0Y2g7XG59O1xuXG4vLyBgUHJvbWlzZS5yYWNlKClgIHdvcmthcm91bmQgKCM5MSlcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHRpbWVvdXQoXG5cdHJlcXVlc3Q6IFJlcXVlc3QsXG5cdGFib3J0Q29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyIHwgdW5kZWZpbmVkLFxuXHRvcHRpb25zOiBUaW1lb3V0T3B0aW9ucyxcbik6IFByb21pc2U8UmVzcG9uc2U+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdGlmIChhYm9ydENvbnRyb2xsZXIpIHtcblx0XHRcdFx0YWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG5cdFx0XHR9XG5cblx0XHRcdHJlamVjdChuZXcgVGltZW91dEVycm9yKHJlcXVlc3QpKTtcblx0XHR9LCBvcHRpb25zLnRpbWVvdXQpO1xuXG5cdFx0dm9pZCBvcHRpb25zXG5cdFx0XHQuZmV0Y2gocmVxdWVzdClcblx0XHRcdC50aGVuKHJlc29sdmUpXG5cdFx0XHQuY2F0Y2gocmVqZWN0KVxuXHRcdFx0LnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodGltZW91dElkKTtcblx0XHRcdH0pO1xuXHR9KTtcbn1cbiIsIi8qISBNSVQgTGljZW5zZSDCqSBTaW5kcmUgU29yaHVzICovXG5cbmltcG9ydCB7S3l9IGZyb20gJy4vY29yZS9LeS5qcyc7XG5pbXBvcnQge3JlcXVlc3RNZXRob2RzLCBzdG9wfSBmcm9tICcuL2NvcmUvY29uc3RhbnRzLmpzJztcbmltcG9ydCB0eXBlIHtLeUluc3RhbmNlfSBmcm9tICcuL3R5cGVzL2t5LmpzJztcbmltcG9ydCB0eXBlIHtJbnB1dCwgT3B0aW9uc30gZnJvbSAnLi90eXBlcy9vcHRpb25zLmpzJztcbmltcG9ydCB7dmFsaWRhdGVBbmRNZXJnZX0gZnJvbSAnLi91dGlscy9tZXJnZS5qcyc7XG5pbXBvcnQge011dGFibGV9IGZyb20gJy4vdXRpbHMvdHlwZXMuanMnO1xuXG5jb25zdCBjcmVhdGVJbnN0YW5jZSA9IChkZWZhdWx0cz86IFBhcnRpYWw8T3B0aW9ucz4pOiBLeUluc3RhbmNlID0+IHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9wcm9taXNlLWZ1bmN0aW9uLWFzeW5jXG5cdGNvbnN0IGt5OiBQYXJ0aWFsPE11dGFibGU8S3lJbnN0YW5jZT4+ID0gKGlucHV0OiBJbnB1dCwgb3B0aW9ucz86IE9wdGlvbnMpID0+IEt5LmNyZWF0ZShpbnB1dCwgdmFsaWRhdGVBbmRNZXJnZShkZWZhdWx0cywgb3B0aW9ucykpO1xuXG5cdGZvciAoY29uc3QgbWV0aG9kIG9mIHJlcXVlc3RNZXRob2RzKSB7XG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9wcm9taXNlLWZ1bmN0aW9uLWFzeW5jXG5cdFx0a3lbbWV0aG9kXSA9IChpbnB1dDogSW5wdXQsIG9wdGlvbnM/OiBPcHRpb25zKSA9PiBLeS5jcmVhdGUoaW5wdXQsIHZhbGlkYXRlQW5kTWVyZ2UoZGVmYXVsdHMsIG9wdGlvbnMsIHttZXRob2R9KSk7XG5cdH1cblxuXHRreS5jcmVhdGUgPSAobmV3RGVmYXVsdHM/OiBQYXJ0aWFsPE9wdGlvbnM+KSA9PiBjcmVhdGVJbnN0YW5jZSh2YWxpZGF0ZUFuZE1lcmdlKG5ld0RlZmF1bHRzKSk7XG5cdGt5LmV4dGVuZCA9IChuZXdEZWZhdWx0cz86IFBhcnRpYWw8T3B0aW9ucz4pID0+IGNyZWF0ZUluc3RhbmNlKHZhbGlkYXRlQW5kTWVyZ2UoZGVmYXVsdHMsIG5ld0RlZmF1bHRzKSk7XG5cdGt5LnN0b3AgPSBzdG9wO1xuXG5cdHJldHVybiBreSBhcyBLeUluc3RhbmNlO1xufTtcblxuY29uc3Qga3kgPSBjcmVhdGVJbnN0YW5jZSgpO1xuXG5leHBvcnQgZGVmYXVsdCBreTtcblxuZXhwb3J0IHR5cGUge1xuXHRPcHRpb25zLFxuXHROb3JtYWxpemVkT3B0aW9ucyxcblx0UmV0cnlPcHRpb25zLFxuXHRTZWFyY2hQYXJhbXNPcHRpb24sXG5cdERvd25sb2FkUHJvZ3Jlc3MsXG59IGZyb20gJy4vdHlwZXMvb3B0aW9ucy5qcyc7XG5cbmV4cG9ydCB0eXBlIHtcblx0SG9va3MsXG5cdEJlZm9yZVJlcXVlc3RIb29rLFxuXHRCZWZvcmVSZXRyeUhvb2ssXG5cdEJlZm9yZVJldHJ5U3RhdGUsXG5cdEJlZm9yZUVycm9ySG9vayxcblx0QWZ0ZXJSZXNwb25zZUhvb2ssXG59IGZyb20gJy4vdHlwZXMvaG9va3MuanMnO1xuXG5leHBvcnQgdHlwZSB7UmVzcG9uc2VQcm9taXNlfSBmcm9tICcuL3R5cGVzL1Jlc3BvbnNlUHJvbWlzZS5qcyc7XG5leHBvcnQgdHlwZSB7S3lSZXNwb25zZX0gZnJvbSAnLi90eXBlcy9yZXNwb25zZS5qcyc7XG5leHBvcnQge0hUVFBFcnJvcn0gZnJvbSAnLi9lcnJvcnMvSFRUUEVycm9yLmpzJztcbmV4cG9ydCB7VGltZW91dEVycm9yfSBmcm9tICcuL2Vycm9ycy9UaW1lb3V0RXJyb3IuanMnO1xuIl0sIm5hbWVzIjpbIkhUVFBFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJyZXNwb25zZSIsInJlcXVlc3QiLCJvcHRpb25zIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsInRyaW0iLCJzdXBlciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidGhpcyIsIm5hbWUiLCJUaW1lb3V0RXJyb3IiLCJpc09iamVjdCIsInZhbHVlIiwidmFsaWRhdGVBbmRNZXJnZSIsInNvdXJjZXMiLCJzb3VyY2UiLCJBcnJheSIsImlzQXJyYXkiLCJUeXBlRXJyb3IiLCJkZWVwTWVyZ2UiLCJtZXJnZUhlYWRlcnMiLCJzb3VyY2UxIiwic291cmNlMiIsInJlc3VsdCIsImdsb2JhbFRoaXMiLCJIZWFkZXJzIiwiaXNIZWFkZXJzSW5zdGFuY2UiLCJrZXkiLCJlbnRyaWVzIiwidW5kZWZpbmVkIiwiZGVsZXRlIiwic2V0IiwicmV0dXJuVmFsdWUiLCJoZWFkZXJzIiwic3VwcG9ydHNSZXF1ZXN0U3RyZWFtcyIsImR1cGxleEFjY2Vzc2VkIiwiaGFzQ29udGVudFR5cGUiLCJzdXBwb3J0c1JlYWRhYmxlU3RyZWFtIiwiUmVhZGFibGVTdHJlYW0iLCJzdXBwb3J0c1JlcXVlc3QiLCJSZXF1ZXN0IiwiYm9keSIsIm1ldGhvZCIsImR1cGxleCIsImhhcyIsInN1cHBvcnRzQWJvcnRDb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwic3VwcG9ydHNSZXNwb25zZVN0cmVhbXMiLCJzdXBwb3J0c0Zvcm1EYXRhIiwiRm9ybURhdGEiLCJyZXF1ZXN0TWV0aG9kcyIsInJlc3BvbnNlVHlwZXMiLCJqc29uIiwidGV4dCIsImZvcm1EYXRhIiwiYXJyYXlCdWZmZXIiLCJibG9iIiwibWF4U2FmZVRpbWVvdXQiLCJzdG9wIiwiU3ltYm9sIiwibm9ybWFsaXplUmVxdWVzdE1ldGhvZCIsImlucHV0IiwiaW5jbHVkZXMiLCJ0b1VwcGVyQ2FzZSIsInJldHJ5QWZ0ZXJTdGF0dXNDb2RlcyIsImRlZmF1bHRSZXRyeU9wdGlvbnMiLCJsaW1pdCIsIm1ldGhvZHMiLCJzdGF0dXNDb2RlcyIsImFmdGVyU3RhdHVzQ29kZXMiLCJtYXhSZXRyeUFmdGVyIiwiTnVtYmVyIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJiYWNrb2ZmTGltaXQiLCJub3JtYWxpemVSZXRyeU9wdGlvbnMiLCJyZXRyeSIsImlzRG9tRXhjZXB0aW9uU3VwcG9ydGVkIiwiQm9vbGVhbiIsIkRPTUV4Y2VwdGlvbiIsImNvbXBvc2VBYm9ydEVycm9yIiwic2lnbmFsIiwicmVhc29uIiwiZXJyb3IiLCJLeSIsImNyZWF0ZSIsImt5IiwiZm4iLCJhc3luYyIsIl9vcHRpb25zIiwidGltZW91dCIsIlJhbmdlRXJyb3IiLCJQcm9taXNlIiwicmVzb2x2ZSIsIl9mZXRjaCIsImhvb2siLCJob29rcyIsImFmdGVyUmVzcG9uc2UiLCJtb2RpZmllZFJlc3BvbnNlIiwiX2RlY29yYXRlUmVzcG9uc2UiLCJjbG9uZSIsIlJlc3BvbnNlIiwib2siLCJ0aHJvd0h0dHBFcnJvcnMiLCJiZWZvcmVFcnJvciIsIm9uRG93bmxvYWRQcm9ncmVzcyIsIl9zdHJlYW0iLCJ0b0xvd2VyQ2FzZSIsIl9yZXRyeSIsInR5cGUiLCJtaW1lVHlwZSIsImdldCIsImJ5dGVMZW5ndGgiLCJwYXJzZUpzb24iLCJfaW5wdXQiLCJjcmVkZW50aWFscyIsImJlZm9yZVJlcXVlc3QiLCJiZWZvcmVSZXRyeSIsInByZWZpeFVybCIsIlN0cmluZyIsImZldGNoIiwiYmluZCIsIlVSTCIsInN0YXJ0c1dpdGgiLCJlbmRzV2l0aCIsImFib3J0Q29udHJvbGxlciIsIm9yaWdpbmFsU2lnbmFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFib3J0Iiwic2VhcmNoUGFyYW1zIiwicmVwbGFjZSIsIlVSTFNlYXJjaFBhcmFtcyIsInRvU3RyaW5nIiwidXJsIiwiSlNPTiIsInN0cmluZ2lmeSIsIl9jYWxjdWxhdGVSZXRyeURlbGF5IiwiX3JldHJ5Q291bnQiLCJyZXRyeUFmdGVyIiwiYWZ0ZXIiLCJpc05hTiIsIkRhdGUiLCJwYXJzZSIsIm5vdyIsIkJBQ0tPRkZfRkFDVE9SIiwiTWF0aCIsIm1pbiIsIm1zIiwicmVqZWN0IiwiYWJvcnRlZCIsImhhbmRsZUFib3J0Iiwib25jZSIsImNsZWFyVGltZW91dCIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGVsYXkiLCJyZXRyeUNvdW50IiwidGhlbiIsImNhdGNoIiwidG90YWxCeXRlcyIsInRyYW5zZmVycmVkQnl0ZXMiLCJwZXJjZW50IiwiVWludDhBcnJheSIsInN0YXJ0IiwiY29udHJvbGxlciIsInJlYWRlciIsImdldFJlYWRlciIsInJlYWQiLCJkb25lIiwiY2xvc2UiLCJlbnF1ZXVlIiwiY3JlYXRlSW5zdGFuY2UiLCJkZWZhdWx0cyIsIm5ld0RlZmF1bHRzIiwiZXh0ZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==