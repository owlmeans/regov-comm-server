"use strict";exports.id=532,exports.ids=[532],exports.modules={532:(e,t,n)=>{n.d(t,{toFormData:()=>D});var a=n(5021),r=n(2494);let i=0;const s={START_BOUNDARY:i++,HEADER_FIELD_START:i++,HEADER_FIELD:i++,HEADER_VALUE_START:i++,HEADER_VALUE:i++,HEADER_VALUE_ALMOST_DONE:i++,HEADERS_ALMOST_DONE:i++,PART_DATA_START:i++,PART_DATA:i++,END:i++};let o=1;const d=o,E=o*=2,A=e=>32|e,h=()=>{};class l{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=h,this.onHeaderField=h,this.onHeadersEnd=h,this.onHeaderValue=h,this.onPartBegin=h,this.onPartData=h,this.onPartEnd=h,this.boundaryChars={},e="\r\n--"+e;const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n),this.boundaryChars[t[n]]=!0;this.boundary=t,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=s.START_BOUNDARY}write(e){let t=0;const n=e.length;let a=this.index,{lookbehind:r,boundary:i,boundaryChars:o,index:h,state:l,flags:D}=this;const c=this.boundary.length,T=c-1,f=e.length;let _,R;const u=e=>{this[e+"Mark"]=t},H=e=>{delete this[e+"Mark"]},b=(e,t,n,a)=>{void 0!==t&&t===n||this[e](a&&a.subarray(t,n))},L=(n,a)=>{const r=n+"Mark";r in this&&(a?(b(n,this[r],t,e),delete this[r]):(b(n,this[r],e.length,e),this[r]=0))};for(t=0;t<n;t++)switch(_=e[t],l){case s.START_BOUNDARY:if(h===i.length-2){if(45===_)D|=E;else if(13!==_)return;h++;break}if(h-1==i.length-2){if(D&E&&45===_)l=s.END,D=0;else{if(D&E||10!==_)return;h=0,b("onPartBegin"),l=s.HEADER_FIELD_START}break}_!==i[h+2]&&(h=-2),_===i[h+2]&&h++;break;case s.HEADER_FIELD_START:l=s.HEADER_FIELD,u("onHeaderField"),h=0;case s.HEADER_FIELD:if(13===_){H("onHeaderField"),l=s.HEADERS_ALMOST_DONE;break}if(h++,45===_)break;if(58===_){if(1===h)return;L("onHeaderField",!0),l=s.HEADER_VALUE_START;break}if(R=A(_),R<97||R>122)return;break;case s.HEADER_VALUE_START:if(32===_)break;u("onHeaderValue"),l=s.HEADER_VALUE;case s.HEADER_VALUE:13===_&&(L("onHeaderValue",!0),b("onHeaderEnd"),l=s.HEADER_VALUE_ALMOST_DONE);break;case s.HEADER_VALUE_ALMOST_DONE:if(10!==_)return;l=s.HEADER_FIELD_START;break;case s.HEADERS_ALMOST_DONE:if(10!==_)return;b("onHeadersEnd"),l=s.PART_DATA_START;break;case s.PART_DATA_START:l=s.PART_DATA,u("onPartData");case s.PART_DATA:if(a=h,0===h){for(t+=T;t<f&&!(e[t]in o);)t+=c;t-=T,_=e[t]}if(h<i.length)i[h]===_?(0===h&&L("onPartData",!0),h++):h=0;else if(h===i.length)h++,13===_?D|=d:45===_?D|=E:h=0;else if(h-1===i.length)if(D&d){if(h=0,10===_){D&=~d,b("onPartEnd"),b("onPartBegin"),l=s.HEADER_FIELD_START;break}}else D&E&&45===_?(b("onPartEnd"),l=s.END,D=0):h=0;if(h>0)r[h-1]=_;else if(a>0){const e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);b("onPartData",0,a,e),a=0,u("onPartData"),t--}break;case s.END:break;default:throw new Error(`Unexpected state entered: ${l}`)}L("onHeaderField"),L("onHeaderValue"),L("onPartData"),this.index=h,this.state=l,this.flags=D}end(){if(this.state===s.HEADER_FIELD_START&&0===this.index||this.state===s.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==s.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}async function D(e,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");const n=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!n)throw new TypeError("no or bad content-type header, no multipart boundary");const i=new l(n[1]||n[2]);let s,o,d,E,A,h;const D=[],c=new r.Ct,T=e=>{d+=u.decode(e,{stream:!0})},f=e=>{D.push(e)},_=()=>{const e=new a.$B(D,h,{type:A});c.append(E,e)},R=()=>{c.append(E,d)},u=new TextDecoder("utf-8");u.decode(),i.onPartBegin=function(){i.onPartData=T,i.onPartEnd=R,s="",o="",d="",E="",A="",h=null,D.length=0},i.onHeaderField=function(e){s+=u.decode(e,{stream:!0})},i.onHeaderValue=function(e){o+=u.decode(e,{stream:!0})},i.onHeaderEnd=function(){if(o+=u.decode(),s=s.toLowerCase(),"content-disposition"===s){const e=o.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);e&&(E=e[2]||e[3]||""),h=function(e){const t=e.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;const n=t[2]||t[3]||"";let a=n.slice(n.lastIndexOf("\\")+1);return a=a.replace(/%22/g,'"'),a=a.replace(/&#(\d{4});/g,((e,t)=>String.fromCharCode(t))),a}(o),h&&(i.onPartData=f,i.onPartEnd=_)}else"content-type"===s&&(A=o);o="",s=""};for await(const t of e)i.write(t);return i.end(),c}}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTMyLmNvbW0tc2Vydi5qcyIsIm1hcHBpbmdzIjoiK0hBR0EsSUFBSUEsRUFBSSxFQUNSLE1BQU1DLEVBQUksQ0FDVEMsZUFBZ0JGLElBQ2hCRyxtQkFBb0JILElBQ3BCSSxhQUFjSixJQUNkSyxtQkFBb0JMLElBQ3BCTSxhQUFjTixJQUNkTyx5QkFBMEJQLElBQzFCUSxvQkFBcUJSLElBQ3JCUyxnQkFBaUJULElBQ2pCVSxVQUFXVixJQUNYVyxJQUFLWCxLQUdOLElBQUlZLEVBQUksRUFDUixNQUFNQyxFQUNVRCxFQURWQyxFQUVVRCxHQUFLLEVBV2ZFLEVBQVFDLEdBQVMsR0FBSkEsRUFFYkMsRUFBT0EsT0FFYixNQUFNQyxFQUlMQyxZQUFZQyxHQUNYQyxLQUFLQyxNQUFRLEVBQ2JELEtBQUtFLE1BQVEsRUFFYkYsS0FBS0csWUFBY1AsRUFDbkJJLEtBQUtJLGNBQWdCUixFQUNyQkksS0FBS0ssYUFBZVQsRUFDcEJJLEtBQUtNLGNBQWdCVixFQUNyQkksS0FBS08sWUFBY1gsRUFDbkJJLEtBQUtRLFdBQWFaLEVBQ2xCSSxLQUFLUyxVQUFZYixFQUVqQkksS0FBS1UsY0FBZ0IsQ0FBQyxFQUV0QlgsRUFBVyxTQUFXQSxFQUN0QixNQUFNWSxFQUFPLElBQUlDLFdBQVdiLEVBQVNjLFFBQ3JDLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJZixFQUFTYyxPQUFRQyxJQUNwQ0gsRUFBS0csR0FBS2YsRUFBU2dCLFdBQVdELEdBQzlCZCxLQUFLVSxjQUFjQyxFQUFLRyxLQUFNLEVBRy9CZCxLQUFLRCxTQUFXWSxFQUNoQlgsS0FBS2dCLFdBQWEsSUFBSUosV0FBV1osS0FBS0QsU0FBU2MsT0FBUyxHQUN4RGIsS0FBS2lCLE1BQVFwQyxFQUFFQyxjQUNoQixDQUtBb0MsTUFBTUMsR0FDTCxJQUFJTCxFQUFJLEVBQ1IsTUFBTU0sRUFBVUQsRUFBS04sT0FDckIsSUFBSVEsRUFBZ0JyQixLQUFLQyxPQUNyQixXQUFDZSxFQUFVLFNBQUVqQixFQUFRLGNBQUVXLEVBQWEsTUFBRVQsRUFBSyxNQUFFZ0IsRUFBSyxNQUFFZixHQUFTRixLQUNqRSxNQUFNc0IsRUFBaUJ0QixLQUFLRCxTQUFTYyxPQUMvQlUsRUFBY0QsRUFBaUIsRUFDL0JFLEVBQWVMLEVBQUtOLE9BQzFCLElBQUlsQixFQUNBOEIsRUFFSixNQUFNQyxFQUFPQyxJQUNaM0IsS0FBSzJCLEVBQU8sUUFBVWIsQ0FBQyxFQUdsQmMsRUFBUUQsV0FDTjNCLEtBQUsyQixFQUFPLE9BQU8sRUFHckJFLEVBQVdBLENBQUNDLEVBQWdCQyxFQUFPQyxFQUFLckIsVUFDL0JzQixJQUFWRixHQUF1QkEsSUFBVUMsR0FDcENoQyxLQUFLOEIsR0FBZ0JuQixHQUFRQSxFQUFLdUIsU0FBU0gsRUFBT0MsR0FDbkQsRUFHS0csRUFBZUEsQ0FBQ1IsRUFBTUMsS0FDM0IsTUFBTVEsRUFBYVQsRUFBTyxPQUNwQlMsS0FBY3BDLE9BSWhCNEIsR0FDSEMsRUFBU0YsRUFBTTNCLEtBQUtvQyxHQUFhdEIsRUFBR0ssVUFDN0JuQixLQUFLb0MsS0FFWlAsRUFBU0YsRUFBTTNCLEtBQUtvQyxHQUFhakIsRUFBS04sT0FBUU0sR0FDOUNuQixLQUFLb0MsR0FBYyxHQUNwQixFQUdELElBQUt0QixFQUFJLEVBQUdBLEVBQUlNLEVBQVNOLElBR3hCLE9BRkFuQixFQUFJd0IsRUFBS0wsR0FFREcsR0FDUCxLQUFLcEMsRUFBRUMsZUFDTixHQUFJbUIsSUFBVUYsRUFBU2MsT0FBUyxFQUFHLENBQ2xDLEdBeEZTLEtBd0ZMbEIsRUFDSE8sR0FBU1QsT0FDSCxHQTVGRixLQTRGTUUsRUFDVixPQUdETSxJQUNBLEtBQ0QsQ0FBTyxHQUFJQSxFQUFRLEdBQU1GLEVBQVNjLE9BQVMsRUFBRyxDQUM3QyxHQUFJWCxFQUFRVCxHQWpHSCxLQWlHc0JFLEVBQzlCc0IsRUFBUXBDLEVBQUVVLElBQ1ZXLEVBQVEsTUFDRixJQUFNQSxFQUFRVCxHQXZHaEIsS0F1R29DRSxFQUt4QyxPQUpBTSxFQUFRLEVBQ1I0QixFQUFTLGVBQ1RaLEVBQVFwQyxFQUFFRSxrQkFHWCxDQUVBLEtBQ0QsQ0FFSVksSUFBTUksRUFBU0UsRUFBUSxLQUMxQkEsR0FBUyxHQUdOTixJQUFNSSxFQUFTRSxFQUFRLElBQzFCQSxJQUdELE1BQ0QsS0FBS3BCLEVBQUVFLG1CQUNOa0MsRUFBUXBDLEVBQUVHLGFBQ1YwQyxFQUFLLGlCQUNMekIsRUFBUSxFQUVULEtBQUtwQixFQUFFRyxhQUNOLEdBaElNLEtBZ0lGVyxFQUFVLENBQ2JpQyxFQUFNLGlCQUNOWCxFQUFRcEMsRUFBRU8sb0JBQ1YsS0FDRCxDQUdBLEdBREFhLElBcElVLEtBcUlOTixFQUNILE1BR0QsR0F4SVMsS0F3SUxBLEVBQWEsQ0FDaEIsR0FBYyxJQUFWTSxFQUVILE9BR0RrQyxFQUFhLGlCQUFpQixHQUM5QmxCLEVBQVFwQyxFQUFFSSxtQkFDVixLQUNELENBR0EsR0FEQXdDLEVBQUsvQixFQUFNQyxHQUNQOEIsRUFuSkMsSUFtSlNBLEVBbEpULElBbUpKLE9BR0QsTUFDRCxLQUFLNUMsRUFBRUksbUJBQ04sR0E1SlMsS0E0SkxVLEVBQ0gsTUFHRCtCLEVBQUssaUJBQ0xULEVBQVFwQyxFQUFFSyxhQUVYLEtBQUtMLEVBQUVLLGFBcEtBLEtBcUtGUyxJQUNId0MsRUFBYSxpQkFBaUIsR0FDOUJOLEVBQVMsZUFDVFosRUFBUXBDLEVBQUVNLDBCQUdYLE1BQ0QsS0FBS04sRUFBRU0seUJBQ04sR0E5S00sS0E4S0ZRLEVBQ0gsT0FHRHNCLEVBQVFwQyxFQUFFRSxtQkFDVixNQUNELEtBQUtGLEVBQUVPLG9CQUNOLEdBckxNLEtBcUxGTyxFQUNILE9BR0RrQyxFQUFTLGdCQUNUWixFQUFRcEMsRUFBRVEsZ0JBQ1YsTUFDRCxLQUFLUixFQUFFUSxnQkFDTjRCLEVBQVFwQyxFQUFFUyxVQUNWb0MsRUFBSyxjQUVOLEtBQUs3QyxFQUFFUyxVQUdOLEdBRkErQixFQUFnQnBCLEVBRUYsSUFBVkEsRUFBYSxDQUdoQixJQURBYSxHQUFLUyxFQUNFVCxFQUFJVSxLQUFrQkwsRUFBS0wsS0FBTUosSUFDdkNJLEdBQUtRLEVBR05SLEdBQUtTLEVBQ0w1QixFQUFJd0IsRUFBS0wsRUFDVixDQUVBLEdBQUliLEVBQVFGLEVBQVNjLE9BQ2hCZCxFQUFTRSxLQUFXTixHQUNULElBQVZNLEdBQ0hrQyxFQUFhLGNBQWMsR0FHNUJsQyxLQUVBQSxFQUFRLE9BRUgsR0FBSUEsSUFBVUYsRUFBU2MsT0FDN0JaLElBeE5LLEtBeU5ETixFQUVITyxHQUFTVCxFQXpORCxLQTBORUUsRUFFVk8sR0FBU1QsRUFFVFEsRUFBUSxPQUVILEdBQUlBLEVBQVEsSUFBTUYsRUFBU2MsT0FDakMsR0FBSVgsRUFBUVQsR0FFWCxHQURBUSxFQUFRLEVBck9KLEtBc09BTixFQUFVLENBRWJPLElBQVVULEVBQ1ZvQyxFQUFTLGFBQ1RBLEVBQVMsZUFDVFosRUFBUXBDLEVBQUVFLG1CQUNWLEtBQ0QsT0FDVW1CLEVBQVFULEdBM09WLEtBNE9KRSxHQUNIa0MsRUFBUyxhQUNUWixFQUFRcEMsRUFBRVUsSUFDVlcsRUFBUSxHQUtURCxFQUFRLEVBSVYsR0FBSUEsRUFBUSxFQUdYZSxFQUFXZixFQUFRLEdBQUtOLE9BQ2xCLEdBQUkwQixFQUFnQixFQUFHLENBRzdCLE1BQU1nQixFQUFjLElBQUl6QixXQUFXSSxFQUFXc0IsT0FBUXRCLEVBQVd1QixXQUFZdkIsRUFBV3dCLFlBQ3hGWCxFQUFTLGFBQWMsRUFBR1IsRUFBZWdCLEdBQ3pDaEIsRUFBZ0IsRUFDaEJLLEVBQUssY0FJTFosR0FDRCxDQUVBLE1BQ0QsS0FBS2pDLEVBQUVVLElBQ04sTUFDRCxRQUNDLE1BQU0sSUFBSWtELE1BQU8sNkJBQTRCeEIsS0FJaERrQixFQUFhLGlCQUNiQSxFQUFhLGlCQUNiQSxFQUFhLGNBR2JuQyxLQUFLQyxNQUFRQSxFQUNiRCxLQUFLaUIsTUFBUUEsRUFDYmpCLEtBQUtFLE1BQVFBLENBQ2QsQ0FFQThCLE1BQ0MsR0FBS2hDLEtBQUtpQixRQUFVcEMsRUFBRUUsb0JBQXFDLElBQWZpQixLQUFLQyxPQUMvQ0QsS0FBS2lCLFFBQVVwQyxFQUFFUyxXQUFhVSxLQUFLQyxRQUFVRCxLQUFLRCxTQUFTYyxPQUM1RGIsS0FBS1MsaUJBQ0MsR0FBSVQsS0FBS2lCLFFBQVVwQyxFQUFFVSxJQUMzQixNQUFNLElBQUlrRCxNQUFNLG1EQUVsQixFQW1CTUMsZUFBZUMsRUFBV0MsRUFBTUMsR0FDdEMsSUFBSyxhQUFhQyxLQUFLRCxHQUN0QixNQUFNLElBQUlFLFVBQVUsbUJBR3JCLE1BQU1DLEVBQUlILEVBQUdJLE1BQU0sbUNBRW5CLElBQUtELEVBQ0osTUFBTSxJQUFJRCxVQUFVLHdEQUdyQixNQUFNRyxFQUFTLElBQUlyRCxFQUFnQm1ELEVBQUUsSUFBTUEsRUFBRSxJQUU3QyxJQUFJRyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNKLE1BQU1DLEVBQWMsR0FDZEMsRUFBVyxJQUFJQyxFQUFBQSxHQUVmbkQsRUFBYUcsSUFDbEIwQyxHQUFjTyxFQUFRQyxPQUFPbEQsRUFBTSxDQUFDbUQsUUFBUSxHQUFNLEVBRzdDQyxFQUFlcEQsSUFDcEI4QyxFQUFZTyxLQUFLckQsRUFBSyxFQUdqQnNELEVBQXVCQSxLQUM1QixNQUFNQyxFQUFPLElBQUlDLEVBQUFBLEdBQUtWLEVBQWFELEVBQVUsQ0FBQ1ksS0FBTWIsSUFDcERHLEVBQVNXLE9BQU9mLEVBQVdZLEVBQUssRUFHM0JJLEVBQXdCQSxLQUM3QlosRUFBU1csT0FBT2YsRUFBV0QsRUFBVyxFQUdqQ08sRUFBVSxJQUFJVyxZQUFZLFNBQ2hDWCxFQUFRQyxTQUVSWCxFQUFPM0MsWUFBYyxXQUNwQjJDLEVBQU8xQyxXQUFhQSxFQUNwQjBDLEVBQU96QyxVQUFZNkQsRUFFbkJuQixFQUFjLEdBQ2RDLEVBQWMsR0FDZEMsRUFBYSxHQUNiQyxFQUFZLEdBQ1pDLEVBQWMsR0FDZEMsRUFBVyxLQUNYQyxFQUFZNUMsT0FBUyxDQUN0QixFQUVBcUMsRUFBTzlDLGNBQWdCLFNBQVVPLEdBQ2hDd0MsR0FBZVMsRUFBUUMsT0FBT2xELEVBQU0sQ0FBQ21ELFFBQVEsR0FDOUMsRUFFQVosRUFBTzVDLGNBQWdCLFNBQVVLLEdBQ2hDeUMsR0FBZVEsRUFBUUMsT0FBT2xELEVBQU0sQ0FBQ21ELFFBQVEsR0FDOUMsRUFFQVosRUFBTy9DLFlBQWMsV0FJcEIsR0FIQWlELEdBQWVRLEVBQVFDLFNBQ3ZCVixFQUFjQSxFQUFZcUIsY0FFTix3QkFBaEJyQixFQUF1QyxDQUUxQyxNQUFNSCxFQUFJSSxFQUFZSCxNQUFNLHFEQUV4QkQsSUFDSE0sRUFBWU4sRUFBRSxJQUFNQSxFQUFFLElBQU0sSUFHN0JRLEVBM0ZILFNBQW1CSixHQUVsQixNQUFNSixFQUFJSSxFQUFZSCxNQUFNLDhEQUM1QixJQUFLRCxFQUNKLE9BR0QsTUFBTUMsRUFBUUQsRUFBRSxJQUFNQSxFQUFFLElBQU0sR0FDOUIsSUFBSVEsRUFBV1AsRUFBTXdCLE1BQU14QixFQUFNeUIsWUFBWSxNQUFRLEdBS3JELE9BSkFsQixFQUFXQSxFQUFTbUIsUUFBUSxPQUFRLEtBQ3BDbkIsRUFBV0EsRUFBU21CLFFBQVEsZUFBZSxDQUFDM0IsRUFBRzRCLElBQ3ZDQyxPQUFPQyxhQUFhRixLQUVyQnBCLENBQ1IsQ0E2RWN1QixDQUFVM0IsR0FFakJJLElBQ0hOLEVBQU8xQyxXQUFhdUQsRUFDcEJiLEVBQU96QyxVQUFZd0QsRUFFckIsS0FBMkIsaUJBQWhCZCxJQUNWSSxFQUFjSCxHQUdmQSxFQUFjLEdBQ2RELEVBQWMsRUFDZixFQUVBLFVBQVcsTUFBTTZCLEtBQVNwQyxFQUN6Qk0sRUFBT2hDLE1BQU04RCxHQUtkLE9BRkE5QixFQUFPbEIsTUFFQTBCLENBQ1IsQyIsInNvdXJjZXMiOlsid2VicGFjazovL0Bvd2xtZWFucy9yZWdvdi1jb21tLXNlcnZlci8uL25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy91dGlscy9tdWx0aXBhcnQtcGFyc2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RmlsZX0gZnJvbSAnZmV0Y2gtYmxvYi9mcm9tLmpzJztcbmltcG9ydCB7Rm9ybURhdGF9IGZyb20gJ2Zvcm1kYXRhLXBvbHlmaWxsL2VzbS5taW4uanMnO1xuXG5sZXQgcyA9IDA7XG5jb25zdCBTID0ge1xuXHRTVEFSVF9CT1VOREFSWTogcysrLFxuXHRIRUFERVJfRklFTERfU1RBUlQ6IHMrKyxcblx0SEVBREVSX0ZJRUxEOiBzKyssXG5cdEhFQURFUl9WQUxVRV9TVEFSVDogcysrLFxuXHRIRUFERVJfVkFMVUU6IHMrKyxcblx0SEVBREVSX1ZBTFVFX0FMTU9TVF9ET05FOiBzKyssXG5cdEhFQURFUlNfQUxNT1NUX0RPTkU6IHMrKyxcblx0UEFSVF9EQVRBX1NUQVJUOiBzKyssXG5cdFBBUlRfREFUQTogcysrLFxuXHRFTkQ6IHMrK1xufTtcblxubGV0IGYgPSAxO1xuY29uc3QgRiA9IHtcblx0UEFSVF9CT1VOREFSWTogZixcblx0TEFTVF9CT1VOREFSWTogZiAqPSAyXG59O1xuXG5jb25zdCBMRiA9IDEwO1xuY29uc3QgQ1IgPSAxMztcbmNvbnN0IFNQQUNFID0gMzI7XG5jb25zdCBIWVBIRU4gPSA0NTtcbmNvbnN0IENPTE9OID0gNTg7XG5jb25zdCBBID0gOTc7XG5jb25zdCBaID0gMTIyO1xuXG5jb25zdCBsb3dlciA9IGMgPT4gYyB8IDB4MjA7XG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7fTtcblxuY2xhc3MgTXVsdGlwYXJ0UGFyc2VyIHtcblx0LyoqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBib3VuZGFyeVxuXHQgKi9cblx0Y29uc3RydWN0b3IoYm91bmRhcnkpIHtcblx0XHR0aGlzLmluZGV4ID0gMDtcblx0XHR0aGlzLmZsYWdzID0gMDtcblxuXHRcdHRoaXMub25IZWFkZXJFbmQgPSBub29wO1xuXHRcdHRoaXMub25IZWFkZXJGaWVsZCA9IG5vb3A7XG5cdFx0dGhpcy5vbkhlYWRlcnNFbmQgPSBub29wO1xuXHRcdHRoaXMub25IZWFkZXJWYWx1ZSA9IG5vb3A7XG5cdFx0dGhpcy5vblBhcnRCZWdpbiA9IG5vb3A7XG5cdFx0dGhpcy5vblBhcnREYXRhID0gbm9vcDtcblx0XHR0aGlzLm9uUGFydEVuZCA9IG5vb3A7XG5cblx0XHR0aGlzLmJvdW5kYXJ5Q2hhcnMgPSB7fTtcblxuXHRcdGJvdW5kYXJ5ID0gJ1xcclxcbi0tJyArIGJvdW5kYXJ5O1xuXHRcdGNvbnN0IHVpOGEgPSBuZXcgVWludDhBcnJheShib3VuZGFyeS5sZW5ndGgpO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgYm91bmRhcnkubGVuZ3RoOyBpKyspIHtcblx0XHRcdHVpOGFbaV0gPSBib3VuZGFyeS5jaGFyQ29kZUF0KGkpO1xuXHRcdFx0dGhpcy5ib3VuZGFyeUNoYXJzW3VpOGFbaV1dID0gdHJ1ZTtcblx0XHR9XG5cblx0XHR0aGlzLmJvdW5kYXJ5ID0gdWk4YTtcblx0XHR0aGlzLmxvb2tiZWhpbmQgPSBuZXcgVWludDhBcnJheSh0aGlzLmJvdW5kYXJ5Lmxlbmd0aCArIDgpO1xuXHRcdHRoaXMuc3RhdGUgPSBTLlNUQVJUX0JPVU5EQVJZO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB7VWludDhBcnJheX0gZGF0YVxuXHQgKi9cblx0d3JpdGUoZGF0YSkge1xuXHRcdGxldCBpID0gMDtcblx0XHRjb25zdCBsZW5ndGhfID0gZGF0YS5sZW5ndGg7XG5cdFx0bGV0IHByZXZpb3VzSW5kZXggPSB0aGlzLmluZGV4O1xuXHRcdGxldCB7bG9va2JlaGluZCwgYm91bmRhcnksIGJvdW5kYXJ5Q2hhcnMsIGluZGV4LCBzdGF0ZSwgZmxhZ3N9ID0gdGhpcztcblx0XHRjb25zdCBib3VuZGFyeUxlbmd0aCA9IHRoaXMuYm91bmRhcnkubGVuZ3RoO1xuXHRcdGNvbnN0IGJvdW5kYXJ5RW5kID0gYm91bmRhcnlMZW5ndGggLSAxO1xuXHRcdGNvbnN0IGJ1ZmZlckxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuXHRcdGxldCBjO1xuXHRcdGxldCBjbDtcblxuXHRcdGNvbnN0IG1hcmsgPSBuYW1lID0+IHtcblx0XHRcdHRoaXNbbmFtZSArICdNYXJrJ10gPSBpO1xuXHRcdH07XG5cblx0XHRjb25zdCBjbGVhciA9IG5hbWUgPT4ge1xuXHRcdFx0ZGVsZXRlIHRoaXNbbmFtZSArICdNYXJrJ107XG5cdFx0fTtcblxuXHRcdGNvbnN0IGNhbGxiYWNrID0gKGNhbGxiYWNrU3ltYm9sLCBzdGFydCwgZW5kLCB1aThhKSA9PiB7XG5cdFx0XHRpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCB8fCBzdGFydCAhPT0gZW5kKSB7XG5cdFx0XHRcdHRoaXNbY2FsbGJhY2tTeW1ib2xdKHVpOGEgJiYgdWk4YS5zdWJhcnJheShzdGFydCwgZW5kKSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IGRhdGFDYWxsYmFjayA9IChuYW1lLCBjbGVhcikgPT4ge1xuXHRcdFx0Y29uc3QgbWFya1N5bWJvbCA9IG5hbWUgKyAnTWFyayc7XG5cdFx0XHRpZiAoIShtYXJrU3ltYm9sIGluIHRoaXMpKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGNsZWFyKSB7XG5cdFx0XHRcdGNhbGxiYWNrKG5hbWUsIHRoaXNbbWFya1N5bWJvbF0sIGksIGRhdGEpO1xuXHRcdFx0XHRkZWxldGUgdGhpc1ttYXJrU3ltYm9sXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNhbGxiYWNrKG5hbWUsIHRoaXNbbWFya1N5bWJvbF0sIGRhdGEubGVuZ3RoLCBkYXRhKTtcblx0XHRcdFx0dGhpc1ttYXJrU3ltYm9sXSA9IDA7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBsZW5ndGhfOyBpKyspIHtcblx0XHRcdGMgPSBkYXRhW2ldO1xuXG5cdFx0XHRzd2l0Y2ggKHN0YXRlKSB7XG5cdFx0XHRcdGNhc2UgUy5TVEFSVF9CT1VOREFSWTpcblx0XHRcdFx0XHRpZiAoaW5kZXggPT09IGJvdW5kYXJ5Lmxlbmd0aCAtIDIpIHtcblx0XHRcdFx0XHRcdGlmIChjID09PSBIWVBIRU4pIHtcblx0XHRcdFx0XHRcdFx0ZmxhZ3MgfD0gRi5MQVNUX0JPVU5EQVJZO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChjICE9PSBDUikge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGluZGV4IC0gMSA9PT0gYm91bmRhcnkubGVuZ3RoIC0gMikge1xuXHRcdFx0XHRcdFx0aWYgKGZsYWdzICYgRi5MQVNUX0JPVU5EQVJZICYmIGMgPT09IEhZUEhFTikge1xuXHRcdFx0XHRcdFx0XHRzdGF0ZSA9IFMuRU5EO1xuXHRcdFx0XHRcdFx0XHRmbGFncyA9IDA7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCEoZmxhZ3MgJiBGLkxBU1RfQk9VTkRBUlkpICYmIGMgPT09IExGKSB7XG5cdFx0XHRcdFx0XHRcdGluZGV4ID0gMDtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2soJ29uUGFydEJlZ2luJyk7XG5cdFx0XHRcdFx0XHRcdHN0YXRlID0gUy5IRUFERVJfRklFTERfU1RBUlQ7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChjICE9PSBib3VuZGFyeVtpbmRleCArIDJdKSB7XG5cdFx0XHRcdFx0XHRpbmRleCA9IC0yO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChjID09PSBib3VuZGFyeVtpbmRleCArIDJdKSB7XG5cdFx0XHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFMuSEVBREVSX0ZJRUxEX1NUQVJUOlxuXHRcdFx0XHRcdHN0YXRlID0gUy5IRUFERVJfRklFTEQ7XG5cdFx0XHRcdFx0bWFyaygnb25IZWFkZXJGaWVsZCcpO1xuXHRcdFx0XHRcdGluZGV4ID0gMDtcblx0XHRcdFx0XHQvLyBmYWxscyB0aHJvdWdoXG5cdFx0XHRcdGNhc2UgUy5IRUFERVJfRklFTEQ6XG5cdFx0XHRcdFx0aWYgKGMgPT09IENSKSB7XG5cdFx0XHRcdFx0XHRjbGVhcignb25IZWFkZXJGaWVsZCcpO1xuXHRcdFx0XHRcdFx0c3RhdGUgPSBTLkhFQURFUlNfQUxNT1NUX0RPTkU7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRcdGlmIChjID09PSBIWVBIRU4pIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChjID09PSBDT0xPTikge1xuXHRcdFx0XHRcdFx0aWYgKGluZGV4ID09PSAxKSB7XG5cdFx0XHRcdFx0XHRcdC8vIGVtcHR5IGhlYWRlciBmaWVsZFxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGRhdGFDYWxsYmFjaygnb25IZWFkZXJGaWVsZCcsIHRydWUpO1xuXHRcdFx0XHRcdFx0c3RhdGUgPSBTLkhFQURFUl9WQUxVRV9TVEFSVDtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNsID0gbG93ZXIoYyk7XG5cdFx0XHRcdFx0aWYgKGNsIDwgQSB8fCBjbCA+IFopIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBTLkhFQURFUl9WQUxVRV9TVEFSVDpcblx0XHRcdFx0XHRpZiAoYyA9PT0gU1BBQ0UpIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdG1hcmsoJ29uSGVhZGVyVmFsdWUnKTtcblx0XHRcdFx0XHRzdGF0ZSA9IFMuSEVBREVSX1ZBTFVFO1xuXHRcdFx0XHRcdC8vIGZhbGxzIHRocm91Z2hcblx0XHRcdFx0Y2FzZSBTLkhFQURFUl9WQUxVRTpcblx0XHRcdFx0XHRpZiAoYyA9PT0gQ1IpIHtcblx0XHRcdFx0XHRcdGRhdGFDYWxsYmFjaygnb25IZWFkZXJWYWx1ZScsIHRydWUpO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2soJ29uSGVhZGVyRW5kJyk7XG5cdFx0XHRcdFx0XHRzdGF0ZSA9IFMuSEVBREVSX1ZBTFVFX0FMTU9TVF9ET05FO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFMuSEVBREVSX1ZBTFVFX0FMTU9TVF9ET05FOlxuXHRcdFx0XHRcdGlmIChjICE9PSBMRikge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHN0YXRlID0gUy5IRUFERVJfRklFTERfU1RBUlQ7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgUy5IRUFERVJTX0FMTU9TVF9ET05FOlxuXHRcdFx0XHRcdGlmIChjICE9PSBMRikge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhbGxiYWNrKCdvbkhlYWRlcnNFbmQnKTtcblx0XHRcdFx0XHRzdGF0ZSA9IFMuUEFSVF9EQVRBX1NUQVJUO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFMuUEFSVF9EQVRBX1NUQVJUOlxuXHRcdFx0XHRcdHN0YXRlID0gUy5QQVJUX0RBVEE7XG5cdFx0XHRcdFx0bWFyaygnb25QYXJ0RGF0YScpO1xuXHRcdFx0XHRcdC8vIGZhbGxzIHRocm91Z2hcblx0XHRcdFx0Y2FzZSBTLlBBUlRfREFUQTpcblx0XHRcdFx0XHRwcmV2aW91c0luZGV4ID0gaW5kZXg7XG5cblx0XHRcdFx0XHRpZiAoaW5kZXggPT09IDApIHtcblx0XHRcdFx0XHRcdC8vIGJveWVyLW1vb3JlIGRlcnJpdmVkIGFsZ29yaXRobSB0byBzYWZlbHkgc2tpcCBub24tYm91bmRhcnkgZGF0YVxuXHRcdFx0XHRcdFx0aSArPSBib3VuZGFyeUVuZDtcblx0XHRcdFx0XHRcdHdoaWxlIChpIDwgYnVmZmVyTGVuZ3RoICYmICEoZGF0YVtpXSBpbiBib3VuZGFyeUNoYXJzKSkge1xuXHRcdFx0XHRcdFx0XHRpICs9IGJvdW5kYXJ5TGVuZ3RoO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpIC09IGJvdW5kYXJ5RW5kO1xuXHRcdFx0XHRcdFx0YyA9IGRhdGFbaV07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGluZGV4IDwgYm91bmRhcnkubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRpZiAoYm91bmRhcnlbaW5kZXhdID09PSBjKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChpbmRleCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHRcdGRhdGFDYWxsYmFjaygnb25QYXJ0RGF0YScsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGluZGV4ID0gMDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2UgaWYgKGluZGV4ID09PSBib3VuZGFyeS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0XHRpZiAoYyA9PT0gQ1IpIHtcblx0XHRcdFx0XHRcdFx0Ly8gQ1IgPSBwYXJ0IGJvdW5kYXJ5XG5cdFx0XHRcdFx0XHRcdGZsYWdzIHw9IEYuUEFSVF9CT1VOREFSWTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoYyA9PT0gSFlQSEVOKSB7XG5cdFx0XHRcdFx0XHRcdC8vIEhZUEhFTiA9IGVuZCBib3VuZGFyeVxuXHRcdFx0XHRcdFx0XHRmbGFncyB8PSBGLkxBU1RfQk9VTkRBUlk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRpbmRleCA9IDA7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpbmRleCAtIDEgPT09IGJvdW5kYXJ5Lmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0aWYgKGZsYWdzICYgRi5QQVJUX0JPVU5EQVJZKSB7XG5cdFx0XHRcdFx0XHRcdGluZGV4ID0gMDtcblx0XHRcdFx0XHRcdFx0aWYgKGMgPT09IExGKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gdW5zZXQgdGhlIFBBUlRfQk9VTkRBUlkgZmxhZ1xuXHRcdFx0XHRcdFx0XHRcdGZsYWdzICY9IH5GLlBBUlRfQk9VTkRBUlk7XG5cdFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2soJ29uUGFydEVuZCcpO1xuXHRcdFx0XHRcdFx0XHRcdGNhbGxiYWNrKCdvblBhcnRCZWdpbicpO1xuXHRcdFx0XHRcdFx0XHRcdHN0YXRlID0gUy5IRUFERVJfRklFTERfU1RBUlQ7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZmxhZ3MgJiBGLkxBU1RfQk9VTkRBUlkpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGMgPT09IEhZUEhFTikge1xuXHRcdFx0XHRcdFx0XHRcdGNhbGxiYWNrKCdvblBhcnRFbmQnKTtcblx0XHRcdFx0XHRcdFx0XHRzdGF0ZSA9IFMuRU5EO1xuXHRcdFx0XHRcdFx0XHRcdGZsYWdzID0gMDtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRpbmRleCA9IDA7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGluZGV4ID0gMDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoaW5kZXggPiAwKSB7XG5cdFx0XHRcdFx0XHQvLyB3aGVuIG1hdGNoaW5nIGEgcG9zc2libGUgYm91bmRhcnksIGtlZXAgYSBsb29rYmVoaW5kIHJlZmVyZW5jZVxuXHRcdFx0XHRcdFx0Ly8gaW4gY2FzZSBpdCB0dXJucyBvdXQgdG8gYmUgYSBmYWxzZSBsZWFkXG5cdFx0XHRcdFx0XHRsb29rYmVoaW5kW2luZGV4IC0gMV0gPSBjO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAocHJldmlvdXNJbmRleCA+IDApIHtcblx0XHRcdFx0XHRcdC8vIGlmIG91ciBib3VuZGFyeSB0dXJuZWQgb3V0IHRvIGJlIHJ1YmJpc2gsIHRoZSBjYXB0dXJlZCBsb29rYmVoaW5kXG5cdFx0XHRcdFx0XHQvLyBiZWxvbmdzIHRvIHBhcnREYXRhXG5cdFx0XHRcdFx0XHRjb25zdCBfbG9va2JlaGluZCA9IG5ldyBVaW50OEFycmF5KGxvb2tiZWhpbmQuYnVmZmVyLCBsb29rYmVoaW5kLmJ5dGVPZmZzZXQsIGxvb2tiZWhpbmQuYnl0ZUxlbmd0aCk7XG5cdFx0XHRcdFx0XHRjYWxsYmFjaygnb25QYXJ0RGF0YScsIDAsIHByZXZpb3VzSW5kZXgsIF9sb29rYmVoaW5kKTtcblx0XHRcdFx0XHRcdHByZXZpb3VzSW5kZXggPSAwO1xuXHRcdFx0XHRcdFx0bWFyaygnb25QYXJ0RGF0YScpO1xuXG5cdFx0XHRcdFx0XHQvLyByZWNvbnNpZGVyIHRoZSBjdXJyZW50IGNoYXJhY3RlciBldmVuIHNvIGl0IGludGVycnVwdGVkIHRoZSBzZXF1ZW5jZVxuXHRcdFx0XHRcdFx0Ly8gaXQgY291bGQgYmUgdGhlIGJlZ2lubmluZyBvZiBhIG5ldyBzZXF1ZW5jZVxuXHRcdFx0XHRcdFx0aS0tO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFMuRU5EOlxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBzdGF0ZSBlbnRlcmVkOiAke3N0YXRlfWApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGRhdGFDYWxsYmFjaygnb25IZWFkZXJGaWVsZCcpO1xuXHRcdGRhdGFDYWxsYmFjaygnb25IZWFkZXJWYWx1ZScpO1xuXHRcdGRhdGFDYWxsYmFjaygnb25QYXJ0RGF0YScpO1xuXG5cdFx0Ly8gVXBkYXRlIHByb3BlcnRpZXMgZm9yIHRoZSBuZXh0IGNhbGxcblx0XHR0aGlzLmluZGV4ID0gaW5kZXg7XG5cdFx0dGhpcy5zdGF0ZSA9IHN0YXRlO1xuXHRcdHRoaXMuZmxhZ3MgPSBmbGFncztcblx0fVxuXG5cdGVuZCgpIHtcblx0XHRpZiAoKHRoaXMuc3RhdGUgPT09IFMuSEVBREVSX0ZJRUxEX1NUQVJUICYmIHRoaXMuaW5kZXggPT09IDApIHx8XG5cdFx0XHQodGhpcy5zdGF0ZSA9PT0gUy5QQVJUX0RBVEEgJiYgdGhpcy5pbmRleCA9PT0gdGhpcy5ib3VuZGFyeS5sZW5ndGgpKSB7XG5cdFx0XHR0aGlzLm9uUGFydEVuZCgpO1xuXHRcdH0gZWxzZSBpZiAodGhpcy5zdGF0ZSAhPT0gUy5FTkQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignTXVsdGlwYXJ0UGFyc2VyLmVuZCgpOiBzdHJlYW0gZW5kZWQgdW5leHBlY3RlZGx5Jyk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIF9maWxlTmFtZShoZWFkZXJWYWx1ZSkge1xuXHQvLyBtYXRjaGVzIGVpdGhlciBhIHF1b3RlZC1zdHJpbmcgb3IgYSB0b2tlbiAoUkZDIDI2MTYgc2VjdGlvbiAxOS41LjEpXG5cdGNvbnN0IG0gPSBoZWFkZXJWYWx1ZS5tYXRjaCgvXFxiZmlsZW5hbWU9KFwiKC4qPylcInwoW14oKTw+QCw7OlxcXFxcIi9bXFxdPz17fVxcc1xcdF0rKSkoJHw7XFxzKS9pKTtcblx0aWYgKCFtKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgbWF0Y2ggPSBtWzJdIHx8IG1bM10gfHwgJyc7XG5cdGxldCBmaWxlbmFtZSA9IG1hdGNoLnNsaWNlKG1hdGNoLmxhc3RJbmRleE9mKCdcXFxcJykgKyAxKTtcblx0ZmlsZW5hbWUgPSBmaWxlbmFtZS5yZXBsYWNlKC8lMjIvZywgJ1wiJyk7XG5cdGZpbGVuYW1lID0gZmlsZW5hbWUucmVwbGFjZSgvJiMoXFxkezR9KTsvZywgKG0sIGNvZGUpID0+IHtcblx0XHRyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKTtcblx0fSk7XG5cdHJldHVybiBmaWxlbmFtZTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRvRm9ybURhdGEoQm9keSwgY3QpIHtcblx0aWYgKCEvbXVsdGlwYXJ0L2kudGVzdChjdCkpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdGYWlsZWQgdG8gZmV0Y2gnKTtcblx0fVxuXG5cdGNvbnN0IG0gPSBjdC5tYXRjaCgvYm91bmRhcnk9KD86XCIoW15cIl0rKVwifChbXjtdKykpL2kpO1xuXG5cdGlmICghbSkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ25vIG9yIGJhZCBjb250ZW50LXR5cGUgaGVhZGVyLCBubyBtdWx0aXBhcnQgYm91bmRhcnknKTtcblx0fVxuXG5cdGNvbnN0IHBhcnNlciA9IG5ldyBNdWx0aXBhcnRQYXJzZXIobVsxXSB8fCBtWzJdKTtcblxuXHRsZXQgaGVhZGVyRmllbGQ7XG5cdGxldCBoZWFkZXJWYWx1ZTtcblx0bGV0IGVudHJ5VmFsdWU7XG5cdGxldCBlbnRyeU5hbWU7XG5cdGxldCBjb250ZW50VHlwZTtcblx0bGV0IGZpbGVuYW1lO1xuXHRjb25zdCBlbnRyeUNodW5rcyA9IFtdO1xuXHRjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuXG5cdGNvbnN0IG9uUGFydERhdGEgPSB1aThhID0+IHtcblx0XHRlbnRyeVZhbHVlICs9IGRlY29kZXIuZGVjb2RlKHVpOGEsIHtzdHJlYW06IHRydWV9KTtcblx0fTtcblxuXHRjb25zdCBhcHBlbmRUb0ZpbGUgPSB1aThhID0+IHtcblx0XHRlbnRyeUNodW5rcy5wdXNoKHVpOGEpO1xuXHR9O1xuXG5cdGNvbnN0IGFwcGVuZEZpbGVUb0Zvcm1EYXRhID0gKCkgPT4ge1xuXHRcdGNvbnN0IGZpbGUgPSBuZXcgRmlsZShlbnRyeUNodW5rcywgZmlsZW5hbWUsIHt0eXBlOiBjb250ZW50VHlwZX0pO1xuXHRcdGZvcm1EYXRhLmFwcGVuZChlbnRyeU5hbWUsIGZpbGUpO1xuXHR9O1xuXG5cdGNvbnN0IGFwcGVuZEVudHJ5VG9Gb3JtRGF0YSA9ICgpID0+IHtcblx0XHRmb3JtRGF0YS5hcHBlbmQoZW50cnlOYW1lLCBlbnRyeVZhbHVlKTtcblx0fTtcblxuXHRjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpO1xuXHRkZWNvZGVyLmRlY29kZSgpO1xuXG5cdHBhcnNlci5vblBhcnRCZWdpbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRwYXJzZXIub25QYXJ0RGF0YSA9IG9uUGFydERhdGE7XG5cdFx0cGFyc2VyLm9uUGFydEVuZCA9IGFwcGVuZEVudHJ5VG9Gb3JtRGF0YTtcblxuXHRcdGhlYWRlckZpZWxkID0gJyc7XG5cdFx0aGVhZGVyVmFsdWUgPSAnJztcblx0XHRlbnRyeVZhbHVlID0gJyc7XG5cdFx0ZW50cnlOYW1lID0gJyc7XG5cdFx0Y29udGVudFR5cGUgPSAnJztcblx0XHRmaWxlbmFtZSA9IG51bGw7XG5cdFx0ZW50cnlDaHVua3MubGVuZ3RoID0gMDtcblx0fTtcblxuXHRwYXJzZXIub25IZWFkZXJGaWVsZCA9IGZ1bmN0aW9uICh1aThhKSB7XG5cdFx0aGVhZGVyRmllbGQgKz0gZGVjb2Rlci5kZWNvZGUodWk4YSwge3N0cmVhbTogdHJ1ZX0pO1xuXHR9O1xuXG5cdHBhcnNlci5vbkhlYWRlclZhbHVlID0gZnVuY3Rpb24gKHVpOGEpIHtcblx0XHRoZWFkZXJWYWx1ZSArPSBkZWNvZGVyLmRlY29kZSh1aThhLCB7c3RyZWFtOiB0cnVlfSk7XG5cdH07XG5cblx0cGFyc2VyLm9uSGVhZGVyRW5kID0gZnVuY3Rpb24gKCkge1xuXHRcdGhlYWRlclZhbHVlICs9IGRlY29kZXIuZGVjb2RlKCk7XG5cdFx0aGVhZGVyRmllbGQgPSBoZWFkZXJGaWVsZC50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0aWYgKGhlYWRlckZpZWxkID09PSAnY29udGVudC1kaXNwb3NpdGlvbicpIHtcblx0XHRcdC8vIG1hdGNoZXMgZWl0aGVyIGEgcXVvdGVkLXN0cmluZyBvciBhIHRva2VuIChSRkMgMjYxNiBzZWN0aW9uIDE5LjUuMSlcblx0XHRcdGNvbnN0IG0gPSBoZWFkZXJWYWx1ZS5tYXRjaCgvXFxibmFtZT0oXCIoW15cIl0qKVwifChbXigpPD5ALDs6XFxcXFwiL1tcXF0/PXt9XFxzXFx0XSspKS9pKTtcblxuXHRcdFx0aWYgKG0pIHtcblx0XHRcdFx0ZW50cnlOYW1lID0gbVsyXSB8fCBtWzNdIHx8ICcnO1xuXHRcdFx0fVxuXG5cdFx0XHRmaWxlbmFtZSA9IF9maWxlTmFtZShoZWFkZXJWYWx1ZSk7XG5cblx0XHRcdGlmIChmaWxlbmFtZSkge1xuXHRcdFx0XHRwYXJzZXIub25QYXJ0RGF0YSA9IGFwcGVuZFRvRmlsZTtcblx0XHRcdFx0cGFyc2VyLm9uUGFydEVuZCA9IGFwcGVuZEZpbGVUb0Zvcm1EYXRhO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoaGVhZGVyRmllbGQgPT09ICdjb250ZW50LXR5cGUnKSB7XG5cdFx0XHRjb250ZW50VHlwZSA9IGhlYWRlclZhbHVlO1xuXHRcdH1cblxuXHRcdGhlYWRlclZhbHVlID0gJyc7XG5cdFx0aGVhZGVyRmllbGQgPSAnJztcblx0fTtcblxuXHRmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIEJvZHkpIHtcblx0XHRwYXJzZXIud3JpdGUoY2h1bmspO1xuXHR9XG5cblx0cGFyc2VyLmVuZCgpO1xuXG5cdHJldHVybiBmb3JtRGF0YTtcbn1cbiJdLCJuYW1lcyI6WyJzIiwiUyIsIlNUQVJUX0JPVU5EQVJZIiwiSEVBREVSX0ZJRUxEX1NUQVJUIiwiSEVBREVSX0ZJRUxEIiwiSEVBREVSX1ZBTFVFX1NUQVJUIiwiSEVBREVSX1ZBTFVFIiwiSEVBREVSX1ZBTFVFX0FMTU9TVF9ET05FIiwiSEVBREVSU19BTE1PU1RfRE9ORSIsIlBBUlRfREFUQV9TVEFSVCIsIlBBUlRfREFUQSIsIkVORCIsImYiLCJGIiwibG93ZXIiLCJjIiwibm9vcCIsIk11bHRpcGFydFBhcnNlciIsImNvbnN0cnVjdG9yIiwiYm91bmRhcnkiLCJ0aGlzIiwiaW5kZXgiLCJmbGFncyIsIm9uSGVhZGVyRW5kIiwib25IZWFkZXJGaWVsZCIsIm9uSGVhZGVyc0VuZCIsIm9uSGVhZGVyVmFsdWUiLCJvblBhcnRCZWdpbiIsIm9uUGFydERhdGEiLCJvblBhcnRFbmQiLCJib3VuZGFyeUNoYXJzIiwidWk4YSIsIlVpbnQ4QXJyYXkiLCJsZW5ndGgiLCJpIiwiY2hhckNvZGVBdCIsImxvb2tiZWhpbmQiLCJzdGF0ZSIsIndyaXRlIiwiZGF0YSIsImxlbmd0aF8iLCJwcmV2aW91c0luZGV4IiwiYm91bmRhcnlMZW5ndGgiLCJib3VuZGFyeUVuZCIsImJ1ZmZlckxlbmd0aCIsImNsIiwibWFyayIsIm5hbWUiLCJjbGVhciIsImNhbGxiYWNrIiwiY2FsbGJhY2tTeW1ib2wiLCJzdGFydCIsImVuZCIsInVuZGVmaW5lZCIsInN1YmFycmF5IiwiZGF0YUNhbGxiYWNrIiwibWFya1N5bWJvbCIsIl9sb29rYmVoaW5kIiwiYnVmZmVyIiwiYnl0ZU9mZnNldCIsImJ5dGVMZW5ndGgiLCJFcnJvciIsImFzeW5jIiwidG9Gb3JtRGF0YSIsIkJvZHkiLCJjdCIsInRlc3QiLCJUeXBlRXJyb3IiLCJtIiwibWF0Y2giLCJwYXJzZXIiLCJoZWFkZXJGaWVsZCIsImhlYWRlclZhbHVlIiwiZW50cnlWYWx1ZSIsImVudHJ5TmFtZSIsImNvbnRlbnRUeXBlIiwiZmlsZW5hbWUiLCJlbnRyeUNodW5rcyIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJkZWNvZGVyIiwiZGVjb2RlIiwic3RyZWFtIiwiYXBwZW5kVG9GaWxlIiwicHVzaCIsImFwcGVuZEZpbGVUb0Zvcm1EYXRhIiwiZmlsZSIsIkZpbGUiLCJ0eXBlIiwiYXBwZW5kIiwiYXBwZW5kRW50cnlUb0Zvcm1EYXRhIiwiVGV4dERlY29kZXIiLCJ0b0xvd2VyQ2FzZSIsInNsaWNlIiwibGFzdEluZGV4T2YiLCJyZXBsYWNlIiwiY29kZSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsIl9maWxlTmFtZSIsImNodW5rIl0sInNvdXJjZVJvb3QiOiIifQ==